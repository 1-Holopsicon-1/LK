var B=Object.defineProperty,E=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var C=(i,e,t)=>e in i?B(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,D=(i,e)=>{for(var t in e||(e={}))$.call(e,t)&&C(i,t,e[t]);if(F)for(var t of F(e))I.call(e,t)&&C(i,t,e[t]);return i},P=(i,e)=>E(i,O(e));import{r as l,q as k,cM as M,j as g}from"./vendor-00bea631.js";import{b7 as U,s as _,bg as G,B as H,F as L,I as K,S as V,j as Y,c as z,b5 as J,bh as Q}from"./index-d824e111.js";import{s as X}from"./send-hr-form-work-transfer-82982d5e.js";const Z=(i,e,t,a,r,d,u,o,c,n,p,f,h,m,N,v)=>{const{surname:S,name:b,patronymic:x}=i;return{title:"Заявление на перевод",data:[{title:"ФИО",value:S+" "+b+" "+x,fieldName:"fio",type:"simple-text",visible:!0},{title:"",type:"simple-text",value:e[t].jobGuid.toString(),fieldName:"jobGuid",visible:!1},{title:"Текущее место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Должность",type:"simple-text",fieldName:"post",value:e[t].jobTitle.toString(),visible:!0},{title:"Подразделение",type:"simple-text",value:e[t].subDivision.toString(),fieldName:"subDivision",visible:!0},{title:"Cтавка",type:"simple-text",value:e[t].rate.toString(),fieldName:"currentRate",visible:!0},{title:"Новое место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Подразделение",type:"auto-complete-input",fieldName:"newPlaceOfWork",value:o,width:"100%",suggestions:v,required:!0,mask:!0,visible:!0,placeholder:"Начните вводить название подразделения",onChange:s=>{c(s)}},{title:"Должность",value:d,fieldName:"newPost",editable:!0,mask:!0,required:!0,onChange:s=>{u(s)}},{title:"Тип занятости",type:"select",fieldName:"employment",value:a,editable:!0,required:!0,width:"100%",items:[{id:0,title:"Основное место работы"},{id:1,title:"По совместительству"}],onChange:s=>{r(s),s.title=="По совместительству"&&n.title=="1"&&p(null)}},{title:"Ставка",type:"select",fieldName:"newRate",value:n,editable:!0,required:!0,width:"100%",items:(a==null?void 0:a.title)=="По совместительству"?[{id:1,title:"0.5"},{id:2,title:"0.25"}]:[{id:0,title:"1"},{id:1,title:"0.5"},{id:2,title:"0.25"}],onChange:s=>{p(s)}},{title:"При устройстве по совместительству ставка не может превышать 0.5",type:"text-warning",fieldName:"PartTime",value:null,visible:(a==null?void 0:a.title)=="По совместительству",required:!1,width:"100%"},{title:"Тип совместительства",type:"select",fieldName:"parttime_type",value:m,editable:!0,required:(a==null?void 0:a.title)=="По совместительству",specialType:"PartTime",width:"100%",items:[{id:0,title:"Внутреннее"},{id:1,title:"Внешнее"}],onChange:s=>{N(s)}},{title:"Дата перевода",type:"date",value:f,fieldName:"transferDate",editable:!0,mask:!0,required:!0,minValueInput:U(0),onChange:s=>{h(s)}}]}},ee=i=>{const e=i.find(t=>t.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},le=()=>{var w;var i;const[e,t]=l.useState(null),a=k(J),{data:{dataUserApplication:r,dataWorkerApplication:d}}=_.useApplications(),{loading:u}=G.useBufferWorkTransfer(),[o,c]=l.useState(!1),[n,p]=l.useState(null),[f,h]=l.useState(null),[m,N]=l.useState(null),[v,S]=l.useState(null),[b,x]=l.useState(null),[s,j]=l.useState(null),[q,W]=l.useState({}),A=k(Q),y=o!=null?o:!1,{id:R}=M(),T=+R;return l.useEffect(()=>{e&&r&&W(ee(e.data))},[e]),l.useEffect(()=>{r&&d&&!u&&t(Z(r,d,T,f,h,m,N,v,S,b,x,s,j,n,p,a))},[r,T,u,f,m,v,b,s,n]),g.jsx(H,{isDone:y,children:!!e&&!!t&&g.jsxs(L,{children:[g.jsx(K,P(D({},e),{collapsed:y,setData:t,specialFieldsNameConfig:q})),g.jsx(V,{text:"Отправить",action:()=>X(Y.HOLIDAY_WORK,[e],c,A),isLoading:u,completed:o,setCompleted:c,repeatable:!1,buttonSuccessText:"Отправлено",isDone:y,isActive:z(e)&&((w=(i=e.optionalCheckbox)===null||i===void 0?void 0:i.value)!=null?w:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{le as default};
