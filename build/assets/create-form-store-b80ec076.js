var w=Object.defineProperty,h=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var F=(a,e,t)=>e in a?w(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,s=(a,e)=>{for(var t in e||(e={}))S.call(e,t)&&F(a,t,e[t]);if(i)for(var t of i(e))v.call(e,t)&&F(a,t,e[t]);return a},c=(a,e)=>h(a,D(e));import{d as u,e as E}from"./index-0f8b6250.js";import{p as x,e as y,x as l,h as b,u as m}from"./vendor-31894644.js";const A=({defaultStore:a,api:e})=>{const t=a,k=()=>({data:m(p).data,loading:m(n.pending),error:m(p).error,completed:m(p).completed}),f=x({name:"changeCompleted",sid:"8d4ys9"}),d=y(async o=>{const r=await e.post(o);if(r.data.result!=="ok")throw new Error(r.data.error_text);return r.data},{name:"postFormFx",sid:"bm6r7m"});l({and:[{clock:d.doneData,fn:()=>({message:"Данные формы успешно отправлены",type:"success"}),target:u.evokePopUpMessage}],or:{sid:"-f764dw"}}),l({and:[{clock:d.failData,fn:o=>({message:"".concat(o.message),type:"failure"}),target:u.evokePopUpMessage}],or:{sid:"-er836f"}}),l({and:[{clock:d.doneData,target:E.getApplicationsFx}],or:{sid:"-eba1yy"}});const n=y(async o=>{if(e.get)try{const r=await e.get(o);return s({},r.data)}catch(r){throw new Error(r)}return t.data},{name:"getFormFx",sid:"5lxgfo"}),g=x({name:"clearStore",sid:"-ejj22f"}),p=b(t,{name:"$formStore",sid:"3nz7k3"}).on(n,o=>c(s({},o),{error:null})).on(n.doneData,(o,r)=>c(s({},o),{data:r})).on(n.failData,(o,r)=>c(s({},o),{error:r.message})).on(f,(o,r)=>c(s({},o),{completed:r.completed})).on(g,()=>s({},t));return{selectors:{useForm:k},effects:{getFormFx:n,postFormFx:d},events:{changeCompleted:f,clearStore:g}}};export{A as c};
