var j=Object.defineProperty,N=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var f=(s,e,t)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))y.call(e,t)&&f(s,t,e[t]);if(d)for(var t of d(e))C.call(e,t)&&f(s,t,e[t]);return s},b=(s,e)=>N(s,h(e));import{r as o,q as R,cM as T,j as n}from"./vendor-33947725.js";import{s as k,bf as A,B as D,F as B,I as E,S as W,j as $,c as M,bg as P}from"./index-5c2dce5e.js";import{s as U}from"./send-hr-form-work-transfer-888d2634.js";const _=(s,e,t)=>{const{surname:a,name:i,patronymic:l}=s;return{title:"Заявление на изменение ставки",data:[{title:"ФИО",value:a+" "+i+" "+l,fieldName:"fio",type:"simple-text"},{title:"",type:"simple-text",value:e[t].jobGuid.toString(),fieldName:"jobGuid"},{title:"Должность",type:"simple-text",fieldName:"post",value:e[t].jobTitle.toString()},{title:"Подразделение",type:"simple-text",value:e[t].subDivision.toString(),fieldName:"subDivision"},{title:"Текущая ставка",type:"simple-text",value:e[t].rate.toString(),fieldName:"currentRate"},{title:"Желаемая ставка",type:"select",fieldName:"newRate",value:"",editable:!0,required:!0,width:"100%",items:[{id:0,title:"0.25"},{id:1,title:"0.5"},{id:2,title:"1"}]}]}},q=s=>{const e=s.find(t=>t.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},O=()=>{var s,e;const[t,a]=o.useState(null),{data:{dataUserApplication:i,dataWorkerApplication:l}}=k.useApplications(),{loading:u}=A.useBufferWorkTransfer(),[r,p]=o.useState(!1),[x,g]=o.useState({}),F=R(P),c=r!=null?r:!1,{id:S}=T(),m=+S;return o.useEffect(()=>{t&&i&&g(q(t.data))},[t]),o.useEffect(()=>{i&&l&&!u&&a(_(i,l,m))},[i,m,u]),n.jsx(D,{isDone:c,children:!!t&&!!a&&n.jsxs(B,{children:[n.jsx(E,b(v({},t),{collapsed:c,setData:a,specialFieldsNameConfig:x})),n.jsx(W,{text:"Отправить",action:()=>U($.HOLIDAY_WORK,[t],p,F),isLoading:u,completed:r,setCompleted:p,repeatable:!1,buttonSuccessText:"Отправлено",isDone:c,isActive:M(t)&&((s=(e=t.optionalCheckbox)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{O as default};
