import{p as R,e as y,S as j,h as q,f as d,j as a,s as w,r as s,F as N}from"./vendor-08ab745b.js";import{$ as _,g as F,b as z,cR as D,al as C,d as A,ai as E,a2 as f,k as $,W as I,F as T,I as M,M as O,S as P,c as U,cS as H}from"./index-0892b83f.js";const W=()=>_.get(`?getRequestHighComfort&token=${F()}`),B=e=>{const t=new FormData;t.set("token",F()),t.set("postRequestHighComfort","1");for(const[o,r]of Object.entries(e))t.set(o,r);return _.post("?postRequestHighComfort=1",t,{headers:{"Content-Type":"multipart/form-data"}})},h={superiorRoom:null,error:null},L=()=>({data:d(x).superiorRoom,loading:d(n.pending),error:d(x).error}),G=R({name:"postSuperiorRoom",sid:"8fhu4k"}),J=y(async e=>{},{name:"postSuperiorRoomFx",sid:"-fra7ot"});j({from:G,to:J});const n=y(async()=>{try{return(await W()).data}catch{throw new Error("Не удалось загрузить раздел")}},{name:"getSuperiorRoomFx",sid:"drkyz"}),x=q(h,{name:"$superiorRoomStore",sid:"-qtf9jq"}).on(n,e=>({...e,error:null})).on(n.doneData,(e,t)=>({...e,superiorRoom:t})).on(n.failData,(e,t)=>({...e,error:t.message})).on(z.userGuid,()=>({...h})),K={useSuperiorRoom:L},Q={getSuperiorRoomFx:n},v=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],g=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],V=[{id:0,title:"ул. Бориса Галушкина, д. 9"},{id:1,title:"ул. Михалковская, д. 7, корп. 3"},{id:2,title:"ул. Малая Семеновская, д. 12"}],X=[{value:!1,title:"Общественная",files:[],maxFiles:10,required:!1,fieldName:"society",checkboxCondition:"straight"},{value:!1,title:"Научная",files:[],maxFiles:10,required:!1,fieldName:"science",checkboxCondition:"straight"},{value:!1,title:"Спортивная",files:[],maxFiles:10,required:!1,fieldName:"sport",checkboxCondition:"straight"},{value:!1,title:"Творческая",files:[],maxFiles:10,required:!1,fieldName:"creativity",checkboxCondition:"straight"}],Y=(e,t)=>{const{fio:o,phone:r,email:i}=e,u=t?.data[3]?.value?.id;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:o,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:t?.data[1]?.value??r,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:t?.data[2]?.value??i,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:t?.data[3]?.value??null,fieldName:"address",type:"select",items:V,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:u===0?g:v,width:"100%",editable:!0,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:u===0?g:v,width:"100%",editable:!0,required:!0},{title:"Участие во внеучебной деятельности",value:null,fieldName:"extracurricular",type:"checkbox-docs",items:X,width:"100%",editable:!0}],alert:a.jsx(a.Fragment,{children:D}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:"С приказами об изменении размеров платы за дополнительные услуги № 0597-ОД от 08.06.2021 и № 0032-АХД от 09.03.2022 ознакомлен(а)",value:!1,fieldName:"",editable:!0},links:[{title:"Приказ № 0032-АХД от 09.03.2022 (ул. Михалковская, д. 7, корп. 3)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0032-AHD_ot_09_03_2022_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_us.pdf",type:"document"},{title:"Приказ № 0597-ОД от 08.06.2021 (ул. Малая Семеновская, д. 12)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0597-OD_ot_08_06_2021_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_usl.pdf",type:"document"},{title:"Приказ № 15-АХД от 10.10.2023 (ул. Бориса Галушкина, д. 9)",link:"https://mospolytech.ru/upload/medialibrary/5d3/k1eyzf9xk6x6rgi8hq1l83fcz941ve94/razmer-platy-za-dopuslugu-10102023.PDF",type:"document"}]}},Z=(e,t,o)=>{t(!0);const r=C(e);try{B(r),t(!1),o(!0)}catch(i){t(!1),A.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${i}`,type:"failure",time:3e4})}},ee=w.div.withConfig({componentId:"sc-15p7xv6-0"})(["display:flex;align-items:",";justify-content:center;width:100%;height:",";padding:10px;color:var(--text);@media (max-width:1000px){padding:0;}"],({isDone:e})=>e?"center":"flex-start",({isDone:e})=>e&&"100%"),ae=()=>{const[e,t]=s.useState(null),{data:o,error:r}=K.useSuperiorRoom(),[i,u]=s.useState(0),[c,p]=s.useState(!1),[b,S]=s.useState(!1),l=(c||!o?.is_avaliable)??!1,{data:{user:k}}=E.useUser();if(k?.educationForm!=="Очная")return a.jsx(f,{text:"Данный раздел недоступен для вашей формы обучения"});const m=H();return $&&m?a.jsx(f,{text:m}):(s.useEffect(()=>{o&&t(Y(o,e))},[o,i]),s.useEffect(()=>{e&&u(e?.data[3]?.value?.id)},[e?.data[3]?.value]),a.jsx(I,{load:()=>Q.getSuperiorRoomFx(),loading:!o,error:r,data:o,children:a.jsx(ee,{isDone:l,children:!!e&&!!t&&a.jsxs(T,{children:[a.jsx(M,{...e,collapsed:l,setData:t}),a.jsxs(O,{title:"Информация по заявке",type:"info",icon:a.jsx(N,{}),visible:l,children:["Ваша заявка направлена на рассмотрение жилищной комиссии. Итоги рассмотрения будут направлены Вам 11 сентября 2023 года на указанную в заявке почту:"," ",(e.data?.[2]).value]}),a.jsx(P,{text:o?.is_avaliable?"Отправить":"Отправлено",action:()=>Z(e,S,p),isLoading:b,completed:c,setCompleted:p,repeatable:!1,buttonSuccessText:"Отправлено",isDone:l,isActive:U(e)&&(e.optionalCheckbox?.value??!0),popUpFailureMessage:l?o?.error_text??"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{ae as default};
