var m=(e,a,o)=>new Promise((x,r)=>{var h=d=>{try{i(o.next(d))}catch(b){r(b)}},n=d=>{try{i(o.throw(d))}catch(b){r(b)}},i=d=>d.done?x(d.value):Promise.resolve(d.value).then(h,n);i((o=o.apply(e,a)).next())});import{p as R,e as q,h as C,x as L,i as K,s as u,r as T,j as t}from"./vendor-6764d205.js";import{dV as Y,s as V,a5 as W,P as H,g as j,T as w,B as F}from"./index-e16f01f3.js";const y=[{id:"sberbank",name:"–ü–ê–û –°–±–µ—Ä–±–∞–Ω–∫"},{id:"vtb",name:"–ë–∞–Ω–∫ –í–¢–ë (–ü–ê–û)"},{id:"alfabank",name:"–ê–û –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫"}];class f{static getCardRequest(){return m(this,null,function*(){return yield new Promise(a=>setTimeout(a,500)),this.storage})}static submitCardRequest(a){return m(this,null,function*(){return yield new Promise(o=>setTimeout(o,1e3)),this.storage={bank:a.bank,additionalBank:a.additionalBank,status:"processing",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},setTimeout(()=>{this.storage&&this.storage.bank===a.bank&&(this.storage.status="ready",this.storage.updated_at=new Date().toISOString())},5e3),{success:!0,data:this.storage,message:"–ó–∞—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–Ω–æ"}})}static downloadDocument(){return m(this,null,function*(){if(yield new Promise(h=>setTimeout(h,500)),!this.storage||this.storage.status!=="ready")throw new Error("–î–æ–∫—É–º–µ–Ω—Ç –Ω–µ –≥–æ—Ç–æ–≤ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è");const a=`%PDF-1.4
1 0 obj
<<
/Type /Catalog
/Pages 2 0 R
>>
endobj

2 0 obj
<<
/Type /Pages
/Kids [3 0 R]
/Count 1
>>
endobj

3 0 obj
<<
/Type /Page
/Parent 2 0 R
/MediaBox [0 0 612 792]
/Contents 4 0 R
>>
endobj

4 0 obj
<<
/Length 44
>>
stream
BT
/F1 12 Tf
100 700 Td
(Card Request Document) Tj
ET
endstream
endobj

xref
0 5
0000000000 65535 f
0000000015 00000 n
0000000068 00000 n
0000000125 00000 n
0000000214 00000 n
trailer
<<
/Size 5
/Root 1 0 R
>>
startxref
308
%%EOF`,o=new Blob([a],{type:"application/pdf"}),x=window.URL.createObjectURL(o),r=document.createElement("a");r.href=x,r.download=`card-request-${this.storage.bank}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(x)})}static reset(){this.storage=null}static setStatus(a){this.storage&&(this.storage.status=a,this.storage.updated_at=new Date().toISOString())}}Y(f,"storage",null);const J={getCardRequest:()=>f.getCardRequest(),submitCardRequest:e=>f.submitCardRequest(e),downloadDocument:()=>f.downloadDocument()},B=J,S=R({name:"cardRequestSubmitted",sid:"-rbem0m"}),D=R({name:"documentDownloadRequested",sid:"f8fluo"}),z=R({name:"cardRequestReset",sid:"-10y3yg"}),l=q(()=>m(void 0,null,function*(){return yield B.getCardRequest()}),{name:"getCardRequestFx",sid:"ei32fg"}),c=q(e=>m(void 0,null,function*(){const a=yield B.submitCardRequest(e);if(!a.success)throw new Error(a.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–ª–µ–Ω–∏—è");return a.data}),{name:"submitCardRequestFx",sid:"-79p237"}),p=q(()=>m(void 0,null,function*(){yield B.downloadDocument()}),{name:"downloadDocumentFx",sid:"-896399"}),$=C(null,{name:"$cardRequest",sid:"-68ouxg"}).on(l.doneData,(e,a)=>a).on(c.doneData,(e,a)=>a).reset(z),A=C(!1,{name:"$isLoading",sid:"motyxs"}).on([l,c,p],()=>!0).on([l.done,l.fail,c.done,c.fail,p.done,p.fail],()=>!1),P=C(null,{name:"$error",sid:"-p7eezr"}).on([l.fail,c.fail,p.fail],(e,a)=>a.error.message||"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞").on([l,c,p],()=>null);L({and:[{clock:S,target:c}],or:{sid:"e6l21i"}});L({and:[{clock:D,target:p}],or:{sid:"e8s8ey"}});const Q=()=>K({cardRequest:$,isLoading:A,error:P,submitRequest:S,downloadDocument:D,getRequest:l,resetRequest:z}),X={events:{cardRequestSubmitted:S,documentDownloadRequested:D,cardRequestReset:z},effects:{getCardRequestFx:l,submitCardRequestFx:c,downloadDocumentFx:p},stores:{$cardRequest:$,$isLoading:A,$error:P},selectors:{useCardRequest:Q}},g=e=>({sberbank:"üü¢",vtb:"üîµ",gazprombank:"üî∑",alfabank:"üî¥"})[e]||"üè¶",k=e=>{const a=y.find(o=>o.id===e);return(a==null?void 0:a.name)||e},Z=u.div.withConfig({componentId:"sc-xn7bjn-0"})(["display:flex;flex-direction:column;gap:24px;max-width:800px;margin:0 auto;padding:20px;@media (max-width:768px){padding:16px;gap:16px;}"]),ee=u.div.withConfig({componentId:"sc-xn7bjn-1"})(["padding:24px;border-radius:var(--brLight);border:1px solid var(--theme-mild-opposite);@media (max-width:768px){padding:16px;}"]),te=u.div.withConfig({componentId:"sc-xn7bjn-2"})(["border-radius:var(--brLight);padding:20px;margin:16px 0;color:var(--text);line-height:1.8;font-size:15px;.user-info{margin-bottom:20px;}.request-text{margin-bottom:16px;}.additional-request{margin:16px 0;padding:12px;background:var(--theme-2);border-radius:var(--brLight);border-left:4px solid var(--reallyBlue);}.consent-text{margin-top:20px;font-style:italic;}"]),ne=u.div.withConfig({componentId:"sc-xn7bjn-3"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin:16px 0;@media (max-width:768px){grid-template-columns:repeat(2,1fr);gap:12px;}"]),ae=u.div.withConfig({componentId:"sc-xn7bjn-4"})(["margin:24px 0;padding:20px;background:var(--block-content);border-radius:var(--brLight);border:1px solid var(--theme-mild-opposite);"]),se=u.div.withConfig({componentId:"sc-xn7bjn-5"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 12px;border-radius:var(--brLight);border:2px solid ",";background:",";color:",";cursor:pointer;transition:all 0.2s ease;text-align:center;min-height:120px;&:hover{border-color:var(--reallyBlue);background:",";transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1);}input[type='checkbox']{display:none;}.bank-icon{font-size:2.5rem;margin-bottom:12px;display:flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:12px;background:",";}.bank-name{font-weight:500;font-size:0.95rem;line-height:1.2;}@media (max-width:768px){padding:16px 8px;min-height:100px;.bank-icon{font-size:2rem;width:50px;height:50px;margin-bottom:8px;}.bank-name{font-size:0.85rem;}}"],({selected:e})=>e?"var(--reallyBlue)":"var(--theme-mild-opposite)",({selected:e})=>e?"var(--reallyBlue)":"var(--block-content)",({selected:e})=>e?"white":"var(--text)",({selected:e})=>e?"var(--reallyBlue)":"var(--theme-mild)",({selected:e})=>e?"rgba(255, 255, 255, 0.2)":"var(--theme-mild)"),oe=u.div.withConfig({componentId:"sc-xn7bjn-6"})(["margin-top:24px;padding:24px;background:var(--block-content);border-radius:var(--brLight);border:1px solid var(--theme-mild-opposite);.status-content{display:flex;align-items:center;gap:12px;margin-bottom:16px;}.status-icon{font-size:24px;}.status-text{font-size:16px;font-weight:500;}@media (max-width:768px){padding:16px;.status-content{flex-direction:column;align-items:flex-start;gap:8px;}}"]),ie=u.div.withConfig({componentId:"sc-xn7bjn-7"})(["display:flex;gap:12px;justify-content:flex-start;flex-wrap:wrap;@media (max-width:768px){flex-direction:column;}"]),re=()=>{const{cardRequest:e,isLoading:a,error:o,submitRequest:x,downloadDocument:r,getRequest:h}=X.selectors.useCardRequest(),{data:{user:n}}=V.useUser(),[i,d]=T.useState(""),N=(()=>{const s=new Date,v=new Date(s.getFullYear(),9,1);return s<v})(),I=["l.m.lukyanov@mospolytech.ru","a.s.zhuplev@mospolytech.ru","mfnbrx@gmail.com","t.t.testov@mospolytech.ru"];if(n!=null&&n.email&&!I.includes(n.email))return t.jsx(W,{text:"–î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–ª–∏ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤–∞—Å"});T.useEffect(()=>{h()},[]);const O=s=>{d(s===i?"":s)},E=()=>{x({bank:"vtb",additionalBank:i})},_=()=>{r()},M=()=>{if(!(e!=null&&e.status))return null;switch(e.status){case"processing":return t.jsxs("div",{className:"status-content",children:[t.jsx("span",{className:"status-icon",style:{color:"var(--orange)",fontSize:"24px"},children:"‚è±Ô∏è"}),t.jsx("span",{className:"status-text",children:"–ó–∞—è–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è"})]});case"ready":return t.jsxs("div",{className:"status-content",children:[t.jsx("span",{className:"status-icon",style:{color:"var(--green)",fontSize:"24px"},children:"‚úÖ"}),t.jsx("span",{className:"status-text",children:"–î–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é"})]});default:return null}},U=()=>{const s=y.find(v=>v.id===(e==null?void 0:e.bank));return(s==null?void 0:s.name)||(e==null?void 0:e.bank)},G=()=>(e==null?void 0:e.additionalBank)&&e.additionalBank!==""&&e.additionalBank!==null&&e.additionalBank!==void 0;return t.jsx(H,{children:t.jsxs(Z,{children:[o&&t.jsx(j,{type:"failure",title:"–û—à–∏–±–∫–∞",children:o}),e&&t.jsxs(oe,{children:[t.jsx(w,{size:4,bottomGap:"16px",children:"–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–ª–µ–Ω–∏—è"}),M(),e.bank&&t.jsxs("div",{style:{marginBottom:"16px",color:"var(--text-secondary)"},children:[t.jsxs("p",{style:{marginBottom:"8px"},children:["–û—Å–Ω–æ–≤–Ω–æ–π –±–∞–Ω–∫:"," ",t.jsx("span",{style:{fontSize:"1.2em"},children:g(e.bank)})," ",t.jsx("strong",{children:U()})]}),G()&&t.jsxs("p",{style:{marginBottom:"0"},children:["–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–Ω–∫:"," ",t.jsx("span",{style:{fontSize:"1.2em"},children:g(e.additionalBank)})," ",t.jsx("strong",{children:k(e.additionalBank)})]})]}),e.status==="ready"&&t.jsx(F,{onClick:_,text:"üì• –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç",background:"var(--green)",textColor:"white",loading:a})]}),N&&t.jsxs(ee,{children:[t.jsx(w,{size:4,bottomGap:"16px",children:e?"–ü–æ–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ":"–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–ª–µ–Ω–∏—è"}),t.jsxs(te,{children:[t.jsxs("div",{className:"user-info",children:["–Ø,"," ",n!=null&&n.surname&&n!==null&&n!==void 0&&n.name&&n!==null&&n!==void 0&&n.patronymic?`${n.surname} ${n.name} ${n.patronymic}`:"[–§–ò–û]",",",t.jsx("br",{}),"–ü–∞—Å–ø–æ—Ä—Ç: ",n!=null&&n.passSer&&n!==null&&n!==void 0&&n.passNum?`${n.passSer} ${n.passNum}`:"—Å–∫—Ä—ã—Ç–æ",t.jsx("br",{}),"–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:"," ","—Å–∫—Ä—ã—Ç–æ",t.jsx("br",{}),"–ù–æ–º–µ—Ä –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞: ",(n==null?void 0:n.phone)||"[—Ç–µ–ª–µ—Ñ–æ–Ω]",t.jsx("br",{}),"–ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã: ",(n==null?void 0:n.email)||"[email]"]}),t.jsxs("div",{className:"request-text",children:["–î–ª—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏—Ç–∞—é—â–∏—Ö—Å—è –º–Ω–µ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (—Å—Ç–∏–ø–µ–Ω–¥–∏–π, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –¥—Ä—É–≥–∏—Ö –≤—ã–ø–ª–∞—Ç) –ø—Ä–æ—à—É –í–∞—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –ù–°–ü–ö ¬´–ú–ò–†¬ª –≤ —Ä–∞–º–∫–∞—Ö –∑–∞—Ä–ø–ª–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å –±–∞–Ω–∫–æ–º ",g("vtb")," –ë–∞–Ω–∫ –í–¢–ë (–ü–ê–û)"]}),i&&t.jsxs("div",{className:"additional-request",children:["–¢–∞–∫–∂–µ –ø—Ä–æ—à—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –ù–°–ü–ö ¬´–ú–ò–†¬ª –±–∞–Ω–∫–∞ ",g(i)," ",k(i)]}),t.jsxs("div",{className:"consent-text",children:["–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ –º–Ω–æ—é –ø—Ä–∏ –ø—Ä–∏–µ–º–µ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ü–æ–ª–∏—Ç–µ—Ö —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏—Ö –ø–µ—Ä–µ–¥–∞—á—É –≤ –±–∞–Ω–∫ –ë–∞–Ω–∫ –í–¢–ë (–ü–ê–û)",i?` –∏ ${g(i)} ${k(i)}`:""," ","–≤ —Ü–µ–ª—è—Ö –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã."]})]}),t.jsxs(ae,{children:[t.jsx(w,{size:5,bottomGap:"12px",children:"–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–Ω–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):"}),t.jsx(ne,{children:y.filter(s=>s.id!=="vtb").map(s=>t.jsxs(se,{selected:i===s.id,onClick:()=>O(s.id),children:[t.jsx("div",{className:"bank-icon",children:g(s.id)}),t.jsx("div",{className:"bank-name",children:s.name})]},s.id))})]}),t.jsx(ie,{children:t.jsx(F,{onClick:E,text:"üìÑ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–ª–µ–Ω–∏–µ",background:"var(--reallyBlue)",textColor:"white",loading:a,isActive:!0,notActiveClickMessage:""})}),e&&t.jsx(j,{type:"info",title:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",children:"–ü–æ–¥–∞—á–∞ –Ω–æ–≤–æ–≥–æ –∑–∞—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ."})]}),!N&&!e&&t.jsx(j,{type:"failure",title:"–§–æ—Ä–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞",children:"–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–ª–µ–Ω–∏–π –Ω–∞ –≤—ã–ø—É—Å–∫ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–æ 1 –æ–∫—Ç—è–±—Ä—è)."})]})})},ue=()=>t.jsx(re,{});export{ue as default};
