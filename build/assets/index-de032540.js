import{r as e,j as r}from"./vendor-04d91f24.js";import{bw as L,eb as p,ee as U,bA as G,t as O,T as W,ef as $,i as z,d2 as H,cZ as I,bC as t}from"./index-60431b6d.js";import{C as K}from"./error-76bcf3e6.js";const V=()=>({title:"Свидетельство о рождении",data:[],documents:{files:[],fieldName:"birthCertificate",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),Y=()=>({title:"Согласие на обработку персональных данных членов семьи",data:[],documents:{files:[],fieldName:"consentToProcessingPersonalData",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),Z=()=>({title:"Свидетельство о регистрации брака",data:[],documents:{files:[],fieldName:"marriageRegistrationCertificate",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),J=()=>({title:"Регистрация заявителя",data:[],documents:{files:[],fieldName:"registrationApplicant",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),Q=()=>({title:"Регистрация членов семьи",data:[],documents:{files:[],fieldName:"registrationFamilyMembers",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),X=[{id:"wife",title:"Жена"},{id:"husband",title:"Муж"},{id:"son",title:"Сын"},{id:"daughter",title:"Дочь"}],ee=()=>({title:"Состав семьи",hint:"Необходимо указать актуальную информацию о членах семьи",data:[],default:[[{fieldName:"relation",title:"Степень родства",value:null,type:"select",items:X,required:!0,width:"100%"},{fieldName:"fio",title:"ФИО",value:"",required:!0,width:"40%"},{fieldName:"bdate",title:"Дата рождения",value:"",type:"date",required:!0,width:"30%"}]],addNew:!0}),te=s=>{const{surname:o,name:a,patronymic:n,group:l,email:i,phone:d}=s;return{title:"Контактная информация",data:[{title:"ФИО",fieldName:"fio",value:o+" "+a+" "+n,editable:!1},{title:"Учебная группа",fieldName:"group",type:"tel",value:l,editable:!1},{title:"Электронная почта",fieldName:"email",type:"email",value:i,editable:!0,required:!0},{title:"Телефон",fieldName:"phone",type:"tel",value:d,editable:!0,required:!0}],links:[{title:"Согласие на обработку моих персональных данных",link:"https://e.mospolytech.ru/old/storage/files/Form_17_PD_2022.DOC",type:"document"},{title:"Согласие на обработку персональных данных членов моей семьи",link:"https://e.mospolytech.ru/old/storage/files/PD_agreement_minor.docx",type:"document"}],optionalCheckbox:{title:"Я подтверждаю, что никто из членов семьи не имеет прописки в пределах трассы А-107",value:!1,fieldName:"isCorrectRegistration",editable:!0}}},se=()=>{var s,o;const[a,n]=e.useState(null),{data:{dataUserApplication:l}}=L.useApplications(),[i,d]=e.useState(!1),[R,k]=e.useState(!1),[u,D]=e.useState(null),[A,P]=e.useState(null),S=i!=null?i:!1,[g,q]=e.useState(p.kvdCert),[F,M]=e.useState(p.fluorographyCert),[C,_]=e.useState(p.vichRwCert),[y,j]=e.useState(p.graftCert),[h,v]=e.useState(null),[m,x]=e.useState(null),[c,w]=e.useState(null),[f,T]=e.useState(null),[b,N]=e.useState(null),B=!!a&&!!u&&!!A&&!!h&&!!m&&!!c&&!!f&&!!b;if(e.useEffect(()=>{l&&(n(te(l)),D(ee()),P(U()),v(V()),x(Y()),w(Z()),T(J()),N(Q()))},[l]),!B)return null;if(new Date<new Date(2024,8,15))return r.jsx(K,{});const E=[[{dataForm:a,setDataForm:n}],[{dataForm:u,setDataForm:D}],[{dataForm:g,setDataForm:q}],[{dataForm:F,setDataForm:M}],[{dataForm:C,setDataForm:_}],[{dataForm:y,setDataForm:j}],[{dataForm:h,setDataForm:v},{dataForm:m,setDataForm:x},{dataForm:c,setDataForm:w},{dataForm:f,setDataForm:T},{dataForm:b,setDataForm:N}]];return r.jsx(G,{isDone:S,children:r.jsxs(O,{children:[r.jsx(W,{size:4,align:"left",children:"Предоставление права проживания в семейной комнате"}),r.jsx($,{stagesConfig:E}),r.jsx(z,{text:"Отправить",action:()=>H(I.USG_GETHOSTEL_FAMILY,[a,u,g,F,C,y,h,m,c,f],k,d),isLoading:R,completed:i,setCompleted:d,repeatable:!1,buttonSuccessText:"Отправлено",isDone:S,isActive:((s=(o=a.optionalCheckbox)===null||o===void 0?void 0:o.value)!==null&&s!==void 0?s:!0)&&t(a)&&t(u)&&t(g)&&t(F)&&t(C)&&t(y)&&t(m)&&t(c)&&t(f)&&t(b),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{se as default};
