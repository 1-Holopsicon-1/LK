var K=Object.defineProperty,Q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var w=(e,t,i)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,F=(e,t)=>{for(var i in t||(t={}))E.call(t,i)&&w(e,i,t[i]);if(V)for(var i of V(t))I.call(t,i)&&w(e,i,t[i]);return e},R=(e,t)=>Q(e,U(t));var B=(e,t)=>{var i={};for(var r in e)E.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&V)for(var r of V(e))t.indexOf(r)<0&&I.call(e,r)&&(i[r]=e[r]);return i};var G=(e,t,i)=>new Promise((r,n)=>{var u=l=>{try{p(i.next(l))}catch(h){n(h)}},c=l=>{try{p(i.throw(l))}catch(h){n(h)}},p=l=>l.done?r(l.value):Promise.resolve(l.value).then(u,c);p((i=i.apply(e,t)).next())});import{p as N,h as X,k as Y,N as ee,x as f,i as d,r as te,j as s}from"./vendor-8a1e4858.js";import{dp as _,e1 as M,e8 as ie,e2 as se,o as re,cZ as ae,n as k,bA as le,t as oe,g as P,i as ne,I as v,w as O,e9 as ue,ea as ce,v as de,f as pe,T as me,x as fe}from"./index-cb444b47.js";import{l as ve}from"./get-teacher-subdivisions-26155797.js";import{T as he}from"./consts-efab0afd.js";import{c as ge}from"./create-checkbox-field-d0ba0451.js";const L=[{id:1,title:"1"},{id:2,title:"2"},{id:3,title:"3"},{id:4,title:"4"},{id:5,title:"5"},{id:6,title:"6"},{id:7,title:"7"},{id:8,title:"8"},{id:9,title:"9"}],xe=[{id:"scholarship",title:"Справка по стипендии"},{id:"7month",title:"Запрос для субсидии по форме #2 за 7 месяцев"},{id:"13month",title:"Запрос для субсидии по форме #2 за 13 месяцев"}],a=N({name:"pageMounted",sid:"-5839b3"}),W=N({name:"createApplication",sid:"-bgu21y"}),g=_({reset:a}),x=_({reset:a}),j=_({reset:a}),b=_({reset:a}),y=M({reset:a}),m=ie({reset:a}),T=M({defaultValue:L[0],reset:a}),$=M({reset:a}),D=M({reset:a}),A=_({reset:a}),q=se({reset:a}),z=X("",{name:"$errorMessage",sid:"m76u4t"}),S=ge({reset:a}),H=y.value.map(e=>(e==null?void 0:e.id)==="7month"||(e==null?void 0:e.id)==="13month"),C=Y({sid:"-jtf9gg",fn:()=>ee({handler:i=>G(void 0,null,function*(){var r=i,{docs:e}=r,t=B(r,["docs"]);return re.postApplicationFx({formId:ae.STUD_ACCOUNTING,args:F(F({},t),Object.fromEntries(e.map((n,u)=>[`docs[${u}]`,n])))})})}),name:"sendForm",method:"createMutation"}),je=C.$pending;f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{surname:t,name:i,patronymic:r}=e;return t+" "+i+" "+r},target:g.setValue}],or:{sid:"-x7i1xe"}});f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{group:t}=e;return t},target:x.setValue}],or:{sid:"-wmlvdo"}});f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{email:t}=e;return t},target:b.setValue}],or:{sid:"-vr9lk3"}});f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{phone:t}=e;return t},target:j.setValue}],or:{sid:"-v7h073"}});f({and:[{clock:[g.value,x.value,j.value,b.value,y.value,m.startDate,m.endDate,T.value,$.value,D.value,A.value,q.value],source:{fio:g.value,group:x.value,tel:j.value,email:b.value,applicationType:y.value,periodStartDate:m.startDate,periodEndDate:m.endDate,copies:T.value,methodObtaining:$.value,mfc:D.value,files:q.value,isFilesRequired:H},fn:({fio:e,group:t,tel:i,email:r,applicationType:n,periodStartDate:u,periodEndDate:c,copies:p,methodObtaining:l,mfc:h,files:Z,isFilesRequired:J})=>e?t?i?r?n?!u||!c?"Выберите период справки":p?l?(l==null?void 0:l.id)===1&&!h?"Выберите место получения справки":J&&Z.length===0?"Приложите файл":"":"Выберите способ получения справки":"Выберите кол-во копий справки":"Выберите тип справки":"Введите email":"Введите телефон":"Для заполнения формы необходимо указать учебную группу. Обновите страницу или обратитесь к администратору":"Для заполнения формы необходимо указать ФИО. Обновите страницу или обратитесь к администратору",target:z}],or:{sid:"-uc4qdi"}});f({and:[{clock:W,source:{fio:g.value,group:x.value,tel:j.value,email:b.value,application_type:y.value,date_from:m.startDate,date_to:m.endDate,number_copies:T.value,method_obtaining:$.value,"structural-subdivision":D.value,commentary:A.value,docs:q.value},fn:e=>{var t,i,r,n,u,c,p,l;return R(F({},e),{application_type:(t=(i=e.application_type)===null||i===void 0?void 0:i.title)!==null&&t!==void 0?t:"",method_obtaining:(r=(n=e.method_obtaining)===null||n===void 0?void 0:n.title)!==null&&r!==void 0?r:"","structural-subdivision":(u=(c=e["structural-subdivision"])===null||c===void 0?void 0:c.title)!==null&&u!==void 0?u:"",number_copies:(p=(l=e.number_copies)===null||l===void 0?void 0:l.title)!==null&&p!==void 0?p:"1"})},target:C.start}],or:{sid:"-hyrdr0"}});f({and:[{clock:C.finished.success,target:S.setValue.prepend(()=>!0)}],or:{sid:"-gmdhj8"}});const o={fio:g,group:x,tel:j,email:b,applicationType:y,period:m,copies:T,methodObtaining:$,mfc:D,commentary:A,files:q},Ee=()=>{const[e,t,i,r,n,u]=d([W,z,je,S.value,S.setValue,a]),c=r!=null?r:!1;return te.useEffect(()=>u(),[]),s.jsx(le,{isDone:c,children:s.jsxs(oe,{noHeader:!0,children:[s.jsx(P,{title:"",icon:null,type:"failure",children:"Срок изготовления справки - 3 рабочих дня, не считая дня подачи заявления"}),s.jsx(be,{}),s.jsx(ye,{}),s.jsx(Ve,{}),s.jsx(_e,{}),s.jsx(Fe,{}),s.jsx(Te,{}),s.jsx($e,{}),s.jsx(De,{}),s.jsx(qe,{}),s.jsx(Me,{}),s.jsx(ne,{text:c?"Отправлено":"Отправить",action:e,isLoading:i,completed:r,setCompleted:n,repeatable:!1,buttonSuccessText:"Отправлено",isDone:c,isActive:!t,popUpFailureMessage:t,popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};function be(){const{value:e,setValue:t}=d(o.fio);return s.jsx(v,{title:"ФИО",placeholder:"ФИО",value:e,setValue:t,isActive:!1,required:!0})}function ye(){const{value:e,setValue:t}=d(o.group);return s.jsx(v,{title:"Учебная группа",placeholder:"Учебная группа",value:e,setValue:t,isActive:!1,required:!0})}function _e(){const{value:e,setValue:t}=d(o.email);return s.jsx(v,{title:"Электронная почта",placeholder:"test@test.com",value:e,setValue:t,type:"email",required:!0})}function Ve(){const{value:e,setValue:t}=d(o.tel);return s.jsx(v,{title:"Телефон",placeholder:"Телефон",value:e,setValue:t,type:"tel",mask:!0,required:!0})}function Fe(){const[e,t]=d([o.applicationType.value,o.applicationType.setValue]);return s.jsx(O,{title:"Тип справки",items:xe,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Тип справки"})}function Te(){const{startDate:e,setStartDate:t,endDate:i,setEndDate:r}=d(o.period);return s.jsxs(ue,{columnGap:"0.5rem",columns:"1fr 1fr",rows:"1fr",children:[s.jsx(v,{title:"Период c",value:e,setValue:t,type:"month",required:!0,width:"100%"}),s.jsx(v,{title:"по",value:i,setValue:r,type:"month",required:!0,width:"100%",minValue:e})]})}function $e(){const[e,t]=d([o.copies.value,o.copies.setValue]);return s.jsx(O,{title:"Количество копий",items:L,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Количество копий"})}function De(){const[e,t,i,r]=d([o.methodObtaining.value,o.methodObtaining.setValue,o.mfc.value,o.mfc.setValue]);return s.jsxs(s.Fragment,{children:[s.jsx(O,{title:"Способ получения справки",items:he,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Способ получения справки"}),(e==null?void 0:e.id)===1&&s.jsx(ce,{buttons:ve,title:"Выберите отделение МФЦ, где желаете получить готовый документ",required:!0,current:i,setCurrent:r})]})}function qe(){const{value:e,setValue:t}=d(o.commentary);return s.jsx(de,{title:"Дополнительная информация",placeholder:"Дополнительная информация",value:e,setValue:t})}function Me(){const[e,t,i]=d([o.files.value,o.files.setValue,H]);return s.jsxs(pe,{d:"column",gap:"0.5rem",children:[i&&s.jsx(P,{type:"alert",title:"Прикрепите скан запроса"}),s.jsx(me,{size:5,align:"left",required:i,children:"Приложите файлы"}),s.jsx(fe,{files:e,setFiles:t,isActive:!0,maxFiles:4})]})}export{Ee as default};
