import{s as j,j as e,aK as y,cI as g,i as v,cH as b,r as k,q as _,az as w}from"./vendor-8a1e4858.js";import{f as t,Y as D,T as o,db as E,U as T,_ as C,e8 as d,r as S,a5 as z,W as M,P,K as i,b5 as x,ea as F,eb as I}from"./index-04c2f683.js";import{r as q}from"./index-531e7380.js";const N=({children:n,title:s})=>e.jsxs(R,{d:"column",w:"fit-content",gap:"0.5rem",jc:"flex-start",p:"0.5rem",children:[e.jsx(G,{children:e.jsx(o,{size:5,align:"left",children:s!=null?s:"Документы"})}),n]}),R=j(t).withConfig({componentId:"sc-1pt65bl-0"})(["position:relative;border:1px solid ",";border-radius:0.5rem;"],D.grey.transparent3),G=j.div.withConfig({componentId:"sc-1pt65bl-1"})(["position:absolute;top:-0.6lh;left:0.5rem;background:var(--block);@media (max-width:766px){background:var(--theme);}"]),u=({link:n,title:s})=>e.jsx("a",{href:n,style:{width:290,zIndex:1},children:e.jsx(E,{children:e.jsxs("div",{className:"file-body",children:[e.jsx("div",{className:"image-container",children:e.jsx(y,{})}),e.jsx("div",{className:"name-and-size",children:e.jsx("b",{className:"file-name",children:s})})]})})}),L=()=>{const{close:n}=T(),{id:s}=g(),{isTablet:m}=C(),[p,c]=v([d.pageMounted,d.certificatesLoading]),r=b(d.certificates,l=>l==null?void 0:l.find(a=>a.id===s));if(k.useEffect(()=>{p()},[s]),c)return e.jsx(t,{h:"100%",d:"column",ai:"center",jc:"center",children:e.jsx(S,{})});if(!r)return e.jsx(t,{h:"100%",d:"column",ai:"center",jc:"center",children:e.jsx(z,{text:"Справка не найдена"})});const h=()=>[...f,{field:"0",title:"",render:(l,a)=>a.requestDate?e.jsx(t,{d:"column",ai:"flex-start",children:e.jsxs(F,{columns:"1fr 1fr",rows:"1fr 1fr",columnGap:"0.5rem",children:[e.jsx("p",{children:"Новый плательщик:"}),e.jsx("p",{children:a.requestFIO}),e.jsx("p",{children:"Дата заявления:"}),e.jsx("p",{children:_(new Date(a.requestDate),"dd MMMM yyyy, HH:mm",{locale:q})})]})}):null},{field:"1",title:"",render:(l,a)=>e.jsx(w,{to:`${I}/${s}/${a.paymentGuid}`,onClick:n,children:"Изменить плательщика"})}];return e.jsx(M,{data:!0,load:()=>{},error:null,children:e.jsx(P,{children:e.jsxs(t,{d:"column",gap:"2rem",ai:"flex-start",children:[e.jsxs(N,{children:[e.jsx(u,{link:r.cert_file_stamp,title:"Печатная форма Справки в ФНС"}),e.jsx(u,{link:r.cert_file_sign,title:"Электронная подпись"})]}),e.jsxs(t,{d:"column",ai:"flex-start",children:[e.jsx(i,{keyStr:"Дата справки",value:r.cert_date}),e.jsx(i,{keyStr:"Год",value:r.year}),e.jsx(i,{keyStr:"Очная форма",value:r.is_full_time?"Да":"Нет"}),e.jsx(i,{keyStr:"Плательщик",value:r.payer}),e.jsx(i,{keyStr:"Номер справки",value:r.number}),e.jsx(i,{keyStr:"Номер корректировки",value:r.correction}),e.jsx(i,{keyStr:"Подписант",value:r.signatory})]}),e.jsxs(t,{gap:"2rem",d:m?"column":"row",ai:"flex-start",children:[e.jsxs(t,{d:"column",gap:"0.5rem",jc:"space-between",h:"100%",style:{overflow:"hidden"},children:[e.jsx(o,{size:4,align:"left",bottomGap:m?"0":"1lh",children:"Список договоров к справке"}),e.jsx(x,{loading:c,innerPadding:"0.33rem",fontSize:"0.75rem",columns:[{title:"Номер договора",field:"contractNumber"},{title:"Дата договора",field:"contractDate"}],data:r.contracts})]}),e.jsxs(t,{d:"column",gap:"0.5rem",style:{overflow:"hidden"},children:[e.jsx(o,{size:4,align:"left",children:"Список оплат с редакциями к договору к справке (договор, доп.соглашение)"}),e.jsx(x,{loading:c,innerPadding:"0.33rem",fontSize:"0.75rem",columns:f,columnsExtended:h(),data:r.payments})]})]})]})})})},f=[{title:"Дата оплаты",field:"paymentDate"},{title:"Сумма оплаты",field:"summ"},{title:"Тип редакции",field:"versionType"},{title:"Дата редакции",field:"versionDate"},{title:"Плательщик",field:"payer",render:(n,s)=>s.requestDate?"Отправлено заявление на изменение":n||"-"}];export{L as default};
