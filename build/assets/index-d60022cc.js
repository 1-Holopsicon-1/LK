import{r as R,s as m,j as e,R as U,L as _,ax as $,c0 as z,aQ as Q,T as W,c4 as G,c5 as w,c6 as I,bu as K}from"./vendor-f4aa581a.js";import{Q as L,O as Y,Y as N,a8 as C,_ as F,bf as D,bP as q,bQ as V,bR as Z,bS as T,bT as X,bj as J,bU as ee,bV as te,bs as se,a0 as ie,bW as ae,bX as ne,v as b,U as u,bY as v,bZ as oe,b_ as re,Z as le,ao as k,N as S,T as O,b$ as ce,c0 as de,c1 as he,ak as E,c2 as xe,c3 as pe,aG as ge,a3 as je,W as ue,c4 as fe}from"./index-2cf64e21.js";import{T as A,a as me,A as ye}from"./index-0a0c5d07.js";const be=t=>t==="Male"?"Мужской":"Женский",P=R.memo(ke),ve=m.div`
    width: 100%;
`;function ke({user:t}){const{status:s,sex:r,birthday:i,code:l,faculty:a,course:c,group:d,specialty:n,specialization:g,degreeLength:f,educationForm:y,finance:h,degreeLevel:B,enterYear:M,subdivisions:x,authorIDs:p}=t,H=[{key:"Статус",value:s},{key:"Пол",value:be(r)},{key:"Дата рождения",value:i},{key:"Код студента",value:l},{key:"Факультет",value:a},{key:"Курс",value:c},{key:"Группа",value:d},{key:"Направление",value:n},{key:"Специализация",value:g},{key:"Срок обучения",value:f},{key:"Форма обучения",value:y},{key:"Вид финансирования",value:h},{key:"Сведения о трудоустройстве",value:!!(x!=null&&x.length)&&(x==null?void 0:x.map((o,j)=>e.jsxs(U.Fragment,{children:[e.jsxs("div",{style:{width:"100%",marginTop:"5px",lineHeight:"1.8rem"},children:[o.subdivision&&e.jsxs("div",{children:["Подразделение: ",o.subdivision]}),o.post&&e.jsxs("div",{children:["Должность: ",o.post]}),o.wage&&o.jobType&&e.jsxs("div",{children:["Ставка: ",o.wage,"; ",o.jobType]})]}),j<x.length-1&&e.jsx(L,{margin:"16px 0",width:"100%"})]},j)))},{key:"Уровень образования",value:B},{key:"Год набора",value:M},{key:"Авторские идентификаторы",value:!!p&&e.jsxs("div",{style:{width:"100%",marginTop:"5px",lineHeight:"1.8rem"},children:[p.wosReasearcher&&e.jsxs("div",{children:["Web of Science Researcher ID: ",p.wosReasearcher]}),p.scopus&&e.jsxs("div",{children:["Scopus Author ID: ",p.scopus]}),p.eLibrary&&e.jsxs("div",{children:["eLibrary Author ID: ",p.eLibrary]})]})}];return e.jsx(ve,{children:H.map(({key:o,value:j})=>!!j&&e.jsx(Y,{keyStr:o,value:j,direction:typeof j=="object"?"vertical":"horizontal"},o))})}const _e=m.div`
    display: flex;
    flex-direction: column;
    gap: 16px;
`,we=m.div``,Ie=({orders:t})=>e.jsxs(_e,{children:[!(t!=null&&t.length)&&e.jsx(N,{children:"Нет приказов"}),t==null?void 0:t.map(s=>e.jsx(we,{children:s},s))]}),Te=R.memo(Ie),Se=({pages:t,currentPage:s})=>{const{data:{user:r}}=C.useUser();return r?e.jsx(F,{children:e.jsx(D,{height:"100%",noAppearanceInMobile:!0,maxWidth:"750px",children:t[s]})}):null},Oe=({pages:t,user:s,currentPage:r,setCurrentPage:i})=>{const{fullName:l,avatar:a,user_status:c,degreeLevel:d}=s,n=c==="stud"?"Студент":"Сотрудник",g=()=>{le.evokeConfirm({message:"Вы точно хотите выйти из аккаунта?",onConfirm:k.logout})};return e.jsxs(q,{children:[e.jsx(V,{fullName:l,width:"calc(100% + 32px)",height:"210px",baseScale:1.5}),e.jsxs(Z,{children:[e.jsxs(T,{maxWidth:"530px",height:"180px",orientation:"vertical",children:[e.jsx(X,{children:e.jsx(J,{name:l,avatar:a,width:"110px",height:"110px",marginRight:"0",border:!0,avatarModal:!0})}),e.jsxs(ee,{children:[e.jsxs(te,{children:[e.jsx("b",{children:l}),e.jsx(N,{maxWidth:"100%",width:"100%",align:"center",fontSize:"0.9rem",children:e.jsx(se,{words:[n,d??""]})})]}),e.jsx(ie,{sliderWidth:"100%",pages:t,currentPage:r,setCurrentPage:i,appearance:!1})]})]}),e.jsx(T,{maxWidth:"250px",height:"fit-content",children:e.jsxs(ae,{children:[e.jsx(_,{to:ne,children:e.jsx(b,{background:u.white.transparent2,icon:e.jsx(v,{width:"30px",background:u.grey.main,children:e.jsx($,{})}),width:"100%",height:"73px",text:"Настройки",direction:"vertical",shrinkTextInMobile:!0})}),e.jsx(oe,{type:"v-button"}),e.jsx(_,{to:re,children:e.jsx(b,{background:u.white.transparent2,icon:e.jsx(v,{width:"30px",background:u.purple.main,children:e.jsx(z,{})}),text:"Изменить",width:"100%",height:"73px",direction:"vertical",shrinkTextInMobile:!0})}),e.jsx(b,{background:u.white.transparent2,icon:e.jsx(v,{width:"30px",background:u.red.main,children:e.jsx(Q,{})}),text:"Выйти",height:"73px",onClick:g,width:"calc(50% - 5px)",direction:"vertical",shrinkTextInMobile:!0})]})})]})]})},Ee=({user:t})=>{var r;const s=W();return e.jsx(S,{d:"column",children:(r=t.subdivisions)==null?void 0:r.map((i,l)=>e.jsxs(S,{d:"column",gap:"8px",ai:"flex-start",children:[e.jsx(O,{align:"left",size:3,children:i.subdivision}),e.jsx(O,{align:"left",size:4,children:i.post}),e.jsx(A,{title:"Корпоративная электронная почта",icon:e.jsx(G,{}),description:t==null?void 0:t.email_staff,rightIcon:e.jsx(w,{}),onClick:()=>s.push(ce)}),e.jsx(A,{title:"Внутренний телефон",icon:e.jsx(I,{}),description:i.phone_inner,rightIcon:e.jsx(w,{}),onClick:()=>s.push(de)}),e.jsx(me,{id:"phone_staff",title:"Служебный мобильный телефон",type:"tel",value:t==null?void 0:t.phone_staff,icon:e.jsx(I,{}),description:t==null?void 0:t.phone_staff,objectAction:a=>{he(a),Object.entries(a).forEach(([c,d])=>{k.update({key:c,value:d})})},settingsName:E["settings-personal"],subfields:[{id:"allow_mobphone_in",title:"Показывать мобильный телефон внутри Личного кабинета",type:"toggle",value:t==null?void 0:t.allow_mobphone_in},{id:"allow_mobphone_out",title:"Показывать мобильный телефон на сайте",type:"toggle",value:t==null?void 0:t.allow_mobphone_out}]}),e.jsx(ye,{id:"guid_staff",settingsName:E["settings-personal"],title:"Адрес места работы",type:"address",value:[{guid_staff:i.guid_staff,post:i.post||"",address:i.address||"",room:i.room||""}],icon:e.jsx(K,{}),description:i.address+", "+i.room,objectAction:a=>{var c;if(xe(a),t!=null&&t.subdivisions){const d=(c=t==null?void 0:t.subdivisions)==null?void 0:c.map(n=>n.guid_staff===a.guid_staff?{...n,...a}:n);k.update({key:"subdivisions",value:d})}},subfields:[{id:"address",title:"Адрес",type:"select"},{id:"room",title:"Номер кабинета",type:"text"}]}),l<t.subdivisions.length-1&&e.jsx(L,{margin:"16px 0",width:"100%"})]},l))})},Ae=m.div`
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    align-items: center;
`,Le=()=>{const{data:{user:t},error:s}=C.useUser(),r=W(),l=pe().get("page"),{allRoutes:a}=ge.useMenu();if(!t||!a)return null;if(s)return e.jsx(je,{text:s});const c=[{title:"Учетная карточка",content:e.jsx(P,{user:t}),id:"userCard"},{title:"Приказы",content:e.jsx(Te,{orders:t.orders}),id:"orders"}],d=[{title:"Учетная карточка",content:e.jsx(P,{user:t}),id:"userCard"},{title:"Контактные данные",content:e.jsx(Ee,{user:t}),id:"contactDetails"}],n=t.user_status==="stud"?c:d,g=n.findIndex(h=>h.id===l)||0,f=g===-1?0:g,y=h=>{r.push({search:`?page=${n[h].id}`})};return e.jsx(ue,{load:function(){},loading:!1,data:[],error:null,children:e.jsxs(Ae,{children:[e.jsx(Oe,{user:t,currentPage:f,setCurrentPage:y,pages:n}),e.jsx(F,{children:e.jsx(D,{height:"100%",maxWidth:"750px",children:e.jsx(fe,{})})}),e.jsx(Se,{currentPage:f,pages:n.map(h=>h.content)})]})})};export{Le as default};
