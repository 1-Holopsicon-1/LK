var ee=Object.defineProperty,te=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var B=(e,t,i)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,D=(e,t)=>{for(var i in t||(t={}))G.call(t,i)&&B(e,i,t[i]);if(F)for(var i of F(t))N.call(t,i)&&B(e,i,t[i]);return e},z=(e,t)=>te(e,ie(t));var P=(e,t)=>{var i={};for(var a in e)G.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&F)for(var a of F(e))t.indexOf(a)<0&&N.call(e,a)&&(i[a]=e[a]);return i};var L=(e,t,i)=>new Promise((a,o)=>{var u=l=>{try{p(i.next(l))}catch(h){o(h)}},c=l=>{try{p(i.throw(l))}catch(h){o(h)}},p=l=>l.done?a(l.value):Promise.resolve(l.value).then(u,c);p((i=i.apply(e,t)).next())});import{p as H,h as se,k as ae,N as re,x as f,i as d,r as le,j as s}from"./vendor-8a1e4858.js";import{dp as V,e1 as M,e8 as ne,e2 as oe,o as ue,cZ as ce,n as S,bA as de,t as pe,g as Y,i as me,I as v,w as O,e9 as fe,ea as ve,v as he,f as xe,T as ge,x as je}from"./index-8143fc65.js";import{l as be}from"./get-teacher-subdivisions-26155797.js";import{T as ye}from"./consts-efab0afd.js";import{c as _e}from"./create-checkbox-field-d0ba0451.js";const W=new Date,k=new Date(W.getFullYear(),W.getMonth()).toISOString().slice(0,7),Z=[{id:1,title:"1"},{id:2,title:"2"},{id:3,title:"3"},{id:4,title:"4"},{id:5,title:"5"},{id:6,title:"6"},{id:7,title:"7"},{id:8,title:"8"},{id:9,title:"9"}],Ve=[{id:"scholarship",title:"Справка по стипендии"},{id:"7month",title:"Запрос для субсидии по форме #2 за 7 месяцев"},{id:"13month",title:"Запрос для субсидии по форме #2 за 13 месяцев"}],r=H({name:"pageMounted",sid:"5ny1re"}),J=H({name:"createApplication",sid:"-ksqzh"}),x=V({reset:r}),g=V({reset:r}),j=V({reset:r}),b=V({reset:r}),y=M({reset:r}),m=ne({reset:r}),q=M({defaultValue:Z[0],reset:r}),_=M({reset:r}),T=M({reset:[r,_.value]}),A=V({reset:r}),$=oe({reset:r}),K=se("",{name:"$errorMessage",sid:"n5a2x7"}),w=_e({reset:r}),Q=y.value.map(e=>(e==null?void 0:e.id)==="7month"||(e==null?void 0:e.id)==="13month"),C=ae({sid:"-8xdydz",fn:()=>re({handler:i=>L(void 0,null,function*(){var a=i,{docs:e}=a,t=P(a,["docs"]);return ue.postApplicationFx({formId:ce.STUD_ACCOUNTING,args:D(D({},t),Object.fromEntries(e.map((o,u)=>[`docs[${u}]`,o])))})})}),name:"sendForm",method:"createMutation"}),Fe=C.$pending;f({and:[{clock:r,source:S.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{surname:t,name:i,patronymic:a}=e;return t+" "+i+" "+a},target:x.setValue}],or:{sid:"-x6egqo"}});f({and:[{clock:r,source:S.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{group:t}=e;return t},target:g.setValue}],or:{sid:"-w9ylqd"}});f({and:[{clock:r,source:S.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{email:t}=e;return t},target:b.setValue}],or:{sid:"-vq60dd"}});f({and:[{clock:r,source:S.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{phone:t}=e;return t},target:j.setValue}],or:{sid:"-uutqjs"}});f({and:[{clock:[x.value,g.value,j.value,b.value,y.value,m.startDate,m.endDate,q.value,_.value,T.value,A.value,$.value],source:{fio:x.value,group:g.value,tel:j.value,email:b.value,applicationType:y.value,periodStartDate:m.startDate,periodEndDate:m.endDate,copies:q.value,methodObtaining:_.value,mfc:T.value,files:$.value,isFilesRequired:Q},fn:({fio:e,group:t,tel:i,email:a,applicationType:o,periodStartDate:u,periodEndDate:c,copies:p,methodObtaining:l,mfc:h,files:U,isFilesRequired:X})=>{const I=new Date(u),E=new Date(c),R=new Date(k);return e?t?i?a?o?!u||!c?"Выберите период справки":p?l?(l==null?void 0:l.id)===1&&!h?"Выберите место получения справки":X&&U.length===0?"Приложите файл":I>R?"Дата начала  не может быть позднее текущей даты":E>R?"Дата окончания  не может быть позднее текущей даты":E<I?"Дата окончания справки не может быть раньше даты начала":"":"Выберите способ получения справки":"Выберите кол-во копий справки":"Выберите тип справки":"Введите email":"Введите телефон":"Для заполнения формы необходимо указать учебную группу. Обновите страницу или обратитесь к администратору":"Для заполнения формы необходимо указать ФИО. Обновите страницу или обратитесь к администратору"},target:K}],or:{sid:"-ub156s"}});f({and:[{clock:J,source:{fio:x.value,group:g.value,tel:j.value,email:b.value,application_type:y.value,date_from:m.startDate,date_to:m.endDate,number_copies:q.value,method_obtaining:_.value,"structural-subdivision":T.value,commentary:A.value,docs:$.value},fn:e=>{var t,i,a,o,u,c,p,l;return z(D({},e),{application_type:(t=(i=e.application_type)===null||i===void 0?void 0:i.title)!==null&&t!==void 0?t:"",method_obtaining:(a=(o=e.method_obtaining)===null||o===void 0?void 0:o.title)!==null&&a!==void 0?a:"","structural-subdivision":(u=(c=e["structural-subdivision"])===null||c===void 0?void 0:c.title)!==null&&u!==void 0?u:"",number_copies:(p=(l=e.number_copies)===null||l===void 0?void 0:l.title)!==null&&p!==void 0?p:"1"})},target:C.start}],or:{sid:"-hh5yrg"}});f({and:[{clock:C.finished.success,target:w.setValue.prepend(()=>!0)}],or:{sid:"-g4s2jo"}});const n={fio:x,group:g,tel:j,email:b,applicationType:y,period:m,copies:q,methodObtaining:_,mfc:T,commentary:A,files:$},Ne=()=>{const[e,t,i,a,o,u]=d([J,K,Fe,w.value,w.setValue,r]),c=a!=null?a:!1;return le.useEffect(()=>u(),[]),s.jsx(de,{isDone:c,children:s.jsxs(pe,{noHeader:!0,children:[s.jsx(Y,{title:"",icon:null,type:"failure",children:"Срок изготовления справки - 3 рабочих дня, не считая дня подачи заявления"}),s.jsx(De,{}),s.jsx(qe,{}),s.jsx($e,{}),s.jsx(Te,{}),s.jsx(Me,{}),s.jsx(Se,{}),s.jsx(ke,{}),s.jsx(we,{}),s.jsx(Oe,{}),s.jsx(Ae,{}),s.jsx(me,{text:c?"Отправлено":"Отправить",action:e,isLoading:i,completed:a,setCompleted:o,repeatable:!1,buttonSuccessText:"Отправлено",isDone:c,isActive:!t,popUpFailureMessage:t,popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};function De(){const{value:e,setValue:t}=d(n.fio);return s.jsx(v,{title:"ФИО",placeholder:"ФИО",value:e,setValue:t,isActive:!1,required:!0})}function qe(){const{value:e,setValue:t}=d(n.group);return s.jsx(v,{title:"Учебная группа",placeholder:"Учебная группа",value:e,setValue:t,isActive:!1,required:!0})}function Te(){const{value:e,setValue:t}=d(n.email);return s.jsx(v,{title:"Электронная почта",placeholder:"test@test.com",value:e,setValue:t,type:"email",required:!0})}function $e(){const{value:e,setValue:t}=d(n.tel);return s.jsx(v,{title:"Телефон",placeholder:"Телефон",value:e,setValue:t,type:"tel",mask:!0,required:!0})}function Me(){const[e,t]=d([n.applicationType.value,n.applicationType.setValue]);return s.jsx(O,{title:"Тип справки",items:Ve,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Тип справки"})}function Se(){const{startDate:e,setStartDate:t,endDate:i,setEndDate:a}=d(n.period);return s.jsxs(fe,{columnGap:"0.5rem",columns:"1fr 1fr",rows:"1fr",children:[s.jsx(v,{title:"Период c",value:e,setValue:t,type:"month",required:!0,width:"100%",maxValue:k}),s.jsx(v,{title:"по",value:i,setValue:a,type:"month",required:!0,width:"100%",minValue:e,maxValue:k})]})}function ke(){const[e,t]=d([n.copies.value,n.copies.setValue]);return s.jsx(O,{title:"Количество копий",items:Z,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Количество копий"})}function we(){const[e,t,i,a]=d([n.methodObtaining.value,n.methodObtaining.setValue,n.mfc.value,n.mfc.setValue]);return s.jsxs(s.Fragment,{children:[s.jsx(O,{title:"Способ получения справки",items:ye,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Способ получения справки"}),(e==null?void 0:e.id)===1&&s.jsx(ve,{buttons:be,title:"Выберите отделение МФЦ, где желаете получить готовый документ",required:!0,current:i,setCurrent:a})]})}function Oe(){const{value:e,setValue:t}=d(n.commentary);return s.jsx(he,{title:"Дополнительная информация",placeholder:"Дополнительная информация",value:e,setValue:t})}function Ae(){const[e,t,i]=d([n.files.value,n.files.setValue,Q]);return s.jsxs(xe,{d:"column",gap:"0.5rem",children:[i&&s.jsx(Y,{type:"alert",title:"Прикрепите скан запроса"}),s.jsx(ge,{size:5,align:"left",required:i,children:"Приложите файлы"}),s.jsx(je,{files:e,setFiles:t,isActive:!0,maxFiles:4})]})}export{Ne as default};
