import{r as s,bU as v,j as r}from"./vendor-4af360a6.js";import{av as b,a2 as y,ax as x,ar as N,F as S,I as h,S as k,d as g,N as j}from"./index-80328a9f.js";import{S as F}from"./send-hr-form-holiday-work-6010b5f8.js";const C=t=>{const e=t.find(a=>a.fieldName==="compensation");let i=null;return e!=null&&e.value&&(e==null?void 0:e.value).title==="Оплатить работу в выходной день в одинарном размере с предоставлением другого дня отдыха"&&(i="Compensation"),{compensation:i}},D=(t,e,i)=>{const{surname:a,name:l,patronymic:o}=t;return{title:"Заявление о привлечении к работе в выходной день",data:[{title:"ФИО",type:"simple-text",value:a+" "+l+" "+o,fieldName:"fio",visible:!0},{title:"Должность",type:"simple-text",fieldName:"post",value:e[i].jobTitle.toString(),visible:!0},{title:"Подразделение",type:"simple-text",value:e[i].subDivision.toString(),fieldName:"subDivision",visible:!0},{title:"Дата привлечения к работе",type:"date",value:null,fieldName:"holiday_work_date",editable:!0,mask:!0,required:!0,minValueInput:b(0)},{title:"Количество часов",type:"select",fieldName:"holiday_work_hours",value:null,editable:!0,required:!0,width:"100%",items:[{id:0,title:"1"},{id:1,title:"2"},{id:2,title:"3"},{id:3,title:"4"},{id:4,title:"5"},{id:5,title:"6"},{id:6,title:"7"},{id:7,title:"8"}]},{title:"Причина",value:"Служебная необходимость",fieldName:"reason",editable:!0,mask:!0,required:!0},{title:"Вид компенсации",type:"select",fieldName:"compensation",value:null,editable:!0,required:!0,width:"100%",items:[{id:0,title:"Оплатить работу в выходной день в двойном размере"},{id:1,title:"Оплатить работу в выходной день в одинарном размере с предоставлением другого дня отдыха"}]},{title:"Дата дополнительного дня отдыха",type:"date",value:"",fieldName:"extra_holiday_date",editable:!0,mask:!0,required:!1,specialType:"Compensation"},{title:"",type:"simple-text",value:e[i].jobGuid.toString(),fieldName:"jobGuid",visible:!1}]}},H=()=>{var m;const[t,e]=s.useState(null),{data:{dataUserApplication:i,dataWorkerApplication:a}}=y.useApplications(),{loading:l}=x.useBufferHolidayWork(),[o,d]=s.useState(!1),[p,c]=s.useState({}),u=o??!1,{id:f}=v(),n=+f;return s.useEffect(()=>{i&&a&&!l&&e(D(i,a,n))},[i,n,l]),s.useEffect(()=>{t&&i&&c(C(t.data))},[t]),r.jsx(N,{isDone:u,children:!!t&&!!e&&r.jsxs(S,{children:[r.jsx(h,{...t,collapsed:u,setData:e,specialFieldsNameConfig:p}),r.jsx(k,{text:"Отправить",action:()=>F(g.HOLIDAY_WORK,[t],d),isLoading:l,completed:o,setCompleted:d,repeatable:!1,buttonSuccessText:"Отправлено",isDone:u,isActive:j(t)&&(((m=t.optionalCheckbox)==null?void 0:m.value)??!0),alerts:!1})]})})};export{H as default};
