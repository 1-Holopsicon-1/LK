import{s as h,K as T,cO as k,j as t,n as C,r as d,cM as W}from"./vendor-08ab745b.js";import{l as q,P as v,m as _,n as b,A as K,o as Z,p as N,s as Q,e as X,q as L,r as Y,t as tt,u as et,v as it,w as st,x as V,h as nt,g as ot}from"./student-518215af.js";import{r as z,Z as j,q as x,x as y,p as A,a1 as lt,L as m,l as F,u as H,M as at,h as B,G as J,z as dt,a2 as rt,_ as ct,P as ut,a3 as pt,a0 as mt,a4 as ht,b as xt}from"./index-0892b83f.js";const gt=h(z).withConfig({componentId:"sc-1qi5h46-0"})(["flex:1;"]),ft=h.div.withConfig({componentId:"sc-1qi5h46-1"})(["display:flex;flex-direction:column;justify-content:center;gap:10px;"]),St=T({and:[j.peTeacher,q.pendingRemoveVisit,(e,i)=>[{title:"Дата",field:"date",type:"date",sort:!0},{title:"Преподаватель",field:"teacherFullName"},...e?.permissions?.length?[{title:"Действия",field:"actions",onClick:()=>null,render:(o,n)=>{const s=n,a=k(new Date(s.date),new Date)<-7,l=[v.AdminAccess,v.SuperUser].some(u=>e?.permissions?.includes(u));return s.teacherGuid===e?.id&&!a||l?t.jsx(x,{width:"100%",text:"Удалить",isActive:!i,onClick:()=>{_.removeVisit({id:s.id.toString()})}}):null}}]:[]]],or:{name:"$peStudentVisitsColumns",sid:"bwdu0h"}}),jt=()=>{const[e,i,o]=C([b.$selectedStudent,St,j.peTeacher]);return e?t.jsxs(ft,{children:[!!o?.permissions?.length&&t.jsx(K,{studentGuid:e.studentGuid}),t.jsx(gt,{columns:i,data:e.visitsHistory})]}):null};var c=(e=>(e.Activist="Activist",e.Competition="Competition",e.ExternalFitness="ExternalFitness",e.GTO="GTO",e.InternalTeam="InternalTeam",e.OnlineWork="OnlineWork",e.Science="Science",e))(c||{});const G=[{id:c.Activist,title:"Активист"},{id:c.Competition,title:"Соревнование"},{id:c.GTO,title:"ГТО"},{id:c.InternalTeam,title:"Сборная"},{id:c.OnlineWork,title:"Работа в LMS"},{id:c.Science,title:"Научная работа"}],Ct=T({and:[j.peTeacher,Z.pendingRemoveAdditionPoints,(e,i)=>[{title:"Дата",field:"date",type:"date",sort:!0},{title:"Тип работ",field:"type",render:(o,n)=>{const s=G.find(({id:a})=>a===o);return s?.id===c.Competition?n.comment:s?.title}},{title:"Количество баллов",field:"points"},{title:"Преподаватель",field:"teacherFullName"},{title:"Комментарий",field:"comment",priority:"five",render:(o,n)=>G.find(({id:a})=>a===n.workType)?.id!==c.Competition?n.comment:null},...e?.permissions?.length?[{title:"Действия",field:"actions",onClick:()=>null,render:(o,n)=>{const s=n,a=k(new Date(s.date),new Date)<-7,l=[v.AdminAccess,v.SuperUser].some(u=>e?.permissions?.includes(u));return s.teacherGuid===e?.id&&!a||l?t.jsx(x,{width:"100%",text:"Удалить",isActive:!i,onClick:()=>N.removeAdditionPoints({id:s.id.toString()})}):null}}]:[]]],or:{name:"$additionalPointsColumns",sid:"cv7zhj"}}),bt=h.div.withConfig({componentId:"sc-xw90or-0"})(["display:flex;flex-direction:column;justify-content:center;gap:10px;"]),vt=()=>{const[e,i]=C([b.$selectedStudent,Q.$competitions]),[o,n]=d.useState(null),[s,a]=d.useState(new Date().toISOString()),[l,u]=d.useState(null),[g,w]=d.useState("0"),[P,$]=d.useState(""),R=()=>{N.addAdditionPoints({comment:l?.id===c.Competition?o?.title??"":P,date:F(s,"numeric"),points:Number(g),studentGuid:e?.studentGuid,type:l?.id})};d.useEffect(()=>{X.load()},[]),d.useEffect(()=>{l?.id===c.Competition&&g==="0"&&w("5"),l?.id===c.InternalTeam&&g==="0"&&w("50")},[l?.id]);const D=new Date(s),I=D.getDay()!==0&&D.getDay()!==1,U=i.map(E=>({id:E,title:E}));return t.jsxs(bt,{children:[t.jsx(y,{width:"100%",size:"big",title:"Тип работ",items:G,selected:l,setSelected:u}),l?.id===c.Competition&&t.jsx(y,{width:"100%",size:"big",title:"Соревнование",items:U,selected:o,setSelected:n}),t.jsx(A,{alertMessage:I?"":"Не допустимая дата",size:"big",title:"Дата",setValue:a,value:s,type:"date"}),t.jsx(A,{width:"100%",size:"big",title:"Количество баллов",setValue:w,value:g,type:"number",stepSize:1,minValue:1}),l?.id!==c.Competition&&t.jsx(lt,{width:"100%",setValue:$,value:P,title:"Комментарий"}),t.jsx(x,{isActive:I,text:"Добавить",onClick:R,background:m.blue.main,textColor:m.white.main,width:"100%"})]})},wt=h.div.withConfig({componentId:"sc-19i0iom-0"})(["display:flex;flex-direction:column;height:100%;gap:10px;"]),Pt=h(z).withConfig({componentId:"sc-19i0iom-1"})(["flex:1;"]),At=()=>{const[e,i,o]=C([b.$selectedStudent,Ct,j.peTeacher]),{open:n}=H(),s=()=>{n(t.jsx(vt,{}),"Дополнительные баллы")};return e?t.jsxs(wt,{children:[!!o?.permissions?.length&&t.jsx(x,{text:"Добавить дополнительные баллы",onClick:s,background:m.blue.main,textColor:m.white.main}),t.jsx(Pt,{columns:i,data:e.pointsHistory})]}):null};var p=(e=>(e.FlexionAndExtensionOfArms="FlexionAndExtensionOfArms",e.JumpingRopeJumps="JumpingRopeJumps",e.Jumps="Jumps",e.PullUps="PullUps",e.ShuttleRun="ShuttleRun",e.Squats="Squats",e.Tilts="Tilts",e.TorsoLifts="TorsoLifts",e.Other="Other",e))(p||{});const M=[{id:p.FlexionAndExtensionOfArms,title:"Сгибание и разгибание рук"},{id:p.JumpingRopeJumps,title:"Прыжки со скакалкой"},{id:p.Jumps,title:"Прыжок в длину"},{id:p.PullUps,title:"Подтягивания(Вис)"},{id:p.ShuttleRun,title:"Челночный бег"},{id:p.Squats,title:"Приседания"},{id:p.Tilts,title:"Наклон"},{id:p.TorsoLifts,title:"Подъемы туловища"},{id:p.Other,title:"Другое"}],yt=h.div.withConfig({componentId:"sc-uipy8z-0"})(["display:flex;flex-direction:column;align-items:center;gap:10px;height:100%;"]),$t=()=>{const e=C(b.$selectedStudent),[i,o]=d.useState(new Date().toISOString()),[n,s]=d.useState(null),[a,l]=d.useState("0"),[u,g]=d.useState(""),w=()=>{L.addRegulationPoints({date:F(i,"numeric"),points:Number(a),studentGuid:e?.studentGuid,type:n?.id,comment:n?.id===p.Other?u??"":""})},P=new Date(i),$=P.getDay()!==0&&P.getDay()!==1;return t.jsxs(yt,{children:[t.jsx(y,{width:"100%",size:"big",title:"Тип работ",items:M,selected:n,setSelected:s}),n?.id===p.Other&&t.jsx(A,{width:"100%",size:"big",title:"Комментарий",setValue:g,value:u}),t.jsx(A,{alertMessage:$?"":"Не допустимая дата",size:"big",title:"Дата",setValue:o,value:i,type:"date",width:"100%"}),t.jsx(A,{width:"100%",size:"big",title:"Количество баллов",setValue:l,value:a,type:"number",stepSize:1,minValue:1}),t.jsx(x,{text:"Добавить",isActive:$,onClick:w,background:m.blue.main,textColor:m.white.main,width:"100%"})]})},Gt=h(z).withConfig({componentId:"sc-4mpo2k-0"})(["flex:1;"]),Tt=h.div.withConfig({componentId:"sc-4mpo2k-1"})(["display:flex;flex-direction:column;justify-content:center;gap:10px;"]),kt=T({and:[j.peTeacher,Y.pendingRemoveRegulationPoints,(e,i)=>[{title:"Дата",field:"date",type:"date",sort:!0},{title:"Норматив",field:"type",render:(o,n)=>o===p.Other?n.comment:M.find(({id:s})=>s===o)?.title},{title:"Количество баллов",field:"points"},{title:"Преподаватель",field:"teacherFullName"},{title:"Комментарий",field:"comment",priority:"five"},...e?.permissions?.length?[{title:"Действия",field:"actions",onClick:()=>null,render:(o,n)=>{const s=n,a=k(new Date(s.date),new Date)<-30,l=[v.AdminAccess,v.SuperUser].some(u=>e?.permissions?.includes(u));return s.teacherGuid===e?.id&&!a||l?t.jsx(x,{width:"100%",text:"Удалить",isActive:!i,onClick:()=>L.removeRegulationPoints({id:s.id.toString()})}):null}}]:[]]],or:{name:"$regularPointsColumns",sid:"levsbz"}}),zt=()=>{const[e,i,o]=C([b.$selectedStudent,kt,j.peTeacher]),{open:n}=H(),s=e?.totalPoints,a=()=>{n(t.jsx($t,{}),"Добавить норматив")},l=Number(s)<20;return e?t.jsxs(Tt,{children:[!e&&l&&t.jsx(at,{type:"alert",children:"Чтобы добавить норматив, у студента должно быть хотя бы 20 баллов"}),!!o?.permissions?.length&&t.jsx(x,{text:"Добавить норматив",onClick:a,background:m.blue.main,textColor:m.white.main,isActive:!l}),t.jsx(Gt,{data:e.standardsHistory,columns:i})]}):null},O=[{title:"Посещения",content:t.jsx(jt,{})},{title:"Нормативы ",content:t.jsx(zt,{})},{title:"Дополнительные баллы ",content:t.jsx(At,{})}],f=({label:e,value:i})=>t.jsxs(Dt,{children:[t.jsx(B,{size:3,children:e}),t.jsx(It,{children:i})]}),Dt=h.div.withConfig({componentId:"sc-bzc523-0"})(["display:flex;flex-direction:column;align-items:center;row-gap:4px;border-radius:4px;padding:12px;background-color:var(--theme-2);flex:1;"]),It=h.span.withConfig({componentId:"sc-bzc523-1"})([""]),Et=h.div.withConfig({componentId:"sc-1i85cbe-0"})(["margin-top:auto;width:100%;"]),S=[{id:"None",title:"-"},{id:"Basic",title:"Основная"},{id:"Preparatory",title:"Подготовительная"},{id:"SpecialA",title:"Специальная А"},{id:"SpecialB",title:"Специальная Б"},{id:"HealthLimitations",title:"ОВЗ"},{id:"Disabled",title:"Инвалид"}],Vt={None:S[0],Basic:S[1],Preparatory:S[2],SpecialA:S[3],SpecialB:S[4],HealthLimitations:S[5],Disabled:S[6]},Ot=({studentGuid:e,healthGroup:i})=>{const[o,n]=d.useState(Vt[i]),s=C(tt.pendingSetHealthGroup),a=()=>{et.setHealthGroup({studentGuid:e,healthGroup:o.id})};return t.jsxs(J,{gap:"4px",ai:"flex-start",children:[t.jsx(y,{isActive:!s,size:"big",width:"100%",title:"Группа здоровья",items:S,selected:o,setSelected:n}),t.jsx(Et,{children:t.jsx(x,{isActive:!s,text:"Сменить группу здоровья",width:"100%",onClick:a,background:m.blue.main,textColor:m.white.main})})]})},Nt=h.div.withConfig({componentId:"sc-jh5rb1-0"})(["margin-top:auto;width:100%;"]),r=[{id:"None",title:"-"},{id:"Basketball",title:"Баскетбол"},{id:"Volleyball",title:"Волейбол"},{id:"Aerobics",title:"Аэробика"},{id:"PowerLiftingAndCrossfit",title:"Пауэрлифтинг и кроссфит"},{id:"StreetLiftingAndArmLifting",title:"Стритлифтинг и армлифтинг"},{id:"GeneralPhysicalTraining",title:"ОФП"},{id:"GeneralPhysicalTrainingGym",title:"ОФП (тренажерный зал)"},{id:"FootRoom",title:"Футзал"},{id:"SMG",title:"СМГ"},{id:"TableTennis",title:"СМГ настольный теннис"},{id:"NordicWalking",title:"СМГ скандинавская ходьба"},{id:"InternalTeam",title:"Сборная"}],Lt={None:r[0],Basketball:r[1],Volleyball:r[2],Aerobics:r[3],PowerLiftingAndCrossfit:r[4],StreetLiftingAndArmLifting:r[5],GeneralPhysicalTraining:r[6],GeneralPhysicalTrainingGym:r[7],FootRoom:r[8],SMG:r[9],TableTennis:r[10],NordicWalking:r[11],InternalTeam:r[12]},Ft=({studentGuid:e,specialization:i})=>{const[o,n]=d.useState(Lt[i]),[s]=C([it.pendingSetSpecialization]),a=()=>{st.setSpecialization({studentGuid:e,specialization:o.id})};return t.jsxs(J,{gap:"4px",ai:"flex-start",children:[t.jsx(y,{isActive:!s,size:"big",width:"100%",title:"Специализация",items:r,selected:o,setSelected:n}),t.jsx(Nt,{children:t.jsx(x,{isActive:!s,text:"Сменить специализацию",width:"100%",onClick:a,background:m.blue.main,textColor:m.white.main})})]})},Mt=()=>{const{studentId:e}=W(),[i,{currentUser:o},n,s,a]=C([b.$selectedStudent,xt.user,j.isLoading,b.$loading,j.peTeacher]),l=o?.user_status==="staff"?e:o?.guid??"",[u,g]=d.useState(0);return d.useEffect(()=>(V.setCurrentStudentId(l),dt.load(),()=>V.resetStudentId()),[l]),!i&&l&&!n&&!s?t.jsx(rt,{text:"Нет данных"}):i?t.jsx(ct,{padding:"10px",children:t.jsxs(ut,{children:[t.jsx(B,{size:3,align:"left",children:i.fullName}),t.jsxs(pt,{children:[t.jsx(f,{label:"Группа",value:i.groupNumber}),t.jsx(f,{label:"Баллы",value:i.totalPoints.toString()}),t.jsx(f,{label:"Курс",value:i.course.toString()}),t.jsx(f,{label:"ЛМС",value:i.lmsPoints.toString()}),t.jsx(f,{label:"Куратор",value:i.curator?.fullName??"-"}),t.jsx(f,{label:"Группа здоровья",value:i.healthGroup==="None"?"-":`${nt[i.healthGroup]} (${i.healthGroupTeacher?.fullName??""})`}),t.jsx(f,{label:"Специализация",value:ot[i.specialization]}),t.jsx(f,{label:"Долг",value:i.hasDebt?"Есть":"Нет"})]}),!!a?.permissions?.length&&t.jsxs(t.Fragment,{children:[t.jsx(Ft,{studentGuid:i.studentGuid,specialization:i.specialization}),t.jsx(Ot,{studentGuid:i.studentGuid,healthGroup:i.healthGroup})]}),t.jsx(mt,{appearance:!1,pages:O,currentPage:u,setCurrentPage:g}),t.jsx(ht,{children:O[u].content})]})}):null};export{Mt as default};
