import{ax as y,r as d,i as f,j as e,aH as C,s as w}from"./vendor-8a1e4858.js";import{ec as r,W as T,P as v,f as i,T as l,w as R,B as Y,aM as b,b5 as E,ed as _}from"./index-58570f6e.js";const u=new Date().getFullYear();function k(){return Array.from({length:u-2006},(t,s)=>({id:s,title:(u-s).toString()}))}const n=k(),z=()=>{const o=y(),[t,s]=d.useState(n[0]),[m,a,x]=f([r.pageMounted,r.certificates,r.certificatesLoading]),[g,c,h]=f([r.presentYears,r.certificatedRequested,r.createCertificateLoading]);return d.useEffect(()=>{m()},[]),e.jsx(T,{data:!0,load:()=>{},error:null,children:e.jsx(v,{children:e.jsxs(i,{d:"column",gap:"2rem",p:"1rem 0 0 0",ai:"flex-start",children:[e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(l,{size:3,align:"left",children:"Заказать справку в ФНС"}),e.jsxs(i,{gap:"1rem",jc:"space-between",ai:"flex-end",children:[e.jsx(R,{title:"Год",items:n,selected:t,setSelected:s,isActive:n.length>1,required:!0,width:"10rem",placeholder:"Выберите год"}),e.jsx(Y,{text:"Заказать",background:"var(--reallyBlue)",textColor:"#fff",icon:e.jsx(C,{}),disabled:!t,loading:h,onClick:()=>{if(t){if(g.has(t.title)){b.evokeConfirm({message:e.jsxs(i,{d:"column",gap:"0.5rem",ai:"flex-start",children:[e.jsx(l,{align:"left",size:4,children:"Справка за выбранный год уже сформирована."}),e.jsx(p,{children:"Если вы уверены, что есть причина для формирования справки с корректировкой, например: изменились состав оплат или личные документы, тогда запрос на новую версию справки будет отправлен."}),e.jsx(p,{children:"Отправить?"})]}),onConfirm:()=>{c({year:t.title})}});return}c({year:t.title})}}})]})]}),e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(l,{size:3,align:"left",children:"Справки в ФНС"}),e.jsx(E,{loading:x,innerPadding:"0.5rem",columns:[{title:"Дата справки",field:"cert_date",priority:"one"},{title:"Номер справки",field:"number",priority:"four"},{title:"Номер корректировки",field:"correction",priority:"two"},{title:"Отчетный год",field:"year",priority:"one"},{title:"Плательщик",field:"payer",priority:"four"},{title:"Подписант",field:"signatory",priority:"four"},{title:"Очная форма",field:"is_full_time",priority:"four"},{title:"Сумма справки",field:"summ",priority:"three"}],data:a==null?void 0:a.toReversed(),onRowClick:j=>o.push(_+"/"+j.id)})]})]})})})},p=w.p.withConfig({componentId:"sc-19e5w1d-0"})(["font-size:1rem;line-height:1.45rem;"]);export{z as default};
