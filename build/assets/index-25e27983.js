var O=Object.defineProperty,P=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var N=(t,e,o)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,c=(t,e)=>{for(var o in e||(e={}))H.call(e,o)&&N(t,o,e[o]);if(w)for(var o of w(e))W.call(e,o)&&N(t,o,e[o]);return t},h=(t,e)=>P(t,U(e));var S=(t,e,o)=>new Promise((l,i)=>{var d=r=>{try{n(o.next(r))}catch(u){i(u)}},a=r=>{try{n(o.throw(r))}catch(u){i(u)}},n=r=>r.done?l(r.value):Promise.resolve(r.value).then(d,a);n((o=o.apply(t,e)).next())});import{p as B,e as I,S as L,h as G,f as k,j as s,s as J,r as p,F as K}from"./vendor-00bea631.js";import{$ as T,g as M,b as Q,cR as V,al as X,d as Y,ai as Z,a2 as z,k as ee,W as te,F as oe,I as ie,M as ae,S as le,c as re,cS as se}from"./index-d824e111.js";const de=()=>T.get(`?getRequestHighComfort&token=${M()}`),ne=t=>{const e=new FormData;e.set("token",M()),e.set("postRequestHighComfort","1");for(const[o,l]of Object.entries(t))e.set(o,l);return T.post("?postRequestHighComfort=1",e,{headers:{"Content-Type":"multipart/form-data"}})},C={superiorRoom:null,error:null},ue=()=>({data:k(D).superiorRoom,loading:k(x.pending),error:k(D).error}),ce=B({name:"postSuperiorRoom",sid:"8fhu4k"}),pe=I(t=>S(void 0,null,function*(){}),{name:"postSuperiorRoomFx",sid:"-fra7ot"});L({from:ce,to:pe});const x=I(()=>S(void 0,null,function*(){try{return(yield de()).data}catch(t){throw new Error("Не удалось загрузить раздел")}}),{name:"getSuperiorRoomFx",sid:"drkyz"}),D=G(C,{name:"$superiorRoomStore",sid:"-qtf9jq"}).on(x,t=>h(c({},t),{error:null})).on(x.doneData,(t,e)=>h(c({},t),{superiorRoom:e})).on(x.failData,(t,e)=>h(c({},t),{error:e.message})).on(Q.userGuid,()=>c({},C)),me={useSuperiorRoom:ue},ve={getSuperiorRoomFx:x},A=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],E=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],fe=[{id:0,title:"ул. Бориса Галушкина, д. 9"},{id:1,title:"ул. Михалковская, д. 7, корп. 3"},{id:2,title:"ул. Малая Семеновская, д. 12"}],he=[{value:!1,title:"Общественная",files:[],maxFiles:10,required:!1,fieldName:"society",checkboxCondition:"straight"},{value:!1,title:"Научная",files:[],maxFiles:10,required:!1,fieldName:"science",checkboxCondition:"straight"},{value:!1,title:"Спортивная",files:[],maxFiles:10,required:!1,fieldName:"sport",checkboxCondition:"straight"},{value:!1,title:"Творческая",files:[],maxFiles:10,required:!1,fieldName:"creativity",checkboxCondition:"straight"}],xe=(t,e)=>{var v,_,g;var o,l,i,d,a;const{fio:n,phone:r,email:u}=t,m=e==null||(o=e.data[3])===null||o===void 0||(l=o.value)===null||l===void 0?void 0:l.id;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:n,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:(v=e==null||(i=e.data[1])===null||i===void 0?void 0:i.value)!=null?v:r,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:(_=e==null||(d=e.data[2])===null||d===void 0?void 0:d.value)!=null?_:u,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:(g=e==null||(a=e.data[3])===null||a===void 0?void 0:a.value)!=null?g:null,fieldName:"address",type:"select",items:fe,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:m===0?E:A,width:"100%",editable:!0,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:m===0?E:A,width:"100%",editable:!0,required:!0},{title:"Участие во внеучебной деятельности",value:null,fieldName:"extracurricular",type:"checkbox-docs",items:he,width:"100%",editable:!0}],alert:s.jsx(s.Fragment,{children:V}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:"С приказами об изменении размеров платы за дополнительные услуги № 0597-ОД от 08.06.2021 и № 0032-АХД от 09.03.2022 ознакомлен(а)",value:!1,fieldName:"",editable:!0},links:[{title:"Приказ № 0032-АХД от 09.03.2022 (ул. Михалковская, д. 7, корп. 3)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0032-AHD_ot_09_03_2022_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_us.pdf",type:"document"},{title:"Приказ № 0597-ОД от 08.06.2021 (ул. Малая Семеновская, д. 12)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0597-OD_ot_08_06_2021_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_usl.pdf",type:"document"},{title:"Приказ № 15-АХД от 10.10.2023 (ул. Бориса Галушкина, д. 9)",link:"https://mospolytech.ru/upload/medialibrary/5d3/k1eyzf9xk6x6rgi8hq1l83fcz941ve94/razmer-platy-za-dopuslugu-10102023.PDF",type:"document"}]}},_e=(t,e,o)=>{e(!0);const l=X(t);try{ne(l),e(!1),o(!0)}catch(i){e(!1),Y.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${i}`,type:"failure",time:3e4})}},ge=J.div.withConfig({componentId:"sc-15p7xv6-0"})(["display:flex;align-items:",";justify-content:center;width:100%;height:",";padding:10px;color:var(--text);@media (max-width:1000px){padding:0;}"],({isDone:t})=>t?"center":"flex-start",({isDone:t})=>t&&"100%"),Se=()=>{var j,$,q;var t,e,o,l;const[i,d]=p.useState(null),{data:a,error:n}=me.useSuperiorRoom(),[r,u]=p.useState(0),[m,v]=p.useState(!1),[_,g]=p.useState(!1),f=(j=m||!(a!=null&&a.is_avaliable))!=null?j:!1,{data:{user:y}}=Z.useUser();if((y==null?void 0:y.educationForm)!=="Очная")return s.jsx(z,{text:"Данный раздел недоступен для вашей формы обучения"});const R=se();return ee&&R?s.jsx(z,{text:R}):(p.useEffect(()=>{a&&d(xe(a,i))},[a,r]),p.useEffect(()=>{if(i){var b,F;u(i==null||(b=i.data[3])===null||b===void 0||(F=b.value)===null||F===void 0?void 0:F.id)}},[i==null||(t=i.data[3])===null||t===void 0?void 0:t.value]),s.jsx(te,{load:()=>ve.getSuperiorRoomFx(),loading:!a,error:n,data:a,children:s.jsx(ge,{isDone:f,children:!!i&&!!d&&s.jsxs(oe,{children:[s.jsx(ie,h(c({},i),{collapsed:f,setData:d})),s.jsxs(ae,{title:"Информация по заявке",type:"info",icon:s.jsx(K,{}),visible:f,children:["Ваша заявка направлена на рассмотрение жилищной комиссии. Итоги рассмотрения будут направлены Вам 11 сентября 2023 года на указанную в заявке почту:"," ",(e=((o=i.data)===null||o===void 0?void 0:o[2]).value)===null||e===void 0?void 0:e.toString()]}),s.jsx(le,{text:a!=null&&a.is_avaliable?"Отправить":"Отправлено",action:()=>_e(i,g,v),isLoading:_,completed:m,setCompleted:v,repeatable:!1,buttonSuccessText:"Отправлено",isDone:f,isActive:re(i)&&(($=(l=i.optionalCheckbox)===null||l===void 0?void 0:l.value)!=null?$:!0),popUpFailureMessage:f?(q=a==null?void 0:a.error_text)!=null?q:"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{Se as default};
