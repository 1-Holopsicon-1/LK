var O=Object.defineProperty,P=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var z=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))H.call(t,o)&&z(e,o,t[o]);if(N)for(var o of N(t))W.call(t,o)&&z(e,o,t[o]);return e},v=(e,t)=>P(e,U(t));var y=(e,t,o)=>new Promise((i,l)=>{var c=s=>{try{r(o.next(s))}catch(n){l(n)}},d=s=>{try{r(o.throw(s))}catch(n){l(n)}},r=s=>s.done?i(s.value):Promise.resolve(s.value).then(c,d);r((o=o.apply(e,t)).next())});import{p as B,e as I,S as L,h as G,f as _,j as a,s as J,r as f,F as K}from"./vendor-00bea631.js";import{$ as T,g as M,b as Q,cR as V,al as X,d as Y,ai as Z,a2 as D,k as ee,W as te,F as oe,I as se,M as ae,S as ie,c as re,cS as le}from"./index-ed5dff92.js";const ne=()=>T.get(`?getRequestHighComfort&token=${M()}`),ue=e=>{const t=new FormData;t.set("token",M()),t.set("postRequestHighComfort","1");for(const[o,i]of Object.entries(e))t.set(o,i);return T.post("?postRequestHighComfort=1",t,{headers:{"Content-Type":"multipart/form-data"}})},C={superiorRoom:null,error:null},de=()=>({data:_(A).superiorRoom,loading:_(g.pending),error:_(A).error}),ce=B({name:"postSuperiorRoom",sid:"8fhu4k"}),pe=I(e=>y(void 0,null,function*(){}),{name:"postSuperiorRoomFx",sid:"-fra7ot"});L({from:ce,to:pe});const g=I(()=>y(void 0,null,function*(){try{return(yield ne()).data}catch(e){throw new Error("Не удалось загрузить раздел")}}),{name:"getSuperiorRoomFx",sid:"drkyz"}),A=G(C,{name:"$superiorRoomStore",sid:"-qtf9jq"}).on(g,e=>v(m({},e),{error:null})).on(g.doneData,(e,t)=>v(m({},e),{superiorRoom:t})).on(g.failData,(e,t)=>v(m({},e),{error:t.message})).on(Q.userGuid,()=>m({},C)),me={useSuperiorRoom:de},fe={getSuperiorRoomFx:g},E=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],$=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],he=[{id:0,title:"ул. Бориса Галушкина, д. 9"},{id:1,title:"ул. Михалковская, д. 7, корп. 3"},{id:2,title:"ул. Малая Семеновская, д. 12"}],xe=[{value:!1,title:"Общественная",files:[],maxFiles:10,required:!1,fieldName:"society",checkboxCondition:"straight"},{value:!1,title:"Научная",files:[],maxFiles:10,required:!1,fieldName:"science",checkboxCondition:"straight"},{value:!1,title:"Спортивная",files:[],maxFiles:10,required:!1,fieldName:"sport",checkboxCondition:"straight"},{value:!1,title:"Творческая",files:[],maxFiles:10,required:!1,fieldName:"creativity",checkboxCondition:"straight"}],ve=(e,t)=>{var d,r,s,n,u,p,h,x;const{fio:o,phone:i,email:l}=e,c=(r=(d=t==null?void 0:t.data[3])==null?void 0:d.value)==null?void 0:r.id;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:o,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:(n=(s=t==null?void 0:t.data[1])==null?void 0:s.value)!=null?n:i,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:(p=(u=t==null?void 0:t.data[2])==null?void 0:u.value)!=null?p:l,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:(x=(h=t==null?void 0:t.data[3])==null?void 0:h.value)!=null?x:null,fieldName:"address",type:"select",items:he,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:c===0?$:E,width:"100%",editable:!0,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:c===0?$:E,width:"100%",editable:!0,required:!0},{title:"Участие во внеучебной деятельности",value:null,fieldName:"extracurricular",type:"checkbox-docs",items:xe,width:"100%",editable:!0}],alert:a.jsx(a.Fragment,{children:V}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:"С приказами об изменении размеров платы за дополнительные услуги № 0597-ОД от 08.06.2021 и № 0032-АХД от 09.03.2022 ознакомлен(а)",value:!1,fieldName:"",editable:!0},links:[{title:"Приказ № 0032-АХД от 09.03.2022 (ул. Михалковская, д. 7, корп. 3)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0032-AHD_ot_09_03_2022_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_us.pdf",type:"document"},{title:"Приказ № 0597-ОД от 08.06.2021 (ул. Малая Семеновская, д. 12)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0597-OD_ot_08_06_2021_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_usl.pdf",type:"document"},{title:"Приказ № 15-АХД от 10.10.2023 (ул. Бориса Галушкина, д. 9)",link:"https://mospolytech.ru/upload/medialibrary/5d3/k1eyzf9xk6x6rgi8hq1l83fcz941ve94/razmer-platy-za-dopuslugu-10102023.PDF",type:"document"}]}},ge=(e,t,o)=>{t(!0);const i=X(e);try{ue(i),t(!1),o(!0)}catch(l){t(!1),Y.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${l}`,type:"failure",time:3e4})}},ye=J.div.withConfig({componentId:"sc-15p7xv6-0"})(["display:flex;align-items:",";justify-content:center;width:100%;height:",";padding:10px;color:var(--text);@media (max-width:1000px){padding:0;}"],({isDone:e})=>e?"center":"flex-start",({isDone:e})=>e&&"100%"),be=()=>{var x,F,S,b,k,R,j;const[e,t]=f.useState(null),{data:o,error:i}=me.useSuperiorRoom(),[l,c]=f.useState(0),[d,r]=f.useState(!1),[s,n]=f.useState(!1),u=(x=d||!(o!=null&&o.is_avaliable))!=null?x:!1,{data:{user:p}}=Z.useUser();if((p==null?void 0:p.educationForm)!=="Очная")return a.jsx(D,{text:"Данный раздел недоступен для вашей формы обучения"});const h=le();return ee&&h?a.jsx(D,{text:h}):(f.useEffect(()=>{o&&t(ve(o,e))},[o,l]),f.useEffect(()=>{var q,w;e&&c((w=(q=e==null?void 0:e.data[3])==null?void 0:q.value)==null?void 0:w.id)},[(F=e==null?void 0:e.data[3])==null?void 0:F.value]),a.jsx(te,{load:()=>fe.getSuperiorRoomFx(),loading:!o,error:i,data:o,children:a.jsx(ye,{isDone:u,children:!!e&&!!t&&a.jsxs(oe,{children:[a.jsx(se,v(m({},e),{collapsed:u,setData:t})),a.jsxs(ae,{title:"Информация по заявке",type:"info",icon:a.jsx(K,{}),visible:u,children:["Ваша заявка направлена на рассмотрение жилищной комиссии. Итоги рассмотрения будут направлены Вам 11 сентября 2023 года на указанную в заявке почту:"," ",(b=((S=e.data)==null?void 0:S[2]).value)==null?void 0:b.toString()]}),a.jsx(ie,{text:o!=null&&o.is_avaliable?"Отправить":"Отправлено",action:()=>ge(e,n,r),isLoading:s,completed:d,setCompleted:r,repeatable:!1,buttonSuccessText:"Отправлено",isDone:u,isActive:re(e)&&((R=(k=e.optionalCheckbox)==null?void 0:k.value)!=null?R:!0),popUpFailureMessage:u?(j=o==null?void 0:o.error_text)!=null?j:"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{be as default};
