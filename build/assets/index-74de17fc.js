import{j as i,s as S,r,F as j}from"./vendor-e9654bfa.js";import{v as w,c2 as k,a as D,c3 as N,O as A,E as b,W as z,c4 as E,F as R,I as M,M as I,S as T,w as q}from"./index-d7ba1400.js";const F=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],f=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],O=[{id:0,title:"ул. Михалковская, д. 7, корп. 3"},{id:1,title:"ул. Бориса Галушкина, д. 9"}],U=(t,e)=>{var u,d,p,_,l,o;const{fio:a,phone:s,email:n}=t,c=(d=(u=e==null?void 0:e.data[3])==null?void 0:u.value)==null?void 0:d.id;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:a,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:((p=e==null?void 0:e.data[1])==null?void 0:p.value)??s,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:((_=e==null?void 0:e.data[2])==null?void 0:_.value)??n,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:((l=e==null?void 0:e.data[3])==null?void 0:l.value)??null,fieldName:"address",type:"select",items:O,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:c===1?f:F,width:"100%",editable:!0,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:c===1?f:F,width:"100%",editable:!0,required:!0},{title:"Дополнительная информация",value:((o=e==null?void 0:e.data[6])==null?void 0:o.value)??"",fieldName:"info",type:"textarea",editable:!0,placeholder:"Желание проживать с другом и т.д."}],alert:i.jsx(i.Fragment,{children:"Подача заявок открыта с 12:00 1 сентября до 12:00 3 сентября!"}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:"С приказами об изменении размеров платы за дополнительные услуги № 0597-ОД от 08.06.2021 и № 0032-АХД от 09.03.2022 ознакомлен(а)",value:!1,fieldName:"",editable:!0},links:[{title:"Приказ № 0032-АХД от 09.03.2022 (ул. Михалковская, д. 7, корп. 3)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0032-AHD_ot_09_03_2022_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_us.pdf",type:"document"},{title:"Приказ № 0597-ОД от 08.06.2021 (ул. Малая Семеновская, д. 12)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0597-OD_ot_08_06_2021_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_usl.pdf",type:"document"}]}},W=(t,e,a)=>{e(!0);const s=w(t);try{k(s),e(!1),a(!0)}catch(n){e(!1),D.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${n}`,type:"failure",time:3e4})}},$=t=>{const e="Aug 17 2023 12:00:00 GMT+0300",a="Aug 19 2023 12:00:00 GMT+0300",s=new Date;return s<new Date(e)?"Подача заявок открыта с 1 сентября до 3 сентября!":s>new Date(a)?"Подача заявок закрыта":""},C=S.div`
    display: flex;
    align-items: ${({isDone:t})=>t?"center":"flex-start"};
    justify-content: center;
    width: 100%;
    height: ${({isDone:t})=>t&&"100%"};
    padding: 10px;
    color: var(--text);

    @media (max-width: 1000px) {
        padding: 0;
    }
`,G=()=>{var m,h,x;const[t,e]=r.useState(null),{data:a,error:s}=N.useSuperiorRoom(),[n,c]=r.useState(0),[u,d]=r.useState(!1),[p,_]=r.useState(!1),l=(u||!(a!=null&&a.is_avaliable))??!1,{data:{user:o}}=A.useUser();if((o==null?void 0:o.educationForm)!=="Очная")return i.jsx(b,{text:"Данный раздел недоступен для вашей формы обучения"});const v=$();return v?i.jsx(b,{text:v}):(r.useEffect(()=>{a&&e(U(a,t))},[a,n]),r.useEffect(()=>{var y,g;t&&c((g=(y=t==null?void 0:t.data[3])==null?void 0:y.value)==null?void 0:g.id)},[(m=t==null?void 0:t.data[3])==null?void 0:m.value]),i.jsx(z,{load:()=>E.getSuperiorRoomFx(),loading:!a,error:s,data:a,children:i.jsx(C,{isDone:l,children:!!t&&!!e&&i.jsxs(R,{children:[i.jsx(M,{...t,collapsed:l,setData:e}),i.jsxs(I,{title:"Информация по заявке",type:"info",icon:i.jsx(j,{}),visible:l,children:["Ваша заявка направлена на рассмотрение жилищной комиссии. Итоги рассмотрения будут направлены Вам в срок до 21 августа 2023 года на указанную в заявке почту:"," ",((h=t.data)==null?void 0:h[2]).value]}),i.jsx(T,{text:a!=null&&a.is_avaliable?"Отправить":"Отправлено",action:()=>W(t,_,d),isLoading:p,completed:u,setCompleted:d,repeatable:!1,buttonSuccessText:"Отправлено",isDone:l,isActive:q(t)&&(((x=t.optionalCheckbox)==null?void 0:x.value)??!0),popUpFailureMessage:l?(a==null?void 0:a.error_text)??"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{G as default};
