import{r as u,j as o,a4 as f,aR as g}from"./vendor-9cc634b6.js";import{w as x,O as E,Q as j,R as m,E as P,U as L,z as U,V as d,X as M,P as O,i as S,Y as T}from"./index-c587e0f5.js";const k=({title:t,blocks:a,isStaff:s})=>{const[e,r]=u.useState(null);return o.jsxs(x,{children:[o.jsx(E,{placeholder:`Поиск по ${t}`,whereToSearch:a,searchEngine:j,setResult:r,validationCheck:!0}),o.jsx(m,{blocks:e??a,isStaff:s}),(e==null?void 0:e.length)===0&&o.jsx(P,{text:"Ничего не найдено"})]})},R=(t,a)=>t.reduce((s,e)=>{const{id:r,title:c,content:i,visible:l}=e;return(l==="staff"&&a||l==="student"&&!a||l==="all")&&s.push({id:r,title:c,content:o.jsx(k,{blocks:i,isStaff:a,title:c})}),s},[]),C=()=>{var h;const{allRoutes:t}=L.useMenu(),{replace:a}=f(),s=(h=g(T))==null?void 0:h.params,{data:e}=U.useUser(),r=u.useMemo(()=>{var n;return((n=e==null?void 0:e.user)==null?void 0:n.user_status)==="staff"},[e]),c=u.useMemo(()=>R(Object.values(d),r),[d,r]),i=u.useMemo(()=>s!=null&&s.infoType?c.findIndex(({id:n})=>n===s.infoType)??0:0,[]),l=u.useCallback(n=>{var p;n&&a(`${((p=t==null?void 0:t["helpful-information"])==null?void 0:p.path)??M}/${n}`)},[t]);return o.jsx(O,{children:o.jsx(S,{pages:c,currentPage:i,onChangePage:l,appearance:!1})})};export{C as default};
