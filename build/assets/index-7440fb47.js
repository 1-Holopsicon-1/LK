var Q=Object.defineProperty,U=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var C=(e,t,i)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,F=(e,t)=>{for(var i in t||(t={}))E.call(t,i)&&C(e,i,t[i]);if(V)for(var i of V(t))I.call(t,i)&&C(e,i,t[i]);return e},R=(e,t)=>U(e,X(t));var B=(e,t)=>{var i={};for(var r in e)E.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&V)for(var r of V(e))t.indexOf(r)<0&&I.call(e,r)&&(i[r]=e[r]);return i};var G=(e,t,i)=>new Promise((r,n)=>{var u=l=>{try{p(i.next(l))}catch(h){n(h)}},c=l=>{try{p(i.throw(l))}catch(h){n(h)}},p=l=>l.done?r(l.value):Promise.resolve(l.value).then(u,c);p((i=i.apply(e,t)).next())});import{p as N,h as Y,k as ee,N as te,x as f,i as d,r as ie,j as s}from"./vendor-8a1e4858.js";import{dp as _,e1 as M,e8 as se,e2 as re,cm as P,o as ae,cZ as le,n as k,bA as oe,t as ne,g as L,i as ue,I as v,w as O,e9 as ce,ea as de,v as pe,f as me,T as fe,x as ve}from"./index-9bcd6006.js";import{l as he}from"./get-teacher-subdivisions-26155797.js";import{T as xe}from"./consts-efab0afd.js";import{c as ge}from"./create-checkbox-field-d0ba0451.js";const W=[{id:1,title:"1"},{id:2,title:"2"},{id:3,title:"3"},{id:4,title:"4"},{id:5,title:"5"},{id:6,title:"6"},{id:7,title:"7"},{id:8,title:"8"},{id:9,title:"9"}],je=[{id:"scholarship",title:"Справка по стипендии"},{id:"7month",title:"Запрос для субсидии по форме #2 за 7 месяцев"},{id:"13month",title:"Запрос для субсидии по форме #2 за 13 месяцев"}],a=N({name:"pageMounted",sid:"-4r1mww"}),z=N({name:"createApplication",sid:"-11uddo"}),x=_({reset:a}),g=_({reset:a}),j=_({reset:a}),b=_({reset:a}),y=M({reset:a}),m=se({reset:a}),T=M({defaultValue:W[0],reset:a}),$=M({reset:a}),q=M({reset:a}),w=_({reset:a}),D=re({reset:a}),H=Y("",{name:"$errorMessage",sid:"mo8gj0"}),S=ge({reset:a}),Z=y.value.map(e=>P?!1:(e==null?void 0:e.id)==="7month"||(e==null?void 0:e.id)==="13month"),A=ee({sid:"-9efks6",fn:()=>te({handler:i=>G(void 0,null,function*(){var r=i,{docs:e}=r,t=B(r,["docs"]);return ae.postApplicationFx({formId:le.STUD_ACCOUNTING,args:F(F({},t),Object.fromEntries(e.map((n,u)=>[`docs[${u}]`,n])))})})}),name:"sendForm",method:"createMutation"}),be=A.$pending;f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{surname:t,name:i,patronymic:r}=e;return t+" "+i+" "+r},target:x.setValue}],or:{sid:"-x6y9c1"}});f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{group:t}=e;return t},target:g.setValue}],or:{sid:"-waiebq"}});f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{email:t}=e;return t},target:b.setValue}],or:{sid:"-vqpsyq"}});f({and:[{clock:a,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{phone:t}=e;return t},target:j.setValue}],or:{sid:"-uvdj55"}});f({and:[{clock:[x.value,g.value,j.value,b.value,y.value,m.startDate,m.endDate,T.value,$.value,q.value,w.value,D.value],source:{fio:x.value,group:g.value,tel:j.value,email:b.value,applicationType:y.value,periodStartDate:m.startDate,periodEndDate:m.endDate,copies:T.value,methodObtaining:$.value,mfc:q.value,files:D.value,isFilesRequired:Z},fn:({fio:e,group:t,tel:i,email:r,applicationType:n,periodStartDate:u,periodEndDate:c,copies:p,methodObtaining:l,mfc:h,files:J,isFilesRequired:K})=>e?t?i?r?n?!u||!c?"Выберите период справки":p?l?(l==null?void 0:l.id)===1&&!h?"Выберите место получения справки":K&&J.length===0?"Приложите файл":"":"Выберите способ получения справки":"Выберите кол-во копий справки":"Выберите тип справки":"Введите email":"Введите телефон":"Для заполнения формы необходимо указать учебную группу. Обновите страницу или обратитесь к администратору":"Для заполнения формы необходимо указать ФИО. Обновите страницу или обратитесь к администратору",target:H}],or:{sid:"-ubkxs5"}});f({and:[{clock:z,source:{fio:x.value,group:g.value,tel:j.value,email:b.value,application_type:y.value,date_from:m.startDate,date_to:m.endDate,number_copies:T.value,method_obtaining:$.value,"structural-subdivision":q.value,commentary:w.value,docs:D.value},fn:e=>{var t,i,r,n,u,c,p,l;return R(F({},e),{application_type:(t=(i=e.application_type)===null||i===void 0?void 0:i.title)!==null&&t!==void 0?t:"",method_obtaining:(r=(n=e.method_obtaining)===null||n===void 0?void 0:n.title)!==null&&r!==void 0?r:"","structural-subdivision":(u=(c=e["structural-subdivision"])===null||c===void 0?void 0:c.title)!==null&&u!==void 0?u:"",number_copies:(p=(l=e.number_copies)===null||l===void 0?void 0:l.title)!==null&&p!==void 0?p:"1"})},target:A.start}],or:{sid:"-hy7l5n"}});f({and:[{clock:A.finished.success,target:S.setValue.prepend(()=>!0)}],or:{sid:"-gltoxv"}});const o={fio:x,group:g,tel:j,email:b,applicationType:y,period:m,copies:T,methodObtaining:$,mfc:q,commentary:w,files:D},Ie=()=>{const[e,t,i,r,n,u]=d([z,H,be,S.value,S.setValue,a]),c=r!=null?r:!1;return ie.useEffect(()=>u(),[]),s.jsx(oe,{isDone:c,children:s.jsxs(ne,{noHeader:!0,children:[s.jsx(L,{title:"",icon:null,type:"failure",children:"Срок изготовления справки - 3 рабочих дня, не считая дня подачи заявления"}),s.jsx(ye,{}),s.jsx(_e,{}),s.jsx(Fe,{}),s.jsx(Ve,{}),s.jsx(Te,{}),s.jsx($e,{}),s.jsx(qe,{}),s.jsx(De,{}),s.jsx(Me,{}),s.jsx(ke,{}),s.jsx(ue,{text:c?"Отправлено":"Отправить",action:e,isLoading:i,completed:r,setCompleted:n,repeatable:!1,buttonSuccessText:"Отправлено",isDone:c,isActive:!t,popUpFailureMessage:t,popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};function ye(){const{value:e,setValue:t}=d(o.fio);return s.jsx(v,{title:"ФИО",placeholder:"ФИО",value:e,setValue:t,isActive:!1,required:!0})}function _e(){const{value:e,setValue:t}=d(o.group);return s.jsx(v,{title:"Учебная группа",placeholder:"Учебная группа",value:e,setValue:t,isActive:!1,required:!0})}function Ve(){const{value:e,setValue:t}=d(o.email);return s.jsx(v,{title:"Электронная почта",placeholder:"test@test.com",value:e,setValue:t,type:"email",required:!0})}function Fe(){const{value:e,setValue:t}=d(o.tel);return s.jsx(v,{title:"Телефон",placeholder:"Телефон",value:e,setValue:t,type:"tel",mask:!0,required:!0})}function Te(){const[e,t]=d([o.applicationType.value,o.applicationType.setValue]);return s.jsx(O,{title:"Тип справки",items:je,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Тип справки"})}function $e(){const{startDate:e,setStartDate:t,endDate:i,setEndDate:r}=d(o.period);return s.jsxs(ce,{columnGap:"0.5rem",columns:"1fr 1fr",rows:"1fr",children:[s.jsx(v,{title:"Период c",value:e,setValue:t,type:"month",required:!0,width:"100%"}),s.jsx(v,{title:"по",value:i,setValue:r,type:"month",required:!0,width:"100%",minValue:e})]})}function qe(){const[e,t]=d([o.copies.value,o.copies.setValue]);return s.jsx(O,{title:"Количество копий",items:W,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Количество копий"})}function De(){const[e,t,i,r]=d([o.methodObtaining.value,o.methodObtaining.setValue,o.mfc.value,o.mfc.setValue]);return s.jsxs(s.Fragment,{children:[s.jsx(O,{title:"Способ получения справки",items:xe,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Способ получения справки"}),(e==null?void 0:e.id)===1&&s.jsx(de,{buttons:he,title:"Выберите отделение МФЦ, где желаете получить готовый документ",required:!0,current:i,setCurrent:r})]})}function Me(){const{value:e,setValue:t}=d(o.commentary);return s.jsx(pe,{title:"Дополнительная информация",placeholder:"Дополнительная информация",value:e,setValue:t})}function ke(){const[e,t,i]=d([o.files.value,o.files.setValue,Z]);return P?null:s.jsxs(me,{d:"column",gap:"0.5rem",children:[i&&s.jsx(L,{type:"alert",title:"Прикрепите скан запроса"}),s.jsx(fe,{size:5,align:"left",required:i,children:"Приложите файлы"}),s.jsx(ve,{files:e,setFiles:t,isActive:!0,maxFiles:4})]})}export{Ie as default};
