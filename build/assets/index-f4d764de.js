import{r as s,j as i}from"./vendor-9c916fad.js";import{s as j,B as N,F as S,I as d,S as x,ah as w,j as A,c as n}from"./index-40546281.js";const g=[{id:0,title:"Брат"},{id:1,title:"Сестра"},{id:2,title:"Бабушка"},{id:3,title:"Дедушка"},{id:4,title:"Тетя"},{id:5,title:"Дядя"},{id:6,title:"Другое"}],y=e=>{const{phone:a,email:t}=e;return{title:"Контактные данные",data:[{title:"ФИО",value:`${e.surname} ${e.name} ${e.patronymic}`,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:a,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:t,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0}]}},b=(e,a)=>({title:`Контактные данные родителей (${e})`,data:[{title:"Телефон",value:"",fieldName:a+"phone",type:"tel",width:"100%",editable:!0,mask:!0},{title:"ФИО",value:"",fieldName:a+"fio",width:"100%",editable:!0},{title:"Место работы",value:"",fieldName:a+"job",width:"100%",editable:!0}]}),k=()=>({title:"Контактные данные родственников",data:[{title:"Член семьи",value:null,fieldName:"address",type:"select",items:g,width:"100%",editable:!0},{title:"Телефон",value:"",fieldName:"r_phone",type:"tel",width:"100%",editable:!0,mask:!0},{title:"ФИО",value:"",fieldName:"r_fio",width:"100%",editable:!0},{title:"Место работы",value:"",fieldName:"r_job",width:"100%",editable:!0}]}),_=e=>e.some(a=>a.data.some(t=>Array.isArray(t)?t.some(u=>u.value):typeof t=="boolean"?t:t.value)),E=()=>{const[e,a]=s.useState(null),[t,u]=s.useState(null),[r,c]=s.useState(null),[o,p]=s.useState(null),[h,f]=s.useState(!1),[v,F]=s.useState(!1),l=h??!1,{data:{dataUserApplication:m}}=j.useApplications();return s.useEffect(()=>{m&&(a(y(m)),u(b("Мать","m_")),c(b("Отец","f_")),p(k()))},[m]),i.jsx(N,{isDone:l,children:!!e&&!!t&&!!r&&!!o&&i.jsxs(S,{noHeader:!0,children:[i.jsx(d,{...e,collapsed:l,setData:a}),i.jsx(d,{...t,collapsed:l,setData:u}),i.jsx(d,{...r,collapsed:l,setData:c}),i.jsx(d,{...o,collapsed:l,setData:p}),i.jsx(x,{text:l?"Отправлено":"Отправить",action:()=>w(A.PARENT_CONTACTS,[e,t,r,o],F,f,!0),isLoading:v,completed:h,setCompleted:f,repeatable:!1,buttonSuccessText:"Отправлено",isDone:l,isActive:n(e)&&n(t)&&n(r)&&n(o)&&_([t,r,o]),popUpFailureMessage:"Для отправки формы необходимо, чтобы хотя бы одно поле было заполнено",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{E as default};
