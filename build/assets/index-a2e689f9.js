import{r as s,n as w,cM as j,j as g}from"./vendor-08ab745b.js";import{b7 as k,s as q,bg as W,B as A,F as R,I as B,S as E,j as O,c as I,b5 as M,bh as U}from"./index-0892b83f.js";import{s as $}from"./send-hr-form-work-transfer-17620d40.js";const G=(t,i,a,l,n,r,u,d,p,m,o,h,c,y,f,N)=>{const{surname:v,name:S,patronymic:b}=t;return{title:"Заявление на перевод",data:[{title:"ФИО",value:v+" "+S+" "+b,fieldName:"fio",type:"simple-text",visible:!0},{title:"",type:"simple-text",value:i[a].jobGuid.toString(),fieldName:"jobGuid",visible:!1},{title:"Текущее место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Должность",type:"simple-text",fieldName:"post",value:i[a].jobTitle.toString(),visible:!0},{title:"Подразделение",type:"simple-text",value:i[a].subDivision.toString(),fieldName:"subDivision",visible:!0},{title:"Cтавка",type:"simple-text",value:i[a].rate.toString(),fieldName:"currentRate",visible:!0},{title:"Новое место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Подразделение",type:"auto-complete-input",fieldName:"newPlaceOfWork",value:d,width:"100%",suggestions:N,required:!0,mask:!0,visible:!0,placeholder:"Начните вводить название подразделения",onChange:e=>{p(e)}},{title:"Должность",value:r,fieldName:"newPost",editable:!0,mask:!0,required:!0,onChange:e=>{u(e)}},{title:"Тип занятости",type:"select",fieldName:"employment",value:l,editable:!0,required:!0,width:"100%",items:[{id:0,title:"Основное место работы"},{id:1,title:"По совместительству"}],onChange:e=>{n(e),e.title=="По совместительству"&&m.title=="1"&&o(null)}},{title:"Ставка",type:"select",fieldName:"newRate",value:m,editable:!0,required:!0,width:"100%",items:l?.title=="По совместительству"?[{id:1,title:"0.5"},{id:2,title:"0.25"}]:[{id:0,title:"1"},{id:1,title:"0.5"},{id:2,title:"0.25"}],onChange:e=>{o(e)}},{title:"При устройстве по совместительству ставка не может превышать 0.5",type:"text-warning",fieldName:"PartTime",value:null,visible:l?.title=="По совместительству",required:!1,width:"100%"},{title:"Тип совместительства",type:"select",fieldName:"parttime_type",value:y,editable:!0,required:l?.title=="По совместительству",specialType:"PartTime",width:"100%",items:[{id:0,title:"Внутреннее"},{id:1,title:"Внешнее"}],onChange:e=>{f(e)}},{title:"Дата перевода",type:"date",value:h,fieldName:"transferDate",editable:!0,mask:!0,required:!0,minValueInput:k(0),onChange:e=>{c(e)}}]}},H=t=>{const i=t.find(a=>a.fieldName==="employment");return i?.value&&(i?.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},V=()=>{const[t,i]=s.useState(null),a=w(M),{data:{dataUserApplication:l,dataWorkerApplication:n}}=q.useApplications(),{loading:r}=W.useBufferWorkTransfer(),[u,d]=s.useState(!1),[p,m]=s.useState(null),[o,h]=s.useState(null),[c,y]=s.useState(null),[f,N]=s.useState(null),[v,S]=s.useState(null),[b,e]=s.useState(null),[F,D]=s.useState({}),P=w(U),x=u??!1,{id:C}=j(),T=+C;return s.useEffect(()=>{t&&l&&D(H(t.data))},[t]),s.useEffect(()=>{l&&n&&!r&&i(G(l,n,T,o,h,c,y,f,N,v,S,b,e,p,m,a))},[l,T,r,o,c,f,v,b,p]),g.jsx(A,{isDone:x,children:!!t&&!!i&&g.jsxs(R,{children:[g.jsx(B,{...t,collapsed:x,setData:i,specialFieldsNameConfig:F}),g.jsx(E,{text:"Отправить",action:()=>$(O.HOLIDAY_WORK,[t],d,P),isLoading:r,completed:u,setCompleted:d,repeatable:!1,buttonSuccessText:"Отправлено",isDone:x,isActive:I(t)&&(t.optionalCheckbox?.value??!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{V as default};
