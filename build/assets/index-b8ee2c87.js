var M=Object.defineProperty,O=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(t,e,o)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))H.call(e,o)&&w(t,o,e[o]);if(q)for(var o of q(e))P.call(e,o)&&w(t,o,e[o]);return t},x=(t,e)=>O(t,U(e));var F=(t,e,o)=>new Promise((l,i)=>{var n=s=>{try{u(o.next(s))}catch(d){i(d)}},a=s=>{try{u(o.throw(s))}catch(d){i(d)}},u=s=>s.done?l(s.value):Promise.resolve(s.value).then(n,a);u((o=o.apply(t,e)).next())});import{p as W,e as A,S as B,h as L,f as b,j as r,s as G,r as m,F as J}from"./vendor-249420f4.js";import{$ as E,g as I,s as K,cy as Q,ae as V,e as X,a9 as Y,R as z,W as Z,F as ee,I as te,M as oe,S as ie,ac as ae,cz as le}from"./index-72b1dbf4.js";const se=()=>E.get(`?getRequestHighComfort&token=${I()}`),re=t=>{const e=new FormData;e.set("token",I()),e.set("postRequestHighComfort","1");for(const[o,l]of Object.entries(t))e.set(o,l);return E.post("?postRequestHighComfort=1",e,{headers:{"Content-Type":"multipart/form-data"}})},N={superiorRoom:null,error:null},ne=()=>({data:b(C).superiorRoom,loading:b(g.pending),error:b(C).error}),de=W({name:"postSuperiorRoom",sid:"8fhu4k"}),ue=A(t=>F(void 0,null,function*(){}),{name:"postSuperiorRoomFx",sid:"-fra7ot"});B({from:de,to:ue});const g=A(()=>F(void 0,null,function*(){try{return(yield se()).data}catch(t){throw new Error("Не удалось загрузить раздел")}}),{name:"getSuperiorRoomFx",sid:"drkyz"}),C=L(N,{name:"$superiorRoomStore",sid:"-qtf9jq"}).on(g,t=>x(p({},t),{error:null})).on(g.doneData,(t,e)=>x(p({},t),{superiorRoom:e})).on(g.failData,(t,e)=>x(p({},t),{error:e.message})).on(K.userGuid,()=>p({},N)),ce={useSuperiorRoom:ne},pe={getSuperiorRoomFx:g},D=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],$=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],me=[{id:0,title:"ул. Бориса Галушкина, д. 9"},{id:1,title:"ул. Михалковская, д. 7, корп. 3"},{id:2,title:"ул. Малая Семеновская, д. 12"}],ve=[{value:!1,title:"Общественная",files:[],maxFiles:10,required:!1,fieldName:"society",checkboxCondition:"straight"},{value:!1,title:"Научная",files:[],maxFiles:10,required:!1,fieldName:"science",checkboxCondition:"straight"},{value:!1,title:"Спортивная",files:[],maxFiles:10,required:!1,fieldName:"sport",checkboxCondition:"straight"},{value:!1,title:"Творческая",files:[],maxFiles:10,required:!1,fieldName:"creativity",checkboxCondition:"straight"}],fe=(t,e)=>{var v,f,_;var o,l,i,n;const{fio:a,phone:u,email:s}=t,d=e==null||(o=e.data[3])===null||o===void 0||(o=o.value)===null||o===void 0?void 0:o.id;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:a,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:(v=e==null||(l=e.data[1])===null||l===void 0?void 0:l.value)!=null?v:u,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:(f=e==null||(i=e.data[2])===null||i===void 0?void 0:i.value)!=null?f:s,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:(_=e==null||(n=e.data[3])===null||n===void 0?void 0:n.value)!=null?_:null,fieldName:"address",type:"select",items:me,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:d===0?$:D,width:"100%",editable:!0,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:d===0?$:D,width:"100%",editable:!0,required:!0},{title:"Участие во внеучебной деятельности",value:null,fieldName:"extracurricular",type:"checkbox-docs",items:ve,width:"100%",editable:!0}],alert:r.jsx(r.Fragment,{children:Q}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:"С приказами об изменении размеров платы за дополнительные услуги № 0597-ОД от 08.06.2021 и № 0032-АХД от 09.03.2022 ознакомлен(а)",value:!1,fieldName:"",editable:!0},links:[{title:"Приказ № 0032-АХД от 09.03.2022 (ул. Михалковская, д. 7, корп. 3)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0032-AHD_ot_09_03_2022_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_us.pdf",type:"document"},{title:"Приказ № 0597-ОД от 08.06.2021 (ул. Малая Семеновская, д. 12)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0597-OD_ot_08_06_2021_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_usl.pdf",type:"document"},{title:"Приказ № 15-АХД от 10.10.2023 (ул. Бориса Галушкина, д. 9)",link:"https://mospolytech.ru/upload/medialibrary/5d3/k1eyzf9xk6x6rgi8hq1l83fcz941ve94/razmer-platy-za-dopuslugu-10102023.PDF",type:"document"}]}},he=(t,e,o)=>{e(!0);const l=V(t);try{re(l),e(!1),o(!0)}catch(i){e(!1),X.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${i}`,type:"failure",time:3e4})}},xe=G.div.withConfig({componentId:"sc-15p7xv6-0"})(["display:flex;align-items:",";justify-content:center;width:100%;height:",";padding:10px;color:var(--text);@media (max-width:1000px){padding:0;}"],({isDone:t})=>t?"center":"flex-start",({isDone:t})=>t&&"100%"),Fe=()=>{var k,R,j;var t,e,o,l;const[i,n]=m.useState(null),{data:a,error:u}=ce.useSuperiorRoom(),[s,d]=m.useState(0),[v,f]=m.useState(!1),[_,T]=m.useState(!1),h=(k=v||!(a!=null&&a.is_avaliable))!=null?k:!1,{data:{user:y}}=Y.useUser();if((y==null?void 0:y.educationForm)!=="Очная")return r.jsx(z,{text:"Данный раздел недоступен для вашей формы обучения"});const S=le();return S?r.jsx(z,{text:S}):(m.useEffect(()=>{a&&n(fe(a,i))},[a,s]),m.useEffect(()=>{if(i){var c;d(i==null||(c=i.data[3])===null||c===void 0||(c=c.value)===null||c===void 0?void 0:c.id)}},[i==null||(t=i.data[3])===null||t===void 0?void 0:t.value]),r.jsx(Z,{load:()=>pe.getSuperiorRoomFx(),loading:!a,error:u,data:a,children:r.jsx(xe,{isDone:h,children:!!i&&!!n&&r.jsxs(ee,{children:[r.jsx(te,x(p({},i),{collapsed:h,setData:n})),r.jsxs(oe,{title:"Информация по заявке",type:"info",icon:r.jsx(J,{}),visible:h,children:["Ваша заявка направлена на рассмотрение жилищной комиссии. Итоги рассмотрения будут направлены Вам 11 сентября 2023 года на указанную в заявке почту:"," ",(e=((o=i.data)===null||o===void 0?void 0:o[2]).value)===null||e===void 0?void 0:e.toString()]}),r.jsx(ie,{text:a!=null&&a.is_avaliable?"Отправить":"Отправлено",action:()=>he(i,T,f),isLoading:_,completed:v,setCompleted:f,repeatable:!1,buttonSuccessText:"Отправлено",isDone:h,isActive:ae(i)&&((R=(l=i.optionalCheckbox)===null||l===void 0?void 0:l.value)!=null?R:!0),popUpFailureMessage:h?(j=a==null?void 0:a.error_text)!=null?j:"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{Fe as default};
