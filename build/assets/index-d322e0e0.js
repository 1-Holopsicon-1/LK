import{r as o,ah as g,ag as b,b5 as S,j as a,C as h}from"./vendor-1f18e8c3.js";import{ad as j,aC as C,an as N,F as y,B as F,as as R,I as T,S as A,d as D,x as k,aD as B}from"./index-8228fcb5.js";import{s as E}from"./send-hr-form-work-transfer-1eec0827.js";const P=(t,e,s)=>{const{surname:l,name:i,patronymic:r}=t;return{title:"Заявление на перевод",data:[{title:"ФИО",value:l+" "+i+" "+r,fieldName:"fio",type:"simple-text"},{title:"",type:"simple-text",value:e[s].jobGuid.toString(),fieldName:"jobGuid"},{title:"Должность",type:"simple-text",fieldName:"post",value:e[s].jobTitle.toString()},{title:"Подразделение",type:"simple-text",value:e[s].subDivision.toString(),fieldName:"subDivision"},{title:"Текущая ставка",type:"simple-text",value:e[s].rate.toString(),fieldName:"currentRate"},{title:"Желаемая ставка",type:"select",fieldName:"newRate",value:"",editable:!0,required:!0,width:"100%",items:[{id:0,title:"0.25"},{id:1,title:"0.5"},{id:2,title:"1"}]}]}},H=t=>{const e=t.find(s=>s.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},W=()=>{var c;const[t,e]=o.useState(null),{data:{dataUserApplication:s,dataWorkerApplication:l}}=j.useApplications(),{loading:i}=C.useBufferWorkTransfer(),[r,u]=o.useState(!1),[m,f]=o.useState({}),d=g(B),n=r??!1,x=b(),{id:v}=S(),p=+v;return o.useEffect(()=>{t&&s&&f(H(t.data))},[t]),o.useEffect(()=>{s&&l&&!i&&e(P(s,l,p))},[s,p,i]),a.jsx(N,{isDone:n,children:!!t&&!!e&&a.jsxs(y,{children:[a.jsx(F,{text:"Назад к кадровым заявлениям",icon:a.jsx(h,{}),onClick:()=>x.push(R),background:"transparent",textColor:"var(--blue)"}),a.jsx(T,{...t,collapsed:n,setData:e,specialFieldsNameConfig:m}),a.jsx(A,{text:"Отправить",action:()=>E(D.HOLIDAY_WORK,[t],u,d),isLoading:i,completed:r,setCompleted:u,repeatable:!1,buttonSuccessText:"Отправлено",isDone:n,isActive:k(t)&&(((c=t.optionalCheckbox)==null?void 0:c.value)??!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{W as default};
