import{r as o,n as g,cM as b,j as r}from"./vendor-8312535b.js";import{s as S,bg as j,B as N,F,I as h,S as y,j as R,c as T,bh as A}from"./index-3ed27df5.js";import{s as D}from"./send-hr-form-work-transfer-38a23a80.js";const B=(t,e,s)=>{const{surname:l,name:i,patronymic:a}=t;return{title:"Заявление на изменение ставки",data:[{title:"ФИО",value:l+" "+i+" "+a,fieldName:"fio",type:"simple-text"},{title:"",type:"simple-text",value:e[s].jobGuid.toString(),fieldName:"jobGuid"},{title:"Должность",type:"simple-text",fieldName:"post",value:e[s].jobTitle.toString()},{title:"Подразделение",type:"simple-text",value:e[s].subDivision.toString(),fieldName:"subDivision"},{title:"Текущая ставка",type:"simple-text",value:e[s].rate.toString(),fieldName:"currentRate"},{title:"Желаемая ставка",type:"select",fieldName:"newRate",value:"",editable:!0,required:!0,width:"100%",items:[{id:0,title:"0.25"},{id:1,title:"0.5"},{id:2,title:"1"}]}]}},C=t=>{const e=t.find(s=>s.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},M=()=>{var p,m;const[t,e]=o.useState(null),{data:{dataUserApplication:s,dataWorkerApplication:l}}=S.useApplications(),{loading:i}=j.useBufferWorkTransfer(),[a,u]=o.useState(!1),[f,d]=o.useState({}),v=g(A),n=a!=null?a:!1,{id:x}=b(),c=+x;return o.useEffect(()=>{t&&s&&d(C(t.data))},[t]),o.useEffect(()=>{s&&l&&!i&&e(B(s,l,c))},[s,c,i]),r.jsx(N,{isDone:n,children:!!t&&!!e&&r.jsxs(F,{children:[r.jsx(h,{...t,collapsed:n,setData:e,specialFieldsNameConfig:f}),r.jsx(y,{text:"Отправить",action:()=>D(R.HOLIDAY_WORK,[t],u,v),isLoading:i,completed:a,setCompleted:u,repeatable:!1,buttonSuccessText:"Отправлено",isDone:n,isActive:T(t)&&((m=(p=t.optionalCheckbox)==null?void 0:p.value)!=null?m:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{M as default};
