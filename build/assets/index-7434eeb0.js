import{r as a,n as C,cM as q,j as g}from"./vendor-8312535b.js";import{b7 as W,s as A,bg as R,B,F as E,I as O,S as I,j as M,c as U,b5 as $,bh as G}from"./index-3ed27df5.js";import{s as H}from"./send-hr-form-work-transfer-38a23a80.js";const L=(s,e,l,t,o,u,r,d,c,f,n,h,p,N,m,S)=>{const{surname:v,name:x,patronymic:b}=s;return{title:"Заявление на перевод",data:[{title:"ФИО",value:v+" "+x+" "+b,fieldName:"fio",type:"simple-text",visible:!0},{title:"",type:"simple-text",value:e[l].jobGuid.toString(),fieldName:"jobGuid",visible:!1},{title:"Текущее место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Должность",type:"simple-text",fieldName:"post",value:e[l].jobTitle.toString(),visible:!0},{title:"Подразделение",type:"simple-text",value:e[l].subDivision.toString(),fieldName:"subDivision",visible:!0},{title:"Cтавка",type:"simple-text",value:e[l].rate.toString(),fieldName:"currentRate",visible:!0},{title:"Новое место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Подразделение",type:"auto-complete-input",fieldName:"newPlaceOfWork",value:d,width:"100%",suggestions:S,required:!0,mask:!0,visible:!0,placeholder:"Начните вводить название подразделения",onChange:i=>{c(i)}},{title:"Должность",value:u,fieldName:"newPost",editable:!0,mask:!0,required:!0,onChange:i=>{r(i)}},{title:"Тип занятости",type:"select",fieldName:"employment",value:t,editable:!0,required:!0,width:"100%",items:[{id:0,title:"Основное место работы"},{id:1,title:"По совместительству"}],onChange:i=>{o(i),i.title=="По совместительству"&&f.title=="1"&&n(null)}},{title:"Ставка",type:"select",fieldName:"newRate",value:f,editable:!0,required:!0,width:"100%",items:(t==null?void 0:t.title)=="По совместительству"?[{id:1,title:"0.5"},{id:2,title:"0.25"}]:[{id:0,title:"1"},{id:1,title:"0.5"},{id:2,title:"0.25"}],onChange:i=>{n(i)}},{title:"При устройстве по совместительству ставка не может превышать 0.5",type:"text-warning",fieldName:"PartTime",value:null,visible:(t==null?void 0:t.title)=="По совместительству",required:!1,width:"100%"},{title:"Тип совместительства",type:"select",fieldName:"parttime_type",value:N,editable:!0,required:(t==null?void 0:t.title)=="По совместительству",specialType:"PartTime",width:"100%",items:[{id:0,title:"Внутреннее"},{id:1,title:"Внешнее"}],onChange:i=>{m(i)}},{title:"Дата перевода",type:"date",value:h,fieldName:"transferDate",editable:!0,mask:!0,required:!0,minValueInput:W(0),onChange:i=>{p(i)}}]}},_=s=>{const e=s.find(l=>l.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},z=()=>{var D,P;const[s,e]=a.useState(null),l=C($),{data:{dataUserApplication:t,dataWorkerApplication:o}}=A.useApplications(),{loading:u}=R.useBufferWorkTransfer(),[r,d]=a.useState(!1),[c,f]=a.useState(null),[n,h]=a.useState(null),[p,N]=a.useState(null),[m,S]=a.useState(null),[v,x]=a.useState(null),[b,i]=a.useState(null),[j,k]=a.useState({}),y=C(G),T=r!=null?r:!1,{id:F}=q(),w=+F;return a.useEffect(()=>{s&&t&&k(_(s.data))},[s]),a.useEffect(()=>{t&&o&&!u&&e(L(t,o,w,n,h,p,N,m,S,v,x,b,i,c,f,l))},[t,w,u,n,p,m,v,b,c]),g.jsx(B,{isDone:T,children:!!s&&!!e&&g.jsxs(E,{children:[g.jsx(O,{...s,collapsed:T,setData:e,specialFieldsNameConfig:j}),g.jsx(I,{text:"Отправить",action:()=>H(M.HOLIDAY_WORK,[s],d,y),isLoading:u,completed:r,setCompleted:d,repeatable:!1,buttonSuccessText:"Отправлено",isDone:T,isActive:U(s)&&((P=(D=s.optionalCheckbox)==null?void 0:D.value)!=null?P:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{z as default};
