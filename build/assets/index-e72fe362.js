import{r as o,K as b,bS as y,j as s,z as x}from"./vendor-831b4923.js";import{av as N,ah as h,ay as S,ar as k,F as j,B as C,aw as g,I as F,S as _,d as A,N as D}from"./index-564a54c0.js";import{S as H}from"./send-hr-form-holiday-work-2a997f3d.js";const B=t=>{const e=t.find(a=>a.fieldName==="compensation");let i=null;return e!=null&&e.value&&(e==null?void 0:e.value).title==="Оплатить работу в выходной день в одинарном размере с предоставлением другого дня отдыха"&&(i="Compensation"),{compensation:i}},I=(t,e,i)=>{const{surname:a,name:l,patronymic:r}=t;return{title:"Заявление о привлечении к работе в выходной день",data:[{title:"ФИО",type:"simple-text",value:a+" "+l+" "+r,fieldName:"fio",visible:!0},{title:"Должность",type:"simple-text",fieldName:"post",value:e[i].jobTitle.toString(),visible:!0},{title:"Подразделение",type:"simple-text",value:e[i].subDivision.toString(),fieldName:"subDivision",visible:!0},{title:"Дата привлечения к работе",type:"date",value:null,fieldName:"holiday_work_date",editable:!0,mask:!0,required:!0,minValueInput:N(0)},{title:"Количество часов",type:"select",fieldName:"holiday_work_hours",value:null,editable:!0,required:!0,width:"100%",items:[{id:0,title:"1"},{id:1,title:"2"},{id:2,title:"3"},{id:3,title:"4"},{id:4,title:"5"},{id:5,title:"6"},{id:6,title:"7"},{id:7,title:"8"}]},{title:"Причина",value:"Служебная необходимость",fieldName:"reason",editable:!0,mask:!0,required:!0},{title:"Вид компенсации",type:"select",fieldName:"compensation",value:null,editable:!0,required:!0,width:"100%",items:[{id:0,title:"Оплатить работу в выходной день в двойном размере"},{id:1,title:"Оплатить работу в выходной день в одинарном размере с предоставлением другого дня отдыха"}]},{title:"Дата дополнительного дня отдыха",type:"date",value:"",fieldName:"extra_holiday_date",editable:!0,mask:!0,required:!1,specialType:"Compensation"},{title:"",type:"simple-text",value:e[i].jobGuid.toString(),fieldName:"jobGuid",visible:!1}]}},E=()=>{var m;const[t,e]=o.useState(null),{data:{dataUserApplication:i,dataWorkerApplication:a}}=h.useApplications(),{loading:l}=S.useBufferHolidayWork(),[r,n]=o.useState(!1),[p,c]=o.useState({}),u=r??!1,f=b(),{id:v}=y(),d=+v;return o.useEffect(()=>{i&&a&&!l&&e(I(i,a,d))},[i,d,l]),o.useEffect(()=>{t&&i&&c(B(t.data))},[t]),s.jsx(k,{isDone:u,children:!!t&&!!e&&s.jsxs(j,{children:[s.jsx(C,{text:"Назад к кадровым заявлениям",icon:s.jsx(x,{}),onClick:()=>f.push(g),background:"transparent",textColor:"var(--blue)"}),s.jsx(F,{...t,collapsed:u,setData:e,specialFieldsNameConfig:p}),s.jsx(_,{text:"Отправить",action:()=>H(A.HOLIDAY_WORK,[t],n),isLoading:l,completed:r,setCompleted:n,repeatable:!1,buttonSuccessText:"Отправлено",isDone:u,isActive:D(t)&&(((m=t.optionalCheckbox)==null?void 0:m.value)??!0),alerts:!1})]})})};export{E as default};
