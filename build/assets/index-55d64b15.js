var ie=Object.defineProperty,se=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var N=(e,t,s)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,D=(e,t)=>{for(var s in t||(t={}))z.call(t,s)&&N(e,s,t[s]);if(V)for(var s of V(t))P.call(t,s)&&N(e,s,t[s]);return e},B=(e,t)=>se(e,ae(t));var G=(e,t)=>{var s={};for(var a in e)z.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&V)for(var a of V(e))t.indexOf(a)<0&&P.call(e,a)&&(s[a]=e[a]);return s};var W=(e,t,s)=>new Promise((a,o)=>{var u=l=>{try{p(s.next(l))}catch(h){o(h)}},c=l=>{try{p(s.throw(l))}catch(h){o(h)}},p=l=>l.done?a(l.value):Promise.resolve(l.value).then(u,c);p((s=s.apply(e,t)).next())});import{p as K,h as re,k as le,N as ne,x as f,i as d,r as oe,j as i,aK as ue}from"./vendor-6764d205.js";import{dp as F,e2 as $,e9 as ce,e3 as de,o as pe,cZ as me,n as k,bA as fe,t as ve,g as Y,f as Z,i as he,I as v,w as O,ea as xe,eb as ge,v as je,T as be,x as _e,dc as ye}from"./index-a16b43ab.js";import{l as Fe}from"./get-teacher-subdivisions-26155797.js";import{T as Ve}from"./consts-efab0afd.js";import{c as De}from"./create-checkbox-field-fc006bc8.js";const L=new Date,S=new Date(L.getFullYear(),L.getMonth()).toISOString().slice(0,7),J=[{id:1,title:"1"},{id:2,title:"2"},{id:3,title:"3"},{id:4,title:"4"},{id:5,title:"5"},{id:6,title:"6"},{id:7,title:"7"},{id:8,title:"8"},{id:9,title:"9"}],qe=[{id:"scholarship",title:"Справка по стипендии"},{id:"7month",title:"Запрос для субсидии по форме #2 за 7 месяцев"},{id:"13month",title:"Запрос для субсидии по форме #2 за 13 месяцев"}],r=K({name:"pageMounted",sid:"5ny1re"}),Q=K({name:"createApplication",sid:"-ksqzh"}),x=F({reset:r}),g=F({reset:r}),j=F({reset:r}),b=F({reset:r}),_=$({reset:r}),m=ce({reset:r}),q=$({defaultValue:J[0],reset:r}),y=$({reset:r}),M=$({reset:[r,y.value]}),I=F({reset:r}),T=de({reset:r}),U=re("",{name:"$errorMessage",sid:"n5a2x7"}),w=De({reset:r}),X=_.value.map(e=>(e==null?void 0:e.id)==="7month"||(e==null?void 0:e.id)==="13month"),A=le({sid:"-8xdydz",fn:()=>ne({handler:s=>W(void 0,null,function*(){var a=s,{docs:e}=a,t=G(a,["docs"]);return pe.postApplicationFx({formId:me.STUD_ACCOUNTING,args:D(D({},t),Object.fromEntries(e.map((o,u)=>[`docs[${u}]`,o])))})})}),name:"sendForm",method:"createMutation"}),Me=A.$pending;f({and:[{clock:r,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{surname:t,name:s,patronymic:a}=e;return t+" "+s+" "+a},target:x.setValue}],or:{sid:"-x6egqo"}});f({and:[{clock:r,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{group:t}=e;return t},target:g.setValue}],or:{sid:"-w9ylqd"}});f({and:[{clock:r,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{email:t}=e;return t},target:b.setValue}],or:{sid:"-vq60dd"}});f({and:[{clock:r,source:k.applications,fn:({dataUserApplication:e})=>{if(!e)return"";const{phone:t}=e;return t},target:j.setValue}],or:{sid:"-uutqjs"}});f({and:[{clock:[x.value,g.value,j.value,b.value,_.value,m.startDate,m.endDate,q.value,y.value,M.value,I.value,T.value],source:{fio:x.value,group:g.value,tel:j.value,email:b.value,applicationType:_.value,periodStartDate:m.startDate,periodEndDate:m.endDate,copies:q.value,methodObtaining:y.value,mfc:M.value,files:T.value,isFilesRequired:X},fn:({fio:e,group:t,tel:s,email:a,applicationType:o,periodStartDate:u,periodEndDate:c,copies:p,methodObtaining:l,mfc:h,files:ee,isFilesRequired:te})=>{const R=new Date(u),C=new Date(c),E=new Date(S);return e?t?s?a?o?!u||!c?"Выберите период справки":p?l?(l==null?void 0:l.id)===1&&!h?"Выберите место получения справки":te&&ee.length===0?"Приложите файл":R>E?"Дата начала  не может быть позднее текущей даты":C>E?"Дата окончания  не может быть позднее текущей даты":C<R?"Дата окончания справки не может быть раньше даты начала":"":"Выберите способ получения справки":"Выберите кол-во копий справки":"Выберите тип справки":"Введите email":"Введите телефон":"Для заполнения формы необходимо указать учебную группу. Обновите страницу или обратитесь к администратору":"Для заполнения формы необходимо указать ФИО. Обновите страницу или обратитесь к администратору"},target:U}],or:{sid:"-ub156s"}});f({and:[{clock:Q,source:{fio:x.value,group:g.value,tel:j.value,email:b.value,application_type:_.value,date_from:m.startDate,date_to:m.endDate,number_copies:q.value,method_obtaining:y.value,"structural-subdivision":M.value,commentary:I.value,docs:T.value},fn:e=>{var t,s,a,o,u,c,p,l;return B(D({},e),{application_type:(t=(s=e.application_type)===null||s===void 0?void 0:s.title)!==null&&t!==void 0?t:"",method_obtaining:(a=(o=e.method_obtaining)===null||o===void 0?void 0:o.title)!==null&&a!==void 0?a:"","structural-subdivision":(u=(c=e["structural-subdivision"])===null||c===void 0?void 0:c.title)!==null&&u!==void 0?u:"",number_copies:(p=(l=e.number_copies)===null||l===void 0?void 0:l.title)!==null&&p!==void 0?p:"1"})},target:A.start}],or:{sid:"-hh5yrg"}});f({and:[{clock:A.finished.success,target:w.setValue.prepend(()=>!0)}],or:{sid:"-g4s2jo"}});const n={fio:x,group:g,tel:j,email:b,applicationType:_,period:m,copies:q,methodObtaining:y,mfc:M,commentary:I,files:T},We=()=>{const[e,t,s,a,o,u]=d([Q,U,Me,w.value,w.setValue,r]),c=a!=null?a:!1;return oe.useEffect(()=>u(),[]),i.jsx(fe,{isDone:c,children:i.jsxs(ve,{noHeader:!0,children:[i.jsx(Y,{title:"Срок изготовления справки - 3 рабочих дня, не считая дня подачи заявления",icon:null,type:"failure",children:i.jsxs(Z,{d:"column",gap:"0.5rem",ai:"flex-start",jc:"flex-start",children:[i.jsx(H,{title:"Пример справки по стипендии",link:"https://e.mospolytech.ru/old/storage/files/PRIMER_spravka_po_stipendii.pdf"}),i.jsx(H,{title:"Пример запроса на субсидию 7 месяцев",link:"https://e.mospolytech.ru/old/storage/files/PRIMER_zapros_na_subsidiju_7_mesyatsev.pdf"})]})}),i.jsx(Te,{}),i.jsx($e,{}),i.jsx(Se,{}),i.jsx(ke,{}),i.jsx(we,{}),i.jsx(Oe,{}),i.jsx(Ie,{}),i.jsx(Ae,{}),i.jsx(Re,{}),i.jsx(Ce,{}),i.jsx(he,{text:c?"Отправлено":"Отправить",action:e,isLoading:s,completed:a,setCompleted:o,repeatable:!1,buttonSuccessText:"Отправлено",isDone:c,isActive:!t,popUpFailureMessage:t,popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};function Te(){const{value:e,setValue:t}=d(n.fio);return i.jsx(v,{title:"ФИО",placeholder:"ФИО",value:e,setValue:t,isActive:!1,required:!0})}function $e(){const{value:e,setValue:t}=d(n.group);return i.jsx(v,{title:"Учебная группа",placeholder:"Учебная группа",value:e,setValue:t,isActive:!1,required:!0})}function ke(){const{value:e,setValue:t}=d(n.email);return i.jsx(v,{title:"Электронная почта",placeholder:"test@test.com",value:e,setValue:t,type:"email",required:!0})}function Se(){const{value:e,setValue:t}=d(n.tel);return i.jsx(v,{title:"Телефон",placeholder:"Телефон",value:e,setValue:t,type:"tel",mask:!0,required:!0})}function we(){const[e,t]=d([n.applicationType.value,n.applicationType.setValue]);return i.jsx(O,{title:"Тип справки",items:qe,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Тип справки"})}function Oe(){const{startDate:e,setStartDate:t,endDate:s,setEndDate:a}=d(n.period);return i.jsxs(xe,{columnGap:"0.5rem",columns:"1fr 1fr",rows:"1fr",children:[i.jsx(v,{title:"Период c",value:e,setValue:t,type:"month",required:!0,width:"100%",maxValue:S}),i.jsx(v,{title:"по",value:s,setValue:a,type:"month",required:!0,width:"100%",minValue:e,maxValue:S})]})}function Ie(){const[e,t]=d([n.copies.value,n.copies.setValue]);return i.jsx(O,{title:"Количество копий",items:J,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Количество копий"})}function Ae(){const[e,t,s,a]=d([n.methodObtaining.value,n.methodObtaining.setValue,n.mfc.value,n.mfc.setValue]);return i.jsxs(i.Fragment,{children:[i.jsx(O,{title:"Способ получения справки",items:Ve,selected:e,setSelected:t,required:!0,width:"100%",placeholder:"Способ получения справки"}),(e==null?void 0:e.id)===1&&i.jsx(ge,{buttons:Fe,title:"Выберите отделение МФЦ, где желаете получить готовый документ",required:!0,current:s,setCurrent:a})]})}function Re(){const{value:e,setValue:t}=d(n.commentary);return i.jsx(je,{title:"Дополнительная информация",placeholder:"Дополнительная информация",value:e,setValue:t})}function Ce(){const[e,t,s]=d([n.files.value,n.files.setValue,X]);return i.jsxs(Z,{d:"column",gap:"0.5rem",children:[s&&i.jsx(Y,{type:"alert",title:"Прикрепите скан запроса:",children:"Бланк Управления социальной защиты, полученный или скачанный с официального сайта Управления социальной защиты"}),i.jsx(be,{size:5,align:"left",required:s,children:"Приложите файлы"}),i.jsx(_e,{files:e,setFiles:t,isActive:!0,maxFiles:4})]})}const H=({link:e,title:t})=>i.jsx("a",{href:e,style:{width:290,zIndex:1,color:"var(--blue)"},target:"_blank",rel:"noreferrer",children:i.jsx(ye,{children:i.jsxs("div",{className:"file-body",children:[i.jsx("div",{className:"image-container",children:i.jsx(ue,{})}),i.jsx("div",{className:"name-and-size",children:i.jsx("b",{className:"file-name",children:t})})]})})});export{We as default};
