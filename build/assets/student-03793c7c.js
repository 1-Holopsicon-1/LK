var pe=Object.defineProperty,fe=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var O=(e,t,a)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,A=(e,t)=>{for(var a in t||(t={}))ve.call(t,a)&&O(e,a,t[a]);if(B)for(var a of B(t))$e.call(t,a)&&O(e,a,t[a]);return e},U=(e,t)=>fe(e,ke(t));var i=(e,t,a)=>new Promise((r,d)=>{var f=l=>{try{u(a.next(l))}catch(k){d(k)}},R=l=>{try{u(a.throw(l))}catch(k){d(k)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(f,R);u((a=a.apply(e,t)).next())});import{p as n,e as c,x as s,h as g,v as xe,m as ye,cP as Pe,K as j,r as _,q as De,cQ as Se,cR as Ae,j as M}from"./vendor-00bea631.js";import{a5 as Fe,a6 as he,o as q,n as m,d as o,U as we,a7 as be,a8 as Ve,a9 as Re,aa as Ue,ab as Me,ac as ze,ad as je,ae as qe,af as Ce,Z as Ge,G as Ee,p as Ie,q as He,l as L,L as N}from"./index-ed5dff92.js";const K=n({name:"addVisit",sid:"3ybve7"}),Q=n({name:"removeVisit",sid:"w1vlkj"}),p=c(e=>i(void 0,null,function*(){return yield Fe(e),e}),{name:"addVisitFx",sid:"-lbpib"}),v=c(t=>i(void 0,[t],function*({id:e}){return yield he(e),e}),{name:"removeVisitFx",sid:"-wpy18p"}),Te=v.pending,Be=p.pending;s({and:[{clock:K,target:p}],or:{sid:"-tzueuh"}});s({and:[{clock:p.doneData,target:q.close}],or:{sid:"-txn8h1"}});s({and:[{clock:p.failData,fn:e=>({message:m(e,"Не удалось добавить посещение"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-tvg23l"}});s({and:[{clock:p.doneData,fn:()=>({message:"Посещение добавлено",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-tey8ar"}});s({and:[{clock:Q,target:v}],or:{sid:"-sygehx"}});s({and:[{clock:v.doneData,fn:()=>({message:"Посещение удалено",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-skpjnw"}});s({and:[{clock:v.failData,fn:e=>({message:m(e,"Не удалось удалить посещение"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-sfrebn"}});const Oe={addVisit:K,removeVisit:Q},h={addVisitFx:p,removeVisitFx:v},_e={pendingRemoveVisit:Te,pendingAddVisit:Be},Z=n({name:"update",sid:"-tu363b"}),Le=g("",{name:"$search",sid:"gw0gkq"}).on(Z,(e,t)=>t),Ne={update:Z},We={$search:Le},X=n({name:"addFilter",sid:"3pahp2"}),C=n({name:"resetFilters",sid:"sk6sju"}),Y=g({},{name:"$filters",sid:"im200n"}).on(We.$search,(e,t)=>U(A({},e),{fullName:{value:t}})).on(X,(e,{name:t,value:a,strict:r})=>{const d=A({},e);return a?U(A({},d),{[t]:{value:a,strict:r}}):(delete d[t],d)});s({and:[{clock:C,target:Y.reinit}],or:{sid:"-drxh28"}});s({and:[{clock:C,fn:()=>"",target:Ne.update}],or:{sid:"-dpqaos"}});const G={$filters:Y},ct={addFilter:X,resetFilters:C},ee=n({name:"setIsExam",sid:"shha4n"}),Je=g(!1,{name:"$isExam",sid:"4al1my"}).on(ee,(e,t)=>t),rt={$isExam:Je},lt={setIsExam:ee},E=n({name:"load",sid:"-ip5e0a"}),te=n({name:"setPage",sid:"266xmv"}),I=g(0,{name:"$pEStudentsPage",sid:"x1jwze"}).on(te,(e,t)=>t).on(G.$filters,()=>0),w=xe({and:{source:{page:I,filters:G.$filters},effect:a=>i(void 0,[a],function*({filters:e,page:t}){const{data:r}=yield we(t,e);return r.data})},or:{name:"loadPageFx",sid:"-u9ar2s"}});ye({sid:"-mlc78y",fn:()=>Pe({source:j({and:[I,G.$filters],or:{name:"source",sid:"-ne89m1"}}),timeout:200,target:E}),name:"none",method:"debounce"});s({and:[{clock:E,target:w}],or:{sid:"-mil8a5"}});const z=g([],{name:"$pEStudents",sid:"-a7h5qn"}).on(w.doneData,(e,t)=>t.students),Ke=g(0,{name:"$pEStudentsTotalCount",sid:"-hptisk"}).on(w.doneData,(e,t)=>t.totalCount),Qe=j({and:[w.pending,Boolean],or:{name:"$loading",sid:"-way26q"}});s({and:[{clock:h.addVisitFx.doneData,source:z,filter:(e,{studentGuid:t})=>e.some(a=>a.studentGuid===t),fn:(e,t)=>{const a=JSON.parse(JSON.stringify(e)),r=a.find(d=>d.studentGuid===t.studentGuid);return++r.visits,a},target:z}],or:{sid:"-m36zo1"}});const gt={load:E,setPage:te},mt={$loading:Qe,$pEStudents:z,$pEStudentsPage:I,$pEStudentsTotalCount:Ke},se=n({name:"addAdditionPoints",sid:"-gfwajq"}),ae=n({name:"removeAdditionPoints",sid:"s7fafn"}),$=c(t=>i(void 0,[t],function*({id:e}){yield be(e)}),{name:"removeAdditionPointsFx",sid:"-yz8fw7"});s({and:[{clock:ae,target:$}],or:{sid:"-8u8zpu"}});const Ze=$.pending,x=c(e=>i(void 0,null,function*(){return yield Ve(e),e}),{name:"addAdditionPointsFx",sid:"htakn7"});s({and:[{clock:se,target:x}],or:{sid:"-8dr5x0"}});s({and:[{clock:x.doneData,target:q.close}],or:{sid:"-8bjzjk"}});s({and:[{clock:x.doneData,fn:()=>({message:"Баллы добавлены",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-7xt4pj"}});s({and:[{clock:x.failData,fn:e=>({message:m(e,"Не удалось добавить баллы"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-7suzda"}});s({and:[{clock:$.doneData,fn:()=>({message:"Баллы удалены",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-7cd5kg"}});s({and:[{clock:$.failData,fn:()=>({message:"Не удалось удалить баллы",type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-6vvbrm"}});const ut={addAdditionPoints:se,removeAdditionPoints:ae},W={addAdditionPointsFx:x,removeAdditionPointsFx:$},pt={pendingRemoveAdditionPoints:Ze},ne=n({name:"addRegulationPoints",sid:"r944lm"}),oe=n({name:"removeRegulationPoints",sid:"2sncem"}),y=c(t=>i(void 0,[t],function*({id:e}){yield Re(e)}),{name:"removeRegulationPointsFx",sid:"-krrp8n"});s({and:[{clock:oe,target:y}],or:{sid:"mz5r9q"}});const Xe=y.pending,P=c(e=>i(void 0,null,function*(){return yield Ue(e),e}),{name:"addRegulationPointsFx",sid:"-dsdequ"});s({and:[{clock:ne,target:P}],or:{sid:"nfnl2k"}});s({and:[{clock:P.doneData,target:q.close}],or:{sid:"nhurg0"}});s({and:[{clock:P.doneData,fn:()=>({message:"Норматив добавлен",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"nvlma1"}});s({and:[{clock:P.failData,fn:e=>({message:m(e,"Не удалось добавить норматив"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"o0jrma"}});s({and:[{clock:y.doneData,fn:()=>({message:"Норматив удален",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"oh1lf4"}});s({and:[{clock:y.failData,fn:()=>({message:"Не удалось удалить норматив",type:"failure"}),target:o.evokePopUpMessage}],or:{sid:"oxjf7y"}});const ft={addRegulationPoints:ne,removeRegulationPoints:oe},J={addRegulationPointsFx:P,removeRegulationPointsFx:y},kt={pendingRemoveRegulationPoints:Xe},ie=n({name:"setSpecialization",sid:"hrz73m"}),D=c(e=>i(void 0,null,function*(){return yield Me(e),e}),{name:"setSpecializationFx",sid:"-aw52yn"}),Ye=D.pending;s({and:[{clock:ie,target:D}],or:{sid:"-4x6l4a"}});s({and:[{clock:D.failData,fn:e=>({message:m(e,"Не удалось добавить специализацию"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-4uzequ"}});s({and:[{clock:D.doneData,fn:()=>({message:"Специализация добавлена",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-4ehky0"}});const vt={setSpecialization:ie},et={setSpecializationFx:D},$t={pendingSetSpecialization:Ye},de=n({name:"setHealthGroup",sid:"8b83ja"}),S=c(e=>i(void 0,null,function*(){return yield ze(e),e}),{name:"setHealthGroupFx",sid:"a5qgdx"}),tt=S.pending;s({and:[{clock:de,target:S}],or:{sid:"-fydy6l"}});s({and:[{clock:S.failData,fn:e=>({message:m(e,"Не удалось добавить группу здоровья"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-fw6rt5"}});s({and:[{clock:S.doneData,fn:()=>({message:"Группа здоровья добавлена",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-ffoy0b"}});const xt={setHealthGroup:de},st={setHealthGroupFx:S},yt={pendingSetHealthGroup:tt},ce=n({name:"setCurrentStudentId",sid:"-yi431d"}),re=n({name:"resetStudentId",sid:"b5joy3"}),le=n({name:"reload",sid:"-4igy6g"}),b=c(e=>i(void 0,null,function*(){const{data:t}=yield je(e);return t.data}),{name:"loadCurrentStudent",sid:"-htqwl5"});s({and:[{clock:ce,target:b}],or:{sid:"-e9batg"}});const H=g(null,{name:"$selectedStudent",sid:"ffg61i"}).reset(re),at=j({and:[h.addVisitFx.pending,b.pending,Boolean],or:{name:"$loading",sid:"4dn8ye"}});s({and:[{clock:[h.addVisitFx.doneData,h.removeVisitFx.doneData,st.setHealthGroupFx.doneData,et.setSpecializationFx.doneData,W.addAdditionPointsFx.doneData,W.removeAdditionPointsFx.doneData,J.addRegulationPointsFx.doneData,J.removeRegulationPointsFx.doneData],target:le}],or:{sid:"-dugusp"}});s({and:[{clock:le,source:H,filter:e=>!!e,fn:e=>e.studentGuid,target:b}],or:{sid:"-ds9of9"}});s({and:[{clock:b.doneData,target:H}],or:{sid:"-dcvft5"}});const Pt={$selectedStudent:H,$loading:at},Dt={setCurrentStudentId:ce,resetStudentId:re},ge=n({name:"load",sid:"-1nsq63"}),me=n({name:"remove",sid:"wecpac"}),ue=c(()=>i(void 0,null,function*(){const{data:e}=yield qe();return e.competitions}),{name:"loadFx",sid:"-d34r01"}),V=c(e=>i(void 0,null,function*(){return yield Ce(e),e}),{name:"removeFx",sid:"y5v9by"});s({and:[{clock:me,target:V}],or:{sid:"q9j9ts"}});s({and:[{clock:V.failData,fn:e=>({message:m(e,"Не удалось удалить соревнование"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"qna4nt"}});s({and:[{clock:V.doneData,fn:()=>({message:"Соревнование удалено",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"r3rygn"}});s({and:[{clock:ge,target:ue}],or:{sid:"r8q3sw"}});const nt=g([],{name:"$competitions",sid:"dxwaax"}).on(ue.doneData,(e,t)=>t).on(V.doneData,(e,t)=>e.filter(a=>a!==t)),St={load:ge,remove:me},At={$competitions:nt};var F=(e=>(e.AdminAccess="AdminAccess",e.DefaultAccess="DefaultAccess",e.OnlineCourseAccess="OnlineCourseAccess",e.SecretaryAccess="SecretaryAccess",e.SuperUser="SuperUser",e))(F||{});const Ft=({studentGuid:e})=>{const[t,a]=_.useState(new Date().toISOString()),[r,d]=De([_e.pendingAddVisit,Ge.peTeacher]),f=new Date(t),R=[F.AdminAccess,F.SuperUser,F.SecretaryAccess].some(k=>{var T;return(T=d==null?void 0:d.permissions)==null?void 0:T.includes(k)}),u=(Se(f,{start:Ae(new Date,1),end:new Date})||R)&&f.getDay()!==0&&f.getDay()!==1;_.useEffect(()=>{a(new Date().toISOString())},[e]);const l=()=>{Oe.addVisit({studentGuid:e,date:L(t,"numeric")})};return M.jsxs(Ee,{gap:"4px",ai:"flex-start",children:[M.jsx(Ie,{alertMessage:u?"":"Не допустимая дата",type:"date",setValue:a,value:t,hideCross:!0}),M.jsx(He,{isActive:u&&!r,text:`Добавить посещение ${L(t,"numeric")}`,onClick:l,width:"100%",background:N.blue.main,textColor:N.white.main})]})},ht={None:"-",Basic:"Основная",SpecialA:"Специальная А",SpecialB:"Специальная Б",Preparatory:"Подготовительная",HealthLimitations:"ОВЗ",Disabled:"Инвалид"},wt={None:"-",Basketball:"Баскетбол",Volleyball:"Волейбол",Aerobics:"Аэробика",PowerLiftingAndCrossfit:"Пауэрлифтинг и кроссфит",StreetLiftingAndArmLifting:"Стритлифтинг и армлифтинг",GeneralPhysicalTraining:"ОФП",GeneralPhysicalTrainingGym:"ОФП (тренажерный зал)",FootRoom:"Футзал",SMG:"СМГ",TableTennis:"СМГ настольный теннис",NordicWalking:"СМГ скандинавская ходьба",InternalTeam:"Сборная"};export{Ft as A,F as P,G as a,rt as b,ct as c,lt as d,St as e,gt as f,wt as g,ht as h,mt as i,We as j,Ne as k,_e as l,Oe as m,Pt as n,pt as o,ut as p,ft as q,kt as r,At as s,yt as t,xt as u,$t as v,vt as w,Dt as x};
