import{r as L,s as m,j as e,R as U,L as _,aw as $,c0 as z,aQ as K,T as N,c4 as Q,c5 as w,c6 as I,bu as V}from"./vendor-cbee1f3c.js";import{N as R,L as Y,V as W,a4 as C,Y as F,ba as B,bK as q,bL as G,bM as X,bN as T,bO as Z,be as J,bP as ee,bQ as te,bn as se,Z as ie,bR as ae,bS as ne,t as y,Q as u,bT as v,bU as oe,bV as re,X as le,aj as k,K as S,T as O,bW as ce,bX as de,bY as he,af as E,bZ as xe,b_ as pe,aB as ge,a1 as je,W as ue,b$ as fe}from"./index-f356c1dd.js";import{T as A,a as me,A as be}from"./index-d5778bf8.js";import"./get-form-30ba56ae.js";import"./find-current-in-select-ba4611d5.js";import"./getCabinetMask-8c9aa3b2.js";const ye=t=>t==="Male"?"Мужской":"Женский",P=L.memo(ke),ve=m.div`
    width: 100%;
`;function ke({user:t}){const{status:i,sex:o,birthday:r,code:l,faculty:h,course:s,group:c,specialty:a,specialization:d,degreeLength:f,educationForm:b,finance:x,degreeLevel:D,enterYear:M,subdivisions:p,authorIDs:g}=t,H=[{key:"Статус",value:i},{key:"Пол",value:ye(o)},{key:"Дата рождения",value:r},{key:"Код студента",value:l},{key:"Факультет",value:h},{key:"Курс",value:s},{key:"Группа",value:c},{key:"Направление",value:a},{key:"Специализация",value:d},{key:"Срок обучения",value:f},{key:"Форма обучения",value:b},{key:"Вид финансирования",value:x},{key:"Сведения о трудоустройстве",value:!!(p!=null&&p.length)&&(p==null?void 0:p.map((n,j)=>e.jsxs(U.Fragment,{children:[e.jsxs("div",{style:{width:"100%",marginTop:"5px",lineHeight:"1.8rem"},children:[n.subdivision&&e.jsxs("div",{children:["Подразделение: ",n.subdivision]}),n.post&&e.jsxs("div",{children:["Должность: ",n.post]}),n.wage&&n.jobType&&e.jsxs("div",{children:["Ставка: ",n.wage,"; ",n.jobType]})]}),j<p.length-1&&e.jsx(R,{margin:"16px 0",width:"100%"})]},j)))},{key:"Уровень образования",value:D},{key:"Год набора",value:M},{key:"Авторские идентификаторы",value:!!g&&e.jsxs("div",{style:{width:"100%",marginTop:"5px",lineHeight:"1.8rem"},children:[g.wosReasearcher&&e.jsxs("div",{children:["Web of Science Researcher ID: ",g.wosReasearcher]}),g.scopus&&e.jsxs("div",{children:["Scopus Author ID: ",g.scopus]}),g.eLibrary&&e.jsxs("div",{children:["eLibrary Author ID: ",g.eLibrary]})]})}];return e.jsx(ve,{children:H.map(({key:n,value:j})=>!!j&&e.jsx(Y,{keyStr:n,value:j,direction:typeof j=="object"?"vertical":"horizontal"},n))})}const _e=m.div`
    display: flex;
    flex-direction: column;
    gap: 16px;
`,we=m.div``,Ie=({orders:t})=>e.jsxs(_e,{children:[!(t!=null&&t.length)&&e.jsx(W,{children:"Нет приказов"}),t==null?void 0:t.map(i=>e.jsx(we,{children:i},i))]}),Te=L.memo(Ie),Se=({pages:t,currentPage:i})=>{const{data:{user:o}}=C.useUser();return o?e.jsx(F,{children:e.jsx(B,{height:"100%",noAppearanceInMobile:!0,maxWidth:"750px",children:t[i]})}):null},Oe=({pages:t,user:i,currentPage:o,setCurrentPage:r})=>{const{fullName:l,avatar:h,user_status:s,degreeLevel:c}=i,a=s==="stud"?"Студент":"Сотрудник",d=()=>{le.evokeConfirm({message:"Вы точно хотите выйти из аккаунта?",onConfirm:k.logout})};return e.jsxs(q,{children:[e.jsx(G,{fullName:l,width:"calc(100% + 32px)",height:"210px",baseScale:1.5}),e.jsxs(X,{children:[e.jsxs(T,{maxWidth:"530px",height:"180px",orientation:"vertical",children:[e.jsx(Z,{children:e.jsx(J,{name:l,avatar:h,width:"110px",height:"110px",marginRight:"0",border:!0,avatarModal:!0})}),e.jsxs(ee,{children:[e.jsxs(te,{children:[e.jsx("b",{children:l}),e.jsx(W,{maxWidth:"100%",width:"100%",align:"center",fontSize:"0.9rem",children:e.jsx(se,{words:[a,c??""]})})]}),e.jsx(ie,{sliderWidth:"100%",pages:t,currentPage:o,setCurrentPage:r,appearance:!1})]})]}),e.jsx(T,{maxWidth:"250px",height:"fit-content",children:e.jsxs(ae,{children:[e.jsx(_,{to:ne,children:e.jsx(y,{background:u.white.transparent2,icon:e.jsx(v,{width:"30px",background:u.grey.main,children:e.jsx($,{})}),width:"100%",height:"73px",text:"Настройки",direction:"vertical",shrinkTextInMobile:!0})}),e.jsx(oe,{type:"v-button"}),e.jsx(_,{to:re,children:e.jsx(y,{background:u.white.transparent2,icon:e.jsx(v,{width:"30px",background:u.purple.main,children:e.jsx(z,{})}),text:"Изменить",width:"100%",height:"73px",direction:"vertical",shrinkTextInMobile:!0})}),e.jsx(y,{background:u.white.transparent2,icon:e.jsx(v,{width:"30px",background:u.red.main,children:e.jsx(K,{})}),text:"Выйти",height:"73px",onClick:d,width:"calc(50% - 5px)",direction:"vertical",shrinkTextInMobile:!0})]})})]})]})},Ee=({user:t})=>{var o;const i=N();return e.jsx(S,{d:"column",children:(o=t.subdivisions)==null?void 0:o.map((r,l)=>{var h;return e.jsxs(S,{d:"column",gap:"8px",ai:"flex-start",children:[e.jsx(O,{align:"left",size:3,children:r.subdivision}),e.jsx(O,{align:"left",size:4,children:r.post}),e.jsx(A,{title:"Корпоративная электронная почта",icon:e.jsx(Q,{}),description:t==null?void 0:t.email_staff,rightIcon:e.jsx(w,{}),onClick:()=>i.push(ce)}),e.jsx(A,{title:"Внутренний телефон",icon:e.jsx(I,{}),description:r.phone_inner,rightIcon:e.jsx(w,{}),onClick:()=>i.push(de)}),e.jsx(me,{id:"phone_staff",title:"Служебный мобильный телефон",type:"tel",value:t==null?void 0:t.phone_staff,icon:e.jsx(I,{}),description:t==null?void 0:t.phone_staff,objectAction:s=>{he(s),Object.entries(s).forEach(([c,a])=>{k.update({key:c,value:a})})},settingsName:E["settings-personal"],subfields:[{id:"allow_mobphone_in",title:"Показывать мобильный телефон внутри Личного кабинета",type:"toggle",value:t==null?void 0:t.allow_mobphone_in},{id:"allow_mobphone_out",title:"Показывать мобильный телефон на сайте",type:"toggle",value:t==null?void 0:t.allow_mobphone_out}]}),e.jsx(be,{id:"guid_staff",settingsName:E["settings-personal"],title:"Адрес места работы",type:"address",value:((h=t==null?void 0:t.subdivisions)==null?void 0:h.map(s=>({guid_staff:s.guid_staff,post:s.post||"",address:s.address||"",room:s.room||""})))??[],icon:e.jsx(V,{}),description:r.address+", "+r.room,objectAction:s=>{var c;if(xe(s),t!=null&&t.subdivisions){const a=(c=t==null?void 0:t.subdivisions)==null?void 0:c.map(d=>d.guid_staff===s.guid_staff?{...d,...s}:d);k.update({key:"subdivisions",value:a})}},subfields:[{id:"address",title:"Адрес",type:"select"},{id:"room",title:"Номер кабинета",type:"text"}]}),l<t.subdivisions.length-1&&e.jsx(R,{margin:"16px 0",width:"100%"})]},l)})})},Ae=m.div`
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
    align-items: center;
`,Fe=()=>{const{data:{user:t},error:i}=C.useUser(),o=N(),l=pe().get("page"),{allRoutes:h}=ge.useMenu();if(!t||!h)return null;if(i)return e.jsx(je,{text:i});const s=[{title:"Учетная карточка",content:e.jsx(P,{user:t}),id:"userCard"},{title:"Приказы",content:e.jsx(Te,{orders:t.orders}),id:"orders"}],c=[{title:"Учетная карточка",content:e.jsx(P,{user:t}),id:"userCard"},{title:"Контактные данные",content:e.jsx(Ee,{user:t}),id:"contactDetails"}],a=t.user_status==="stud"?s:c,d=a.findIndex(x=>x.id===l)||0,f=d===-1?0:d,b=x=>{o.push({search:`?page=${a[x].id}`})};return e.jsx(ue,{load:function(){},loading:!1,data:[],error:null,children:e.jsxs(Ae,{children:[e.jsx(Oe,{user:t,currentPage:f,setCurrentPage:b,pages:a}),e.jsx(F,{children:e.jsx(B,{height:"100%",maxWidth:"750px",children:e.jsx(fe,{})})}),e.jsx(Se,{currentPage:f,pages:a.map(x=>x.content)})]})})};export{Fe as default};
