import{r as e,j as m}from"./vendor-8312535b.js";import{f as x,ag as C,ah as j,ai as A,B as E,F as k,I as y,S as B,aj as _,A as D,c as P}from"./index-3ed27df5.js";const F=(t=[])=>t.map(a=>({id:a.guid,title:a.name})),O=(t,a,r,h,l,S,u,f,d,g,c,b,i)=>{const n=F(t.head_div);return{title:"Внесение изменений данных подразделения в телефонном справочнике",data:[{fieldName:"guid",title:"Наименование подразделения",value:x(n,a)||F(t.head_div)[0],onChange:s=>r(s.title),editable:n.length>1,width:"100",required:!0,type:"select",items:n,isSpecificSelect:!0},{fieldName:"email",value:h,onChange:l,title:"Общая корпоративная электронная почта",type:"email"},{fieldName:"phone_direct",title:"Общий прямой телефон",type:"tel",value:S,onChange:u,mask:!0},{fieldName:"phone_inner",title:"Общий внутренний телефон",type:"innerPhone",value:f,onChange:d,mask:!0},{fieldName:"address",title:"Адрес рабочего места",type:"select",value:x(C,g),items:C,onChange:s=>{c(s.title),i(j(s.title))},width:"100",editable:!0,required:!0},{fieldName:"room",title:"Номер кабинета",type:"cabinet",mask:!0,value:b,onChange:i,editable:!0,required:!0}]}},M=()=>{const[t,a]=e.useState(null),[r,h]=e.useState(""),[l,S]=e.useState(""),[u,f]=e.useState(""),[d,g]=e.useState(""),[c,b]=e.useState(""),[i,n]=e.useState(""),[s,v]=e.useState(!1),[I,N]=e.useState(!1),p=s!=null?s:!1,{data:{user:o}}=A.useUser();return e.useEffect(()=>{o&&a(O(o,r,h,l,S,u,f,d,g,c,b,i,n))},[o==null?void 0:o.guid,r,l,u,d,c,i]),m.jsx(E,{isDone:p,children:!!t&&!!a&&m.jsxs(k,{noHeader:!0,children:[m.jsx(y,{...t,collapsed:p,setData:a}),m.jsx(B,{text:p?"Отправлено":"Отправить",action:()=>_(D.EDIT_PHONEBOOK_SUBDIVISION,[t],N,v,!0),isLoading:I,completed:s,setCompleted:v,repeatable:!1,buttonSuccessText:"Отправлено",isDone:p,isActive:P(t),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{M as default};
