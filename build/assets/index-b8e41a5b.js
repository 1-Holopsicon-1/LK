import{r as e,j as i}from"./vendor-91dd51cf.js";import{s as L,d7 as f,da as U,B as G,F as O,h as W,db as z,S as H,aj as I,j as K,c as t}from"./index-2caaee2c.js";import{C as V}from"./error-161e76dd.js";const Y=s=>{const{surname:a,name:l,patronymic:o,group:r,email:n,phone:p}=s;return{title:"Контактная информация",data:[{title:"ФИО",fieldName:"fio",value:a+" "+l+" "+o,editable:!1},{title:"Учебная группа",fieldName:"group",type:"tel",value:r,editable:!1},{title:"Электронная почта",fieldName:"email",type:"email",value:n,editable:!0,required:!0},{title:"Телефон",fieldName:"phone",type:"tel",value:p,editable:!0,required:!0}],links:[{title:"Согласие на обработку моих персональных данных",link:"https://e.mospolytech.ru/old/storage/files/Form_17_PD_2022.DOC",type:"document"},{title:"Согласие на обработку персональных данных членов моей семьи",link:"https://e.mospolytech.ru/old/storage/files/PD_agreement_minor.docx",type:"document"}],optionalCheckbox:{title:"Я подтверждаю, что никто из членов семьи не имеет прописки в пределах трассы А-107",value:!1,fieldName:"isCorrectRegistration",editable:!0}}},$=[{id:"wife",title:"Жена"},{id:"husband",title:"Муж"},{id:"son",title:"Сын"},{id:"daughter",title:"Дочь"}],J=()=>({title:"Состав семьи",hint:"Необходимо указать актуальную информацию о членах семьи",data:[],default:[[{fieldName:"relation",title:"Степень родства",value:null,type:"select",items:$,required:!0,width:"100%"},{fieldName:"fio",title:"ФИО",value:"",required:!0,width:"40%"},{fieldName:"bdate",title:"Дата рождения",value:"",type:"date",required:!0,width:"30%"}]],addNew:!0}),Q=()=>({title:"Свидетельство о рождении",data:[],documents:{files:[],fieldName:"birthCertificate",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),X=()=>({title:"Согласие на обработку персональных данных членов семьи",data:[],documents:{files:[],fieldName:"consentToProcessingPersonalData",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),Z=()=>({title:"Свидетельство о регистрации брака",data:[],documents:{files:[],fieldName:"marriageRegistrationCertificate",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),ee=()=>({title:"Регистрация заявителя",data:[],documents:{files:[],fieldName:"registrationApplicant",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),te=()=>({title:"Регистрация членов семьи",data:[],documents:{files:[],fieldName:"registrationFamilyMembers",required:!0,maxFiles:1,allowedTypes:["pdf"]}}),se=()=>{var T;var s;const[a,l]=e.useState(null),{data:{dataUserApplication:o}}=L.useApplications(),[r,n]=e.useState(!1),[p,P]=e.useState(!1),[d,S]=e.useState(null),[j,k]=e.useState(null),b=r!=null?r:!1,[g,q]=e.useState(f.kvdCert),[F,A]=e.useState(f.fluorographyCert),[C,M]=e.useState(f.vichRwCert),[y,_]=e.useState(f.graftCert),[h,x]=e.useState(null),[u,v]=e.useState(null),[m,w]=e.useState(null),[c,N]=e.useState(null),[D,R]=e.useState(null),B=!!a&&!!d&&!!j&&!!h&&!!u&&!!m&&!!c&&!!D;if(e.useEffect(()=>{o&&(l(Y(o)),S(J()),k(U()),x(Q()),v(X()),w(Z()),N(ee()),R(te()))},[o]),!B)return null;if(new Date<new Date(2024,8,15))return i.jsx(V,{});const E=[[{dataForm:a,setDataForm:l}],[{dataForm:d,setDataForm:S}],[{dataForm:g,setDataForm:q}],[{dataForm:F,setDataForm:A}],[{dataForm:C,setDataForm:M}],[{dataForm:y,setDataForm:_}],[{dataForm:h,setDataForm:x},{dataForm:u,setDataForm:v},{dataForm:m,setDataForm:w},{dataForm:c,setDataForm:N},{dataForm:D,setDataForm:R}]];return i.jsx(G,{isDone:b,children:i.jsxs(O,{children:[i.jsx(W,{size:4,align:"left",children:"Предоставление права проживания в семейной комнате"}),i.jsx(z,{stagesConfig:E}),i.jsx(H,{text:"Отправить",action:()=>I(K.USG_GETHOSTEL_FAMILY,[a,d,g,F,C,y,h,u,m,c],P,n),isLoading:p,completed:r,setCompleted:n,repeatable:!1,buttonSuccessText:"Отправлено",isDone:b,isActive:((T=(s=a.optionalCheckbox)===null||s===void 0?void 0:s.value)!=null?T:!0)&&t(a)&&t(d)&&t(g)&&t(F)&&t(C)&&t(y)&&t(u)&&t(m)&&t(c)&&t(D),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{se as default};
