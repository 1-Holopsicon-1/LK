var j=Object.defineProperty,N=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(s,e,t)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))y.call(e,t)&&f(s,t,e[t]);if(d)for(var t of d(e))R.call(e,t)&&f(s,t,e[t]);return s},x=(s,e)=>N(s,h(e));import{r as o,q as T,cM as A,j as n}from"./vendor-00bea631.js";import{s as C,bg as D,B as k,F as B,I as E,S as W,j as M,c as P,bh as U}from"./index-d824e111.js";import{s as $}from"./send-hr-form-work-transfer-82982d5e.js";const q=(s,e,t)=>{const{surname:i,name:l,patronymic:a}=s;return{title:"Заявление на изменение ставки",data:[{title:"ФИО",value:i+" "+l+" "+a,fieldName:"fio",type:"simple-text"},{title:"",type:"simple-text",value:e[t].jobGuid.toString(),fieldName:"jobGuid"},{title:"Должность",type:"simple-text",fieldName:"post",value:e[t].jobTitle.toString()},{title:"Подразделение",type:"simple-text",value:e[t].subDivision.toString(),fieldName:"subDivision"},{title:"Текущая ставка",type:"simple-text",value:e[t].rate.toString(),fieldName:"currentRate"},{title:"Желаемая ставка",type:"select",fieldName:"newRate",value:"",editable:!0,required:!0,width:"100%",items:[{id:0,title:"0.25"},{id:1,title:"0.5"},{id:2,title:"1"}]}]}},w=s=>{const e=s.find(t=>t.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},_=()=>{var m;var s;const[e,t]=o.useState(null),{data:{dataUserApplication:i,dataWorkerApplication:l}}=C.useApplications(),{loading:a}=D.useBufferWorkTransfer(),[r,c]=o.useState(!1),[b,g]=o.useState({}),F=T(U),u=r!=null?r:!1,{id:S}=A(),p=+S;return o.useEffect(()=>{e&&i&&g(w(e.data))},[e]),o.useEffect(()=>{i&&l&&!a&&t(q(i,l,p))},[i,p,a]),n.jsx(k,{isDone:u,children:!!e&&!!t&&n.jsxs(B,{children:[n.jsx(E,x(v({},e),{collapsed:u,setData:t,specialFieldsNameConfig:b})),n.jsx(W,{text:"Отправить",action:()=>$(M.HOLIDAY_WORK,[e],c,F),isLoading:a,completed:r,setCompleted:c,repeatable:!1,buttonSuccessText:"Отправлено",isDone:u,isActive:P(e)&&((m=(s=e.optionalCheckbox)===null||s===void 0?void 0:s.value)!=null?m:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{_ as default};
