var ee=Object.defineProperty,te=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var j=(t,e,a)=>e in t?ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,p=(t,e)=>{for(var a in e||(e={}))ie.call(e,a)&&j(t,a,e[a]);if(_)for(var a of _(e))re.call(e,a)&&j(t,a,e[a]);return t},b=(t,e)=>te(t,ae(e));var W=(t,e,a)=>new Promise((i,n)=>{var r=s=>{try{o(a.next(s))}catch(v){n(v)}},c=s=>{try{o(a.throw(s))}catch(v){n(v)}},o=s=>s.done?i(s.value):Promise.resolve(s.value).then(r,c);o((a=a.apply(t,e)).next())});import{dn as ne,dp as z,dq as R,dr as y,ds as oe,dt as w,p as le,e as Y,bG as ue,h as se,l as D,q as C,j as l,s as de,r as m,F as ce,az as ve}from"./vendor-8a1e4858.js";import{as as B,at as Q,q as me,dR as J,dS as K,d0 as fe,p as pe,s as ge,a4 as E,ck as he,W as be,t as ye,bA as we,g as xe,dT as ke,dU as Ge,i as Ne,bB as Me}from"./index-7b7b97a2.js";const Fe=()=>B.get(`?getRequestHighComfort&token=${Q()}`),Pe=t=>{const e=new FormData;e.set("token",Q()),e.set("postRequestHighComfort","1");for(const[a,i]of Object.entries(t))e.set(a,i);return B.post("?postRequestHighComfort=1",e,{headers:{"Content-Type":"multipart/form-data"}})};function A(t,e,a){ne(2,arguments);var i=z(t,a),n=z(e,a);return i.getTime()===n.getTime()}function x(t,e){if(t.one!==void 0&&e===1)return t.one;var a=e%10,i=e%100;return a===1&&i!==11?t.singularNominative.replace("{{count}}",String(e)):a>=2&&a<=4&&(i<10||i>20)?t.singularGenitive.replace("{{count}}",String(e)):t.pluralGenitive.replace("{{count}}",String(e))}function u(t){return function(e,a){return a!=null&&a.addSuffix?a.comparison&&a.comparison>0?t.future?x(t.future,e):"через "+x(t.regular,e):t.past?x(t.past,e):x(t.regular,e)+" назад":x(t.regular,e)}}var Se={lessThanXSeconds:u({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:u({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:function(e,a){return a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"через полминуты":"полминуты назад":"полминуты"},lessThanXMinutes:u({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:u({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:u({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:u({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:u({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:u({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:u({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:u({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:u({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:u({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:u({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:u({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:u({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},We=function(e,a,i){return Se[e](a,i)};const Re=We;var De={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},Ce={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},$e={any:"{{date}}, {{time}}"},qe={date:R({formats:De,defaultWidth:"full"}),time:R({formats:Ce,defaultWidth:"full"}),dateTime:R({formats:$e,defaultWidth:"any"})};const Te=qe;var q=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function _e(t){var e=q[t];switch(t){case 0:return"'в прошлое "+e+" в' p";case 1:case 2:case 4:return"'в прошлый "+e+" в' p";case 3:case 5:case 6:return"'в прошлую "+e+" в' p"}}function H(t){var e=q[t];return t===2?"'во "+e+" в' p":"'в "+e+" в' p"}function je(t){var e=q[t];switch(t){case 0:return"'в следующее "+e+" в' p";case 1:case 2:case 4:return"'в следующий "+e+" в' p";case 3:case 5:case 6:return"'в следующую "+e+" в' p"}}var ze={lastWeek:function(e,a,i){var n=e.getUTCDay();return A(e,a,i)?H(n):_e(n)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:function(e,a,i){var n=e.getUTCDay();return A(e,a,i)?H(n):je(n)},other:"P"},Ee=function(e,a,i,n){var r=ze[e];return typeof r=="function"?r(a,i,n):r};const Ae=Ee;var He={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},Le={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},Oe={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},Ve={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},Ue={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},Ie={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},Xe={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},Ye=function(e,a){var i=Number(e),n=a==null?void 0:a.unit,r;return n==="date"?r="-е":n==="week"||n==="minute"||n==="second"?r="-я":r="-й",i+r},Be={ordinalNumber:Ye,era:y({values:He,defaultWidth:"wide"}),quarter:y({values:Le,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:y({values:Oe,defaultWidth:"wide",formattingValues:Ve,defaultFormattingWidth:"wide"}),day:y({values:Ue,defaultWidth:"wide"}),dayPeriod:y({values:Ie,defaultWidth:"any",formattingValues:Xe,defaultFormattingWidth:"wide"})};const Qe=Be;var Je=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,Ke=/\d+/i,Ze={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},et={any:[/^д/i,/^н/i]},tt={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},at={any:[/1/i,/2/i,/3/i,/4/i]},it={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},rt={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},nt={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},ot={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},lt={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},ut={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},st={ordinalNumber:oe({matchPattern:Je,parsePattern:Ke,valueCallback:function(e){return parseInt(e,10)}}),era:w({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any"}),quarter:w({matchPatterns:tt,defaultMatchWidth:"wide",parsePatterns:at,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:w({matchPatterns:it,defaultMatchWidth:"wide",parsePatterns:rt,defaultParseWidth:"any"}),day:w({matchPatterns:nt,defaultMatchWidth:"wide",parsePatterns:ot,defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:lt,defaultMatchWidth:"wide",parsePatterns:ut,defaultParseWidth:"any"})};const dt=st;var ct={code:"ru",formatDistance:Re,formatLong:Te,formatRelative:Ae,localize:Qe,match:dt,options:{weekStartsOn:1,firstWeekContainsDate:1}};const $=ct,L={superiorRoom:null,error:null},vt=()=>({data:D(O).superiorRoom,loading:D(k.pending),error:D(O).error}),mt=le({name:"postSuperiorRoom",sid:"8fhu4k"}),ft=Y(t=>W(void 0,null,function*(){}),{name:"postSuperiorRoomFx",sid:"-fra7ot"});ue({from:mt,to:ft});const k=Y(()=>W(void 0,null,function*(){try{return(yield Fe()).data}catch(t){throw new Error("Не удалось загрузить раздел")}}),{name:"getSuperiorRoomFx",sid:"drkyz"}),O=se(L,{name:"$superiorRoomStore",sid:"-qtf9jq"}).on(k,t=>b(p({},t),{error:null})).on(k.doneData,(t,e)=>b(p({},t),{superiorRoom:e})).on(k.failData,(t,e)=>b(p({},t),{error:e.message})).on(me.userGuid,()=>p({},L)),pt={useSuperiorRoom:vt},gt={getSuperiorRoomFx:k},ht=t=>{const e=t.find(i=>i.fieldName==="address");let a=null;return e!=null&&e.value&&(e==null?void 0:e.value).id!=="pk"&&(a="not_dorm11"),{reason_academic:a}},Z=`Подача заявок открыта с ${C(new Date(J),"HH:mm d MMMM",{locale:$})} до ${C(new Date(K),"HH:mm d MMMM",{locale:$})}!`,bt=t=>{const e=new Date;return e<new Date(J)?Z:e>new Date(K)?"Подача заявок закрыта":""},V=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],U=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],I=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"},{id:3,title:"Семейная комната"}],X=[{id:2,title:"Трое в комнате"}],yt=[{id:"ms",title:"Общежитие № 1, г. Москва, ул. Малая Семеновская, д. 12"},{id:"m",title:"Общежитие № 5, г. Москва, ул. Михалковская, д. 7, к. 3"},{id:"bg",title:"Общежитие № 6, г. Москва, ул. Бориса Галушкина, д. 9"},{id:"pk",title:"Общежитие № 11, г. Москва, ул. Павла Корчагина, д. 22А, к. 2"}],wt=[{value:!1,title:"Общественная",files:[],maxFiles:10,required:!0,fieldName:"society",checkboxCondition:"straight"},{value:!1,title:"Научная",files:[],maxFiles:10,required:!0,fieldName:"science",checkboxCondition:"straight"},{value:!1,title:"Спортивная",files:[],maxFiles:10,required:!0,fieldName:"sport",checkboxCondition:"straight"},{value:!1,title:"Творческая",files:[],maxFiles:10,required:!0,fieldName:"creativity",checkboxCondition:"straight"}],xt=(t,e)=>{var a,i,n,r,c,o,s,v,g;const{fio:G,phone:N,email:M}=t,d=e==null||(a=e.data[3])===null||a===void 0||(a=a.value)===null||a===void 0?void 0:a.id,F=e==null||(i=e.data[7])===null||i===void 0?void 0:i.value,P=e==null||(n=e.optionalCheckbox)===null||n===void 0?void 0:n.value;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:G,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:(r=e==null||(c=e.data[1])===null||c===void 0?void 0:c.value)!==null&&r!==void 0?r:N,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:(o=e==null||(s=e.data[2])===null||s===void 0?void 0:s.value)!==null&&o!==void 0?o:M,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:(v=e==null||(g=e.data[3])===null||g===void 0?void 0:g.value)!==null&&v!==void 0?v:null,fieldName:"address",type:"select",items:yt,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:d==="bg"?U:d==="pk"?X:d==="ms"?I:V,width:"100%",editable:!!d,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:d==="bg"?U:d==="pk"?X:d==="ms"?I:V,width:"100%",editable:!!d,required:!0,specialType:"not_dorm11"},{title:"Участие во внеучебной деятельности",value:null,fieldName:"extracurricular",type:"checkbox-docs",items:wt,width:"100%",editable:!0,required:!1},{title:"Необходимые документы приложены",type:"checkbox",value:!!F,fieldName:"",editable:!0,required:!0}],alert:l.jsx(l.Fragment,{children:Z}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:l.jsxs(l.Fragment,{children:["С"," ",l.jsx("a",{href:"https://mospolytech.ru/upload/medialibrary/dcd/aj5km0q67pkjw737j8g5hynmz2dfhlxb/Prikaz-_1564_OD-ot-28.12.2024-Ob-utverzhdenii-razmerov-platy-za-dopolnitelnuyu-uslugu.pdf",target:"_blank",rel:"noreferrer",children:"приказом"})," ","об утверждении размеров платы за дополнительную услугу в студенческом городке от 28.12.2024 N1564-ОД ознакомлен(а)"]}),value:!!P,fieldName:"",editable:!0}}},kt=(t,e,a)=>{e(!0);const i=fe(t);try{Pe(i),e(!1),a(!0)}catch(n){e(!1),pe.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${n}`,type:"failure",time:3e4})}},Gt=de.div.withConfig({componentId:"sc-15p7xv6-0"})(["display:flex;justify-content:center;width:100%;height:",";padding:10px;color:var(--text);@media (max-width:1000px){padding:0;}"],({isDone:t})=>t&&"100%"),Pt=()=>{var t,e,a,i,n;const[r,c]=m.useState(null),{data:o,error:s}=pt.useSuperiorRoom(),[v,g]=m.useState(0),[G,N]=m.useState(!1),[M,d]=m.useState(!1),[F,P]=m.useState({}),h=(t=G||!(o!=null&&o.is_avaliable))!==null&&t!==void 0?t:!1,{data:{user:S}}=ge.useUser();if((S==null?void 0:S.educationForm)!=="Очная")return l.jsx(E,{text:"Данный раздел недоступен для вашей формы обучения"});const T=bt();return he&&T?l.jsx(E,{text:T}):(m.useEffect(()=>{o&&c(xt(o,r))},[o,v]),m.useEffect(()=>{if(r){var f;g(r==null||(f=r.data[3])===null||f===void 0||(f=f.value)===null||f===void 0?void 0:f.id)}},[r==null||(e=r.data[3])===null||e===void 0?void 0:e.value]),m.useEffect(()=>{r&&P(ht(r.data))},[r]),l.jsx(be,{load:()=>gt.getSuperiorRoomFx(),loading:!o,error:s,data:o,children:l.jsx(Gt,{isDone:h,children:!!r&&!!c&&l.jsxs(ye,{children:[l.jsx(we,b(p({},r),{collapsed:h,setData:c,specialFieldsNameConfig:F})),l.jsx(xe,{title:"Информация по заявке",type:"info",icon:l.jsx(ce,{}),visible:h,children:l.jsxs("p",{children:["Ваша заявка направлена на рассмотрение жилищной комиссии. С результатами распределения мест и датой заселения можно будет ознакомиться"," ",C(new Date(ke),"d MMMM",{locale:$})," в Личном кабинете в разделе ",l.jsx(ve,{to:Ge,children:"«Список нуждающихся в общежитии»"}),"."]})}),l.jsx(Ne,{text:o!=null&&o.is_avaliable?"Отправить":"Отправлено",action:()=>kt(r,d,N),isLoading:M,completed:G,setCompleted:N,repeatable:!1,buttonSuccessText:"Отправлено",isDone:h,isActive:Me(r)&&((a=(i=r.optionalCheckbox)===null||i===void 0?void 0:i.value)!==null&&a!==void 0?a:!0),popUpFailureMessage:h?(n=o==null?void 0:o.error_text)!==null&&n!==void 0?n:"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{Pt as default};
