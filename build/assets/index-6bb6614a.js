import{j as s,r as i}from"./vendor-8312535b.js";import{s as p,B as m,F as f,I as v,S as N,aj as x,j as b,c as A}from"./index-3ed27df5.js";const F=[{id:0,title:"медицинские показания"},{id:1,title:"призыв на военную службу"},{id:2,title:"обстоятельства личного характера"}],g=e=>({title:"Предоставление академического отпуска",data:[{title:"Телефон",type:"tel",mask:!0,fieldName:"phone",editable:!0,required:!0,value:e.phone},{title:"Email",type:"email",fieldName:"email",value:e.email,editable:!0,required:!0},{title:"Срок предоставления c:",type:"date",fieldName:"time-before",value:"",editable:!0,required:!0},{title:"по:",type:"date",fieldName:"time-after",value:"",editable:!0,required:!0},{title:"Причина предоставления",type:"select",fieldName:"reason",width:"100",value:null,required:!0,editable:!0,items:F},{title:"Академический отпуск по обстоятельствам личного характера необходим по следующей(-им) причине(-ам):",type:"textarea",fieldName:"pers-cases",value:"",editable:!0,placeholder:"укажите причины личного характера",specialType:"personalNature",required:!0},{title:"Количество листов подтверждающих документов",type:"text",fieldName:"num_sheets",value:null,editable:!0,required:!0},{title:"Комментарий к заявке",type:"textarea",fieldName:"comment",value:"",editable:!0}],hint:s.jsx(s.Fragment,{children:"В случае предоставления академического отпуска по медицинским показаниям необходимо загрузить подтверждающие медицинские документы."}),documents:{files:[],fieldName:"docs",maxFiles:6,required:!1}}),S=e=>{const t=e.find(l=>l.fieldName==="reason");let a=null;return t!=null&&t.value&&(t==null?void 0:t.value).title==="обстоятельства личного характера"&&(a="personalNature"),{reason_academic:a}},y=()=>{const[e,t]=i.useState(null),[a,l]=i.useState(!1),[d,n]=i.useState(!1),[o,c]=i.useState({}),r=a!=null?a:!1,{data:{dataUserApplication:u}}=p.useApplications();return i.useEffect(()=>{u&&t(g(u))},[u]),i.useEffect(()=>{e&&u&&c(S(e.data))},[e]),s.jsx(m,{isDone:r,children:!!e&&!!t&&s.jsxs(f,{children:[s.jsx(v,{...e,collapsed:r,setData:t,specialFieldsNameConfig:o}),s.jsx(N,{text:r?"Отправлено":"Отправить",action:()=>x(b.CRS_ACADEMVAC,[e],n,l),isLoading:d,completed:a,setCompleted:l,repeatable:!1,buttonSuccessText:"Отправлено",isDone:r,isActive:A(e,o),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{y as default};
