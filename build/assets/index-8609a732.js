import{j as t,r as p,n as h}from"./vendor-0433f525.js";import{bu as j,G as x,h as f,bj as m,bv as P,aJ as k,ai as G,a0 as O,P as v,bw as E,bx as L,by as R,Z as S,b as T}from"./index-f22e44ea.js";const b={Основное:0,"Кадровая среда":1,"Учебная деятельность":2,Коммуникация:3,"Научная деятельность":4,"Находится в разработке":5},w=(r,u,o)=>r?Object.values(r).filter(({getIsVisibleForCurrentUser:a,guidsAllowed:s})=>(!(a&&u)||a(u))&&s?s.includes(o||""):!0).reduce((a,s)=>{const n=s!=null&&s.group?j[s.group]:j.OTHER;return a[n]||(a[n]={}),a[n][s.id]=s,a},{}):{},y=({title:r,links:u,doNotShow:o,orientation:c,background:a,shadow:s=!0,mode:n})=>t.jsxs(x,{d:"column",children:[t.jsx(f,{size:4,align:"left",bottomGap:!0,children:r}),t.jsxs(x,{gap:"8px",$wrap:!0,children:[Object.values(u).map(e=>{if((e==null?void 0:e.show)!==!1&&o!==(e==null?void 0:e.id))return t.jsx(m,{background:a,orientation:c,mode:n,shadow:s,...e,color:e.color.length?e.color:"blue"},e.id)}),o!=="all"&&t.jsx(P,{})]})]}),M=()=>{const{visibleRoutes:r,allRoutes:u}=k.useMenu(),[o,c]=p.useState(null),[a,s]=p.useState(""),n=h(S.peTeacher),e=h(T.userGuid),g=p.useMemo(()=>w(r,n,e),[r,n]),{data:{user:i}}=G.useUser();return r?t.jsx(O,{padding:"10px",children:t.jsxs(v,{children:[t.jsx(E,{placeholder:"Поиск разделов",whereToSearch:u??{},searchEngine:L,setResult:c,setExternalValue:s,validationCheck:!0,loadingOnType:!0}),!o&&t.jsx(x,{d:"column",gap:"24px",children:a.length===0&&Object.keys(g).sort((l,d)=>b[l]-b[d]).map(l=>{const d=g[l];return t.jsx(y,{title:l==="Кадровая среда"&&(i==null?void 0:i.user_status)==="stud"?"Договоры и оплаты":l,doNotShow:"all",align:"left",links:d},l)})}),t.jsx(R,{pages:o})]})}):null};export{M as default};
