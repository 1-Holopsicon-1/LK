var N=Object.defineProperty,F=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var d=(s,e,t)=>e in s?N(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))y.call(e,t)&&d(s,t,e[t]);if(f)for(var t of f(e))R.call(e,t)&&d(s,t,e[t]);return s},x=(s,e)=>F(s,h(e));import{r as o,n as T,cM as A,j as r}from"./vendor-d78621d5.js";import{s as D,bg as B,B as C,F as k,I as E,S as W,j as M,c as P,bh as U}from"./index-9478e959.js";import{s as w}from"./send-hr-form-work-transfer-ce01f4de.js";const G=(s,e,t)=>{const{surname:l,name:i,patronymic:a}=s;return{title:"Заявление на изменение ставки",data:[{title:"ФИО",value:l+" "+i+" "+a,fieldName:"fio",type:"simple-text"},{title:"",type:"simple-text",value:e[t].jobGuid.toString(),fieldName:"jobGuid"},{title:"Должность",type:"simple-text",fieldName:"post",value:e[t].jobTitle.toString()},{title:"Подразделение",type:"simple-text",value:e[t].subDivision.toString(),fieldName:"subDivision"},{title:"Текущая ставка",type:"simple-text",value:e[t].rate.toString(),fieldName:"currentRate"},{title:"Желаемая ставка",type:"select",fieldName:"newRate",value:"",editable:!0,required:!0,width:"100%",items:[{id:0,title:"0.25"},{id:1,title:"0.5"},{id:2,title:"1"}]}]}},H=s=>{const e=s.find(t=>t.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},I=()=>{var p,m;const[s,e]=o.useState(null),{data:{dataUserApplication:t,dataWorkerApplication:l}}=D.useApplications(),{loading:i}=B.useBufferWorkTransfer(),[a,u]=o.useState(!1),[g,b]=o.useState({}),S=T(U),n=a!=null?a:!1,{id:j}=A(),c=+j;return o.useEffect(()=>{s&&t&&b(H(s.data))},[s]),o.useEffect(()=>{t&&l&&!i&&e(G(t,l,c))},[t,c,i]),r.jsx(C,{isDone:n,children:!!s&&!!e&&r.jsxs(k,{children:[r.jsx(E,x(v({},s),{collapsed:n,setData:e,specialFieldsNameConfig:g})),r.jsx(W,{text:"Отправить",action:()=>w(M.HOLIDAY_WORK,[s],u,S),isLoading:i,completed:a,setCompleted:u,repeatable:!1,buttonSuccessText:"Отправлено",isDone:n,isActive:P(s)&&((m=(p=s.optionalCheckbox)==null?void 0:p.value)!=null?m:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{I as default};
