var ue=Object.defineProperty,pe=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var I=(e,t,a)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,x=(e,t)=>{for(var a in t||(t={}))ke.call(t,a)&&I(e,a,t[a]);if(E)for(var a of E(t))ve.call(t,a)&&I(e,a,t[a]);return e},h=(e,t)=>pe(e,fe(t));import{p as n,e as i,x as s,h as c,v as $e,m as xe,cP as ye,K as V,r as H,n as Pe,cQ as De,cR as Se,j as w}from"./vendor-31894644.js";import{a5 as Ae,a6 as Fe,o as R,n as r,d as o,U as he,a7 as we,a8 as be,a9 as Ve,aa as Re,ab as Ue,ac as Me,ad as ze,ae as je,af as Ce,Z as Ge,G as qe,p as Ee,q as Ie,l as T,L as B}from"./index-0f8b6250.js";const L=n({name:"addVisit",sid:"3ybve7"}),N=n({name:"removeVisit",sid:"w1vlkj"}),l=i(async e=>(await Ae(e),e),{name:"addVisitFx",sid:"-lbpib"}),m=i(async({id:e})=>(await Fe(e),e),{name:"removeVisitFx",sid:"-wpy18p"}),He=m.pending,Te=l.pending;s({and:[{clock:L,target:l}],or:{sid:"-tzueuh"}});s({and:[{clock:l.doneData,target:R.close}],or:{sid:"-txn8h1"}});s({and:[{clock:l.failData,fn:e=>({message:r(e,"Не удалось добавить посещение"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-tvg23l"}});s({and:[{clock:l.doneData,fn:()=>({message:"Посещение добавлено",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-tey8ar"}});s({and:[{clock:N,target:m}],or:{sid:"-sygehx"}});s({and:[{clock:m.doneData,fn:()=>({message:"Посещение удалено",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-skpjnw"}});s({and:[{clock:m.failData,fn:e=>({message:r(e,"Не удалось удалить посещение"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-sfrebn"}});const Be={addVisit:L,removeVisit:N},P={addVisitFx:l,removeVisitFx:m},Oe={pendingRemoveVisit:He,pendingAddVisit:Te},W=n({name:"update",sid:"-tu363b"}),_e=c("",{name:"$search",sid:"gw0gkq"}).on(W,(e,t)=>t),Le={update:W},Ne={$search:_e},J=n({name:"addFilter",sid:"3pahp2"}),U=n({name:"resetFilters",sid:"sk6sju"}),K=c({},{name:"$filters",sid:"im200n"}).on(Ne.$search,(e,t)=>h(x({},e),{fullName:{value:t}})).on(J,(e,{name:t,value:a,strict:g})=>{const d=x({},e);return a?h(x({},d),{[t]:{value:a,strict:g}}):(delete d[t],d)});s({and:[{clock:U,target:K.reinit}],or:{sid:"-drxh28"}});s({and:[{clock:U,fn:()=>"",target:Le.update}],or:{sid:"-dpqaos"}});const M={$filters:K},dt={addFilter:J,resetFilters:U},Q=n({name:"setIsExam",sid:"shha4n"}),We=c(!1,{name:"$isExam",sid:"4al1my"}).on(Q,(e,t)=>t),ct={$isExam:We},rt={setIsExam:Q},z=n({name:"load",sid:"-ip5e0a"}),Z=n({name:"setPage",sid:"266xmv"}),j=c(0,{name:"$pEStudentsPage",sid:"x1jwze"}).on(Z,(e,t)=>t).on(M.$filters,()=>0),D=$e({and:{source:{page:j,filters:M.$filters},effect:async({filters:e,page:t})=>{const{data:a}=await he(t,e);return a.data}},or:{name:"loadPageFx",sid:"-u9ar2s"}});xe({sid:"-mlc78y",fn:()=>ye({source:V({and:[j,M.$filters],or:{name:"source",sid:"-ne89m1"}}),timeout:200,target:z}),name:"none",method:"debounce"});s({and:[{clock:z,target:D}],or:{sid:"-mil8a5"}});const b=c([],{name:"$pEStudents",sid:"-a7h5qn"}).on(D.doneData,(e,t)=>t.students),Je=c(0,{name:"$pEStudentsTotalCount",sid:"-hptisk"}).on(D.doneData,(e,t)=>t.totalCount),Ke=V({and:[D.pending,Boolean],or:{name:"$loading",sid:"-way26q"}});s({and:[{clock:P.addVisitFx.doneData,source:b,filter:(e,{studentGuid:t})=>e.some(a=>a.studentGuid===t),fn:(e,t)=>{const a=JSON.parse(JSON.stringify(e)),g=a.find(d=>d.studentGuid===t.studentGuid);return++g.visits,a},target:b}],or:{sid:"-m36zo1"}});const lt={load:z,setPage:Z},gt={$loading:Ke,$pEStudents:b,$pEStudentsPage:j,$pEStudentsTotalCount:Je},X=n({name:"addAdditionPoints",sid:"-gfwajq"}),Y=n({name:"removeAdditionPoints",sid:"s7fafn"}),u=i(async({id:e})=>{await we(e)},{name:"removeAdditionPointsFx",sid:"-yz8fw7"});s({and:[{clock:Y,target:u}],or:{sid:"-8u8zpu"}});const Qe=u.pending,p=i(async e=>(await be(e),e),{name:"addAdditionPointsFx",sid:"htakn7"});s({and:[{clock:X,target:p}],or:{sid:"-8dr5x0"}});s({and:[{clock:p.doneData,target:R.close}],or:{sid:"-8bjzjk"}});s({and:[{clock:p.doneData,fn:()=>({message:"Баллы добавлены",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-7xt4pj"}});s({and:[{clock:p.failData,fn:e=>({message:r(e,"Не удалось добавить баллы"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-7suzda"}});s({and:[{clock:u.doneData,fn:()=>({message:"Баллы удалены",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-7cd5kg"}});s({and:[{clock:u.failData,fn:()=>({message:"Не удалось удалить баллы",type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-6vvbrm"}});const mt={addAdditionPoints:X,removeAdditionPoints:Y},O={addAdditionPointsFx:p,removeAdditionPointsFx:u},ut={pendingRemoveAdditionPoints:Qe},ee=n({name:"addRegulationPoints",sid:"r944lm"}),te=n({name:"removeRegulationPoints",sid:"2sncem"}),f=i(async({id:e})=>{await Ve(e)},{name:"removeRegulationPointsFx",sid:"-krrp8n"});s({and:[{clock:te,target:f}],or:{sid:"mz5r9q"}});const Ze=f.pending,k=i(async e=>(await Re(e),e),{name:"addRegulationPointsFx",sid:"-dsdequ"});s({and:[{clock:ee,target:k}],or:{sid:"nfnl2k"}});s({and:[{clock:k.doneData,target:R.close}],or:{sid:"nhurg0"}});s({and:[{clock:k.doneData,fn:()=>({message:"Норматив добавлен",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"nvlma1"}});s({and:[{clock:k.failData,fn:e=>({message:r(e,"Не удалось добавить норматив"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"o0jrma"}});s({and:[{clock:f.doneData,fn:()=>({message:"Норматив удален",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"oh1lf4"}});s({and:[{clock:f.failData,fn:()=>({message:"Не удалось удалить норматив",type:"failure"}),target:o.evokePopUpMessage}],or:{sid:"oxjf7y"}});const pt={addRegulationPoints:ee,removeRegulationPoints:te},_={addRegulationPointsFx:k,removeRegulationPointsFx:f},ft={pendingRemoveRegulationPoints:Ze},se=n({name:"setSpecialization",sid:"hrz73m"}),v=i(async e=>(await Ue(e),e),{name:"setSpecializationFx",sid:"-aw52yn"}),Xe=v.pending;s({and:[{clock:se,target:v}],or:{sid:"-4x6l4a"}});s({and:[{clock:v.failData,fn:e=>({message:r(e,"Не удалось добавить специализацию"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-4uzequ"}});s({and:[{clock:v.doneData,fn:()=>({message:"Специализация добавлена",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-4ehky0"}});const kt={setSpecialization:se},Ye={setSpecializationFx:v},vt={pendingSetSpecialization:Xe},ae=n({name:"setHealthGroup",sid:"8b83ja"}),$=i(async e=>(await Me(e),e),{name:"setHealthGroupFx",sid:"a5qgdx"}),et=$.pending;s({and:[{clock:ae,target:$}],or:{sid:"-fydy6l"}});s({and:[{clock:$.failData,fn:e=>({message:r(e,"Не удалось добавить группу здоровья"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-fw6rt5"}});s({and:[{clock:$.doneData,fn:()=>({message:"Группа здоровья добавлена",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"-ffoy0b"}});const $t={setHealthGroup:ae},tt={setHealthGroupFx:$},xt={pendingSetHealthGroup:et},ne=n({name:"setCurrentStudentId",sid:"-yi431d"}),oe=n({name:"resetStudentId",sid:"b5joy3"}),ie=n({name:"reload",sid:"-4igy6g"}),S=i(async e=>{const{data:t}=await ze(e);return t.data},{name:"loadCurrentStudent",sid:"-htqwl5"});s({and:[{clock:ne,target:S}],or:{sid:"-e9batg"}});const C=c(null,{name:"$selectedStudent",sid:"ffg61i"}).reset(oe),st=V({and:[P.addVisitFx.pending,S.pending,Boolean],or:{name:"$loading",sid:"4dn8ye"}});s({and:[{clock:[P.addVisitFx.doneData,P.removeVisitFx.doneData,tt.setHealthGroupFx.doneData,Ye.setSpecializationFx.doneData,O.addAdditionPointsFx.doneData,O.removeAdditionPointsFx.doneData,_.addRegulationPointsFx.doneData,_.removeRegulationPointsFx.doneData],target:ie}],or:{sid:"-dugusp"}});s({and:[{clock:ie,source:C,filter:e=>!!e,fn:e=>e.studentGuid,target:S}],or:{sid:"-ds9of9"}});s({and:[{clock:S.doneData,target:C}],or:{sid:"-dcvft5"}});const yt={$selectedStudent:C,$loading:st},Pt={setCurrentStudentId:ne,resetStudentId:oe},de=n({name:"load",sid:"-1nsq63"}),ce=n({name:"remove",sid:"wecpac"}),re=i(async()=>{const{data:e}=await je();return e.competitions},{name:"loadFx",sid:"-d34r01"}),A=i(async e=>(await Ce(e),e),{name:"removeFx",sid:"y5v9by"});s({and:[{clock:ce,target:A}],or:{sid:"q9j9ts"}});s({and:[{clock:A.failData,fn:e=>({message:r(e,"Не удалось удалить соревнование"),type:"failure",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"qna4nt"}});s({and:[{clock:A.doneData,fn:()=>({message:"Соревнование удалено",type:"success",time:3e3}),target:o.evokePopUpMessage}],or:{sid:"r3rygn"}});s({and:[{clock:de,target:re}],or:{sid:"r8q3sw"}});const at=c([],{name:"$competitions",sid:"dxwaax"}).on(re.doneData,(e,t)=>t).on(A.doneData,(e,t)=>e.filter(a=>a!==t)),Dt={load:de,remove:ce},St={$competitions:at};var y=(e=>(e.AdminAccess="AdminAccess",e.DefaultAccess="DefaultAccess",e.OnlineCourseAccess="OnlineCourseAccess",e.SecretaryAccess="SecretaryAccess",e.SuperUser="SuperUser",e))(y||{});const At=({studentGuid:e})=>{const[t,a]=H.useState(new Date().toISOString()),[g,d]=Pe([Oe.pendingAddVisit,Ge.peTeacher]),F=new Date(t),le=[y.AdminAccess,y.SuperUser,y.SecretaryAccess].some(me=>{var q;return(q=d==null?void 0:d.permissions)==null?void 0:q.includes(me)}),G=(De(F,{start:Se(new Date,1),end:new Date})||le)&&F.getDay()!==0&&F.getDay()!==1;H.useEffect(()=>{a(new Date().toISOString())},[e]);const ge=()=>{Be.addVisit({studentGuid:e,date:T(t,"numeric")})};return w.jsxs(qe,{gap:"4px",ai:"flex-start",children:[w.jsx(Ee,{alertMessage:G?"":"Не допустимая дата",type:"date",setValue:a,value:t,hideCross:!0}),w.jsx(Ie,{isActive:G&&!g,text:"Добавить посещение ".concat(T(t,"numeric")),onClick:ge,width:"100%",background:B.blue.main,textColor:B.white.main})]})},Ft={None:"-",Basic:"Основная",SpecialA:"Специальная А",SpecialB:"Специальная Б",Preparatory:"Подготовительная",HealthLimitations:"ОВЗ",Disabled:"Инвалид"},ht={None:"-",Basketball:"Баскетбол",Volleyball:"Волейбол",Aerobics:"Аэробика",PowerLiftingAndCrossfit:"Пауэрлифтинг и кроссфит",StreetLiftingAndArmLifting:"Стритлифтинг и армлифтинг",GeneralPhysicalTraining:"ОФП",GeneralPhysicalTrainingGym:"ОФП (тренажерный зал)",FootRoom:"Футзал",SMG:"СМГ",TableTennis:"СМГ настольный теннис",NordicWalking:"СМГ скандинавская ходьба",InternalTeam:"Сборная"};export{At as A,y as P,M as a,ct as b,dt as c,rt as d,Dt as e,lt as f,ht as g,Ft as h,gt as i,Ne as j,Le as k,Oe as l,Be as m,yt as n,ut as o,mt as p,pt as q,ft as r,St as s,xt as t,$t as u,vt as v,kt as w,Pt as x};
