import{ax as y,r as f,i as u,cH as C,j as e,aH as v,s as w}from"./vendor-8a1e4858.js";import{ec as r,W as T,P as R,f as i,T as n,w as Y,B as b,aM as E,b5 as _,ed as k}from"./index-87d306af.js";const p=new Date().getFullYear();function P(){return Array.from({length:p-2006},(t,s)=>({id:s,title:(p-s).toString()}))}const o=P(),A=()=>{const c=y(),[t,s]=f.useState(o[0]),[x,g]=u([r.pageMounted,r.certificatesLoading]),[h,d,j]=u([r.presentYears,r.certificatedRequested,r.createCertificateLoading]),l=C(r.certificates,a=>a?[...a].reverse():null);return f.useEffect(()=>{x()},[]),e.jsx(T,{data:!0,load:()=>{},error:null,children:e.jsx(R,{children:e.jsxs(i,{d:"column",gap:"2rem",p:"1rem 0 0 0",ai:"flex-start",children:[e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(n,{size:3,align:"left",children:"Заказать справку в ФНС"}),e.jsxs(i,{gap:"1rem",jc:"space-between",ai:"flex-end",children:[e.jsx(Y,{title:"Год",items:o,selected:t,setSelected:s,isActive:o.length>1,required:!0,width:"10rem",placeholder:"Выберите год"}),e.jsx(b,{text:"Заказать",background:"var(--reallyBlue)",textColor:"#fff",icon:e.jsx(v,{}),disabled:!t,loading:j,onClick:()=>{if(t){if(h.has(t.title)){E.evokeConfirm({message:e.jsxs(i,{d:"column",gap:"0.5rem",ai:"flex-start",children:[e.jsx(n,{align:"left",size:4,children:"Справка за выбранный год уже сформирована."}),e.jsx(m,{children:"Если вы уверены, что есть причина для формирования справки с корректировкой, например: изменились состав оплат или личные документы, тогда запрос на новую версию справки будет отправлен."}),e.jsx(m,{children:"Отправить?"})]}),onConfirm:()=>{d({year:t.title})}});return}d({year:t.title})}}})]})]}),e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(n,{size:3,align:"left",children:"Справки в ФНС"}),e.jsx(_,{loading:g,innerPadding:"0.5rem",columns:[{title:"Дата справки",field:"cert_date",priority:"one"},{title:"Номер справки",field:"number",priority:"four"},{title:"Номер корректировки",field:"correction",priority:"two"},{title:"Отчетный год",field:"year",priority:"one"},{title:"Плательщик",field:"payer",priority:"four"},{title:"Подписант",field:"signatory",priority:"four"},{title:"Очная форма",field:"is_full_time",priority:"four"},{title:"Сумма справки",field:"summ",priority:"three"}],data:l==null?void 0:l.toReversed(),onRowClick:a=>c.push(k+"/"+a.id)})]})]})})})},m=w.p.withConfig({componentId:"sc-19e5w1d-0"})(["font-size:1rem;line-height:1.45rem;"]);export{A as default};
