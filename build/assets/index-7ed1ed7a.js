import{X as y,r as c,q as d,j as e,_ as C,s as w}from"./vendor-93473b96.js";import{W as T,P as Y,J as i,h as a,x as _,q as E,N as R,r as b,dl as k,dm as r}from"./index-7eec75d1.js";const f=new Date().getFullYear();function q(){return Array.from({length:f-2007},(t,s)=>({id:s,title:(f-1-s).toString()}))}const l=q(),v=()=>{const n=y(),[t,s]=c.useState(l[0]),[m,p,x]=d([r.pageMounted,r.certificates,r.certificatesLoading]),[g,o,h]=d([r.presentYears,r.certificatedRequested,r.createCertificateLoading]);return c.useEffect(()=>{m()},[]),e.jsx(T,{data:!0,load:()=>{},error:null,children:e.jsx(Y,{children:e.jsxs(i,{d:"column",gap:"2rem",p:"1rem 0 0 0",ai:"flex-start",children:[e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(a,{size:3,align:"left",children:"Заказать справку в ФНС"}),e.jsxs(i,{gap:"1rem",jc:"space-between",ai:"flex-end",children:[e.jsx(_,{title:"Год",items:l,selected:t,setSelected:s,isActive:l.length>1,required:!0,width:"10rem",placeholder:"Выберите год"}),e.jsx(E,{text:"Заказать",background:"var(--reallyBlue)",textColor:"#fff",icon:e.jsx(C,{}),disabled:!t,loading:h,onClick:()=>{if(t){if(g.has(t.title)){R.evokeConfirm({message:e.jsxs(i,{d:"column",gap:"0.5rem",ai:"flex-start",children:[e.jsx(a,{align:"left",size:4,children:"Справка за выбранный год уже сформирована."}),e.jsx(u,{children:"Если вы уверены, что есть причина для формирования справки с корректировкой, например: изменились состав оплат или личные документы, тогда запрос на новую версию справки будет отправлен."}),e.jsx(u,{children:"Отправить?"})]}),onConfirm:()=>{o({year:t.title}),close()}});return}o({year:t.title}),close()}}})]})]}),e.jsxs(i,{d:"column",gap:"0.5rem",children:[e.jsx(a,{size:3,align:"left",children:"Справки в ФНС"}),e.jsx(b,{loading:x,innerPadding:"0.5rem",columns:[{title:"Дата справки",field:"cert_date",priority:"one"},{title:"Номер справки",field:"number",priority:"four"},{title:"Номер корректировки",field:"correction",priority:"two"},{title:"Отчетный год",field:"year",priority:"one"},{title:"Плательщик",field:"payer",priority:"four"},{title:"Подписант",field:"signatory",priority:"four"},{title:"Очная форма",field:"is_full_time",priority:"four"},{title:"Сумма справки",field:"summ",priority:"three"}],data:p,onRowClick:j=>n.push(k+"/"+j.id)})]})]})})})},u=w.p.withConfig({componentId:"sc-19e5w1d-0"})(["font-size:1rem;line-height:1.45rem;"]);export{v as default};
