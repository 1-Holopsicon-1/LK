var k=Object.defineProperty,G=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var j=(e,s,t)=>s in e?k(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,b=(e,s)=>{for(var t in s||(s={}))E.call(s,t)&&j(e,t,s[t]);if(h)for(var t of h(s))L.call(s,t)&&j(e,t,s[t]);return e},f=(e,s)=>G(e,O(s));import{j as o,r as p,n as v}from"./vendor-91dd51cf.js";import{bu as m,G as x,h as S,bj as T,bv as w,aJ as y,ai as R,_ as $,P as F,bw as M,bx as V,by as _,Z as z,b as A}from"./index-2caaee2c.js";const P={Основное:0,"Кадровая среда":1,"Учебная деятельность":2,Коммуникация:3,"Научная деятельность":4,"Находится в разработке":5},B=(e,s,t)=>e?Object.values(e).filter(({getIsVisibleForCurrentUser:n,guidsAllowed:a})=>(!(n&&s)||n(s))&&a?a.includes(t||""):!0).reduce((n,a)=>{const u=a!=null&&a.group?m[a.group]:m.OTHER;return n[u]||(n[u]={}),n[u][a.id]=a,n},{}):{},C=({title:e,links:s,doNotShow:t,orientation:i,background:n,shadow:a=!0,mode:u})=>o.jsxs(x,{d:"column",children:[o.jsx(S,{size:4,align:"left",bottomGap:!0,children:e}),o.jsxs(x,{gap:"8px",$wrap:!0,children:[Object.values(s).map(r=>{if((r==null?void 0:r.show)!==!1&&t!==(r==null?void 0:r.id))return o.jsx(T,f(b({background:n,orientation:i,mode:u,shadow:a},r),{color:r.color.length?r.color:"blue"}),r.id)}),t!=="all"&&o.jsx(w,{})]})]}),q=()=>{const{visibleRoutes:e,allRoutes:s}=y.useMenu(),[t,i]=p.useState(null),[n,a]=p.useState(""),u=v(z.peTeacher),r=v(A.userGuid),g=p.useMemo(()=>B(e,u,r),[e,u]),{data:{user:c}}=R.useUser();return e?o.jsx($,{padding:"10px",children:o.jsxs(F,{children:[o.jsx(M,{placeholder:"Поиск разделов",whereToSearch:s!=null?s:{},searchEngine:V,setResult:i,setExternalValue:a,validationCheck:!0,loadingOnType:!0}),!t&&o.jsx(x,{d:"column",gap:"24px",children:n.length===0&&Object.keys(g).sort((l,d)=>P[l]-P[d]).map(l=>{const d=g[l];return o.jsx(C,{title:l==="Кадровая среда"&&(c==null?void 0:c.user_status)==="stud"?"Договоры и оплаты":l,doNotShow:"all",align:"left",links:d},l)})}),o.jsx(_,{pages:t})]})}):null};export{q as default};
