var B=Object.defineProperty,I=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var k=(s,e,t)=>e in s?B(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,D=(s,e)=>{for(var t in e||(e={}))N.call(e,t)&&k(s,t,e[t]);if(g)for(var t of g(e))W.call(e,t)&&k(s,t,e[t]);return s},M=(s,e)=>I(s,L(e));import{r as a,j as o,F as _}from"./vendor-31894644.js";import{V as z,I as P,M as U,h as G,l as O,S as R,c as V,a2 as q,W as w,_ as H,F as J,ak as K}from"./index-0f8b6250.js";import{s as Q}from"./send-form-402773ae.js";import{g as X}from"./get-method-obstaing-c0726de9.js";const Y=({model:s,getForm:e,successMessage:t,outerForm:f,isAvailableToSend:n=!0,repeatable:x=!0,formId:F,isSpecialField:j})=>{var S,C,E;const{data:c,completed:m}=s.selectors.useForm(),[d,h]=a.useState(!1),[r,u]=a.useState(null),[p,i]=a.useState({}),l=(S=m||!n)!=null?S:!1;return a.useEffect(()=>{c&&u(f!=null?f:e(c))},[c]),a.useEffect(()=>{j&&r&&c&&i(X(r.data))},[r]),!r||!u?o.jsx(z,{}):o.jsxs(o.Fragment,{children:[o.jsx(P,M(D({},r),{collapsed:l&&!x,setData:u,specialFieldsNameConfig:p})),o.jsx(U,{title:"Информация по заявке",type:"info",icon:o.jsx(_,{}),visible:l&&!!t,children:t}),(c==null?void 0:c.last_update)&&o.jsxs(G,{size:5,children:["Дата последней отправки: ",O(c.last_update)]}),o.jsx(R,{text:n?"Отправить":"Отправлено",action:()=>Q(r,s.effects.postFormFx,h,s.events.changeCompleted,F),isLoading:d,completed:m,setCompleted:T=>s.events.changeCompleted({completed:T}),buttonSuccessText:"Отправлено",repeatable:x,isDone:l&&!x,isActive:V(r,p)&&((E=(C=r.optionalCheckbox)==null?void 0:C.value)!=null?E:!0),popUpFailureMessage:l?"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})},y=({model:s,getForm:e,successMessage:t,goBack:f,pageAvailability:n,isAvailableToSend:x=!0,repeatable:F=!0,formId:j,isSpecialField:c=!1,title:m})=>{var p,i;const{data:d,error:h}=s.selectors.useForm(),[r,u]=a.useState(null);return(p=!!n&&!(n!=null&&n.isAvailable))!=null&&p?o.jsx(q,{text:(i=n==null?void 0:n.text)!=null?i:"Вам не доступен этот раздел"}):(a.useEffect(()=>{d&&u(e(d))},[d]),o.jsx(w,{load:()=>s.effects.getFormFx(),error:h,data:r,children:o.jsx(H,{children:!!r&&!!u&&o.jsxs(J,{children:[o.jsx(K,{text:f,visible:!!f}),m&&o.jsx("h2",{children:m}),o.jsx(Y,{model:s,successMessage:t,isAvailableToSend:x,repeatable:F,getForm:e,outerForm:r,formId:j,isSpecialField:c})]})})}))};export{y as T};
