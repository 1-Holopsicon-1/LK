import{j as e,V as p,z as d,F as u}from"./vendor-561dac3a.js";import{aj as x,ak as h,H as m,ae as g,al as s,M as a,r as l,N as f,s as j,v as w,W as k,d as y,P as C,w as F,am as v}from"./index-7cc4f467.js";function A({children:n,direction:t,text:r,width:i}){return e.jsxs(x,{direction:t,children:[e.jsx(h,{width:i,children:r}),n]})}const b=()=>[{title:"Запрос",field:"subject",priority:"one",search:!0,showFull:!0,render:(n,t)=>{var r;return e.jsxs(m,{jc:"space-between",children:[n,!!((r=t==null?void 0:t.files_output)!=null&&r.length)&&t.files_output.map(i=>e.jsx("div",{onClick:o=>o.stopPropagation(),children:e.jsx(A,{text:i.fname,direction:"left",children:e.jsx(g,{icon:e.jsx(p,{}),background:"transparent",href:i==null?void 0:i.url})})},i.url))]})}},...c()],c=()=>[{title:"Дата",field:"created",priority:"two",sort:!0,type:"date",align:"center",width:"120px"},{title:"Рег. номер",field:"num",priority:"five",align:"center",width:"170px"},{title:"Статус",field:"status",priority:"one",width:"130px",catalogs:[...Object.values(s).map((n,t)=>({id:t.toString(),title:n}))??[]],render:n=>{const t=E(n);return e.jsx(a,{type:t==="Готово"?"success":t==="Отклонено"?"failure":"alert",title:t||"—",align:"center",width:"100%",icon:null,maxWidth:"150px"})}},{title:"Структурное подразделение, адрес",priority:"four",field:"response_div",showFull:!1},{title:"Примечание",field:"comment",priority:"five",width:"150px"}],E=n=>{switch(n){case"На рассмотрении":return s.pending;case"Принято в работу":return s.pending;case"Получено":return s.ready;default:return n}},P=()=>[...c(),{title:"Файлы для скачивания",align:"center",field:"files_output",priority:"five",width:"150px",render:n=>!!n.length&&e.jsx(l,{onClick:()=>T(n),text:"Скачать",background:"transparent",textColor:f.green.main,width:"100%"})}],T=n=>{n.map(t=>{const r=document.createElement("a");r.href=t.url,r.download=t.name,r.target="_blank",r.click(),r.remove()})},M=({isTeachers:n})=>{const{data:{listApplication:t,dataUserApplication:r}}=j.useApplications(),{open:i}=w(),o=()=>{i(e.jsx(v,{isTeachers:n,currentFormEducation:r==null?void 0:r.educationForm}),"Создать заявку")};return e.jsx(k,{load:()=>y.getApplicationsFx(),loading:!t,error:null,data:t,children:e.jsxs(C,{topRightCornerElement:e.jsx(l,{onClick:o,text:"Подать заявку",background:"var(--reallyBlue)",textColor:"#fff",icon:e.jsx(d,{}),minWidth:"35px",height:"36px",shrinkTextInMobile:!0}),children:[e.jsx(a,{type:"info",title:"Информация",icon:e.jsx(u,{}),lineHeight:"1.4rem",fontSize:"0.85rem",children:e.jsxs("p",{children:["Данный сервис позволяет заказать необходимую справку, подать заявление, запрос. Статус (информация о степени готовности) заказанных справок меняется согласно действиям оператора. В колонке «Структурное подразделение, адрес» указывается название подразделения и адрес, куда необходимо приехать за готовым документом.",n&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Остальные Цифровые сервисы доступны"," ",e.jsx("a",{href:"https://e.mospolytech.ru/old/index.php?p=sprav",target:"_blank",rel:"noreferrer",children:"по ссылке"}),"."]})]})}),e.jsx(F,{loading:!t,columns:b(),columnsExtended:P(),data:t,maxOnPage:7})]})})};export{M as T};
