import{r as e,j as t}from"./vendor-08ab745b.js";import{d0 as R,d1 as d,s as N,ai as B,a2 as U,d2 as k,d3 as q,d4 as T,B as G,F as L,h as O,d5 as _,S as H,aj as M,j as W,c as i}from"./index-0892b83f.js";import{C as z}from"./error-0712ed6d.js";const I=[{id:0,title:"имею постоянную регистрацию за пределами А-107 или не имею постоянную регистрацию"},{id:1,title:"имею постоянную регистрацию в пределах А-107"}],K=a=>{const{surname:l,name:s,patronymic:u,group:r,email:m,phone:o}=a;return{title:"Контактная информация",data:[{title:"ФИО",fieldName:"fio",value:l+" "+s+" "+u,editable:!1},{title:"Учебная группа",fieldName:"group",type:"tel",value:r,editable:!1},{title:"Электронная почта",fieldName:"email",type:"email",value:m,editable:!0,required:!0},{title:"Телефон",fieldName:"phone",type:"tel",value:o,editable:!0,required:!0},{title:"Причина предоставления (в связи с)",type:"select",width:"100%",value:null,fieldName:"reason",placeholder:"укажите причину",editable:!0,required:!0,items:I},{title:"Приоритетное общежитие",fieldName:"priority_hostel",value:"",type:"select",width:"100%",editable:!0,required:!0,items:R}]}},J=()=>{const[a,l]=e.useState(null),[s,u]=e.useState(d.kvdCert),[r,m]=e.useState(d.fluorographyCert),[o,x]=e.useState(d.vichRwCert),[c,b]=e.useState(d.graftCert),{data:{dataUserApplication:p}}=N.useApplications(),{data:{user:v}}=B.useUser(),[g,F]=e.useState(!1),[D,j]=e.useState(!1),[C,A]=e.useState(null),[n,S]=e.useState(null),[f,h]=e.useState(null),y=g??!1,w=!!a&&!!n&&!!C&&!!f;if(v?.educationForm!=="Очная")return t.jsx(U,{text:"Сервис доступен только для обучающихся очной формы"});if(e.useEffect(()=>{p&&(l(K(p)),A(k()),S(q()),h(T()))},[p]),!w)return null;if(new Date<new Date(2024,8,15))return t.jsx(z,{});const E=[[{dataForm:a,setDataForm:l}],[{dataForm:n,setDataForm:S}],[{dataForm:s,setDataForm:u}],[{dataForm:r,setDataForm:m}],[{dataForm:o,setDataForm:x}],[{dataForm:c,setDataForm:b}],[{dataForm:f,setDataForm:h}]];return t.jsx(G,{isDone:y,children:t.jsxs(L,{children:[t.jsx(O,{size:4,align:"left",children:"Предоставление права проживания (очная форма)"}),t.jsx(_,{stagesConfig:E}),t.jsx(H,{text:"Отправить",action:()=>M(W.USG_GETHOSTEL_O,[a,n,C,f,s,r,o,c],j,F),isLoading:D,completed:g,setCompleted:F,repeatable:!1,buttonSuccessText:"Отправлено",isDone:y,isActive:i(a)&&i(r)&&i(o)&&i(c)&&i(s)&&!!n?.documents?.files.length,popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{J as default};
