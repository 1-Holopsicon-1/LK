var B=Object.defineProperty,E=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var j=(t,e,i)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,k=(t,e)=>{for(var i in e||(e={}))I.call(e,i)&&j(t,i,e[i]);if(C)for(var i of C(e))M.call(e,i)&&j(t,i,e[i]);return t},y=(t,e)=>E(t,O(e));import{r as l,n as F,cM as U,j as g}from"./vendor-31894644.js";import{b7 as $,s as G,bg as H,B as L,F as _,I as K,S as V,j as Y,c as z,b5 as J,bh as Q}from"./index-0f8b6250.js";import{s as X}from"./send-hr-form-work-transfer-40a97524.js";const Z=(t,e,i,s,o,u,r,d,c,f,n,h,p,N,m,S)=>{const{surname:v,name:x,patronymic:b}=t;return{title:"Заявление на перевод",data:[{title:"ФИО",value:v+" "+x+" "+b,fieldName:"fio",type:"simple-text",visible:!0},{title:"",type:"simple-text",value:e[i].jobGuid.toString(),fieldName:"jobGuid",visible:!1},{title:"Текущее место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Должность",type:"simple-text",fieldName:"post",value:e[i].jobTitle.toString(),visible:!0},{title:"Подразделение",type:"simple-text",value:e[i].subDivision.toString(),fieldName:"subDivision",visible:!0},{title:"Cтавка",type:"simple-text",value:e[i].rate.toString(),fieldName:"currentRate",visible:!0},{title:"Новое место работы",type:"text-header",fieldName:"post",value:"",visible:!0},{title:"Подразделение",type:"auto-complete-input",fieldName:"newPlaceOfWork",value:d,width:"100%",suggestions:S,required:!0,mask:!0,visible:!0,placeholder:"Начните вводить название подразделения",onChange:a=>{c(a)}},{title:"Должность",value:u,fieldName:"newPost",editable:!0,mask:!0,required:!0,onChange:a=>{r(a)}},{title:"Тип занятости",type:"select",fieldName:"employment",value:s,editable:!0,required:!0,width:"100%",items:[{id:0,title:"Основное место работы"},{id:1,title:"По совместительству"}],onChange:a=>{o(a),a.title=="По совместительству"&&f.title=="1"&&n(null)}},{title:"Ставка",type:"select",fieldName:"newRate",value:f,editable:!0,required:!0,width:"100%",items:(s==null?void 0:s.title)=="По совместительству"?[{id:1,title:"0.5"},{id:2,title:"0.25"}]:[{id:0,title:"1"},{id:1,title:"0.5"},{id:2,title:"0.25"}],onChange:a=>{n(a)}},{title:"При устройстве по совместительству ставка не может превышать 0.5",type:"text-warning",fieldName:"PartTime",value:null,visible:(s==null?void 0:s.title)=="По совместительству",required:!1,width:"100%"},{title:"Тип совместительства",type:"select",fieldName:"parttime_type",value:N,editable:!0,required:(s==null?void 0:s.title)=="По совместительству",specialType:"PartTime",width:"100%",items:[{id:0,title:"Внутреннее"},{id:1,title:"Внешнее"}],onChange:a=>{m(a)}},{title:"Дата перевода",type:"date",value:h,fieldName:"transferDate",editable:!0,mask:!0,required:!0,minValueInput:$(0),onChange:a=>{p(a)}}]}},ee=t=>{const e=t.find(i=>i.fieldName==="employment");return e!=null&&e.value&&(e==null?void 0:e.value).title==="По совместительству"?{reason:"PartTime"}:{reason:null}},le=()=>{var D,P;const[t,e]=l.useState(null),i=F(J),{data:{dataUserApplication:s,dataWorkerApplication:o}}=G.useApplications(),{loading:u}=H.useBufferWorkTransfer(),[r,d]=l.useState(!1),[c,f]=l.useState(null),[n,h]=l.useState(null),[p,N]=l.useState(null),[m,S]=l.useState(null),[v,x]=l.useState(null),[b,a]=l.useState(null),[q,W]=l.useState({}),A=F(Q),T=r!=null?r:!1,{id:R}=U(),w=+R;return l.useEffect(()=>{t&&s&&W(ee(t.data))},[t]),l.useEffect(()=>{s&&o&&!u&&e(Z(s,o,w,n,h,p,N,m,S,v,x,b,a,c,f,i))},[s,w,u,n,p,m,v,b,c]),g.jsx(L,{isDone:T,children:!!t&&!!e&&g.jsxs(_,{children:[g.jsx(K,y(k({},t),{collapsed:T,setData:e,specialFieldsNameConfig:q})),g.jsx(V,{text:"Отправить",action:()=>X(Y.HOLIDAY_WORK,[t],d,A),isLoading:u,completed:r,setCompleted:d,repeatable:!1,buttonSuccessText:"Отправлено",isDone:T,isActive:z(t)&&((P=(D=t.optionalCheckbox)==null?void 0:D.value)!=null?P:!0),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{le as default};
