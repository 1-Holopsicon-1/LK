import{r as t,j as s}from"./vendor-292fea82.js";import{bU as n,a0 as U,H as w,E as T,bV as k,bW as q,bX as B,a1 as G,F as L,T as W,bY as _,S as H,a2 as M,n as O,t as o}from"./index-ddc703de.js";const V=[{id:0,title:"имею постоянную регистрацию за пределами А-107 или не имею постоянную регистрацию"},{id:1,title:"имею постоянную регистрацию в пределах А-107"}],z=e=>{const{surname:d,name:i,patronymic:u,group:r,email:c,phone:l}=e;return{title:"Контактная информация",data:[{title:"ФИО",fieldName:"fio",value:d+" "+i+" "+u,editable:!1},{title:"Учебная группа",fieldName:"group",type:"tel",value:r,editable:!1},{title:"Электронная почта",fieldName:"email",type:"email",value:c,editable:!0,required:!0},{title:"Телефон",fieldName:"phone",type:"tel",value:l,editable:!0,required:!0},{title:"Причина предоставления (в связи с)",type:"select",width:"100%",value:null,fieldName:"reason",placeholder:"укажите причину",editable:!0,required:!0,items:V},{title:"Приоритетное общежитие",fieldName:"priority_hostel",value:"",type:"select",width:"100%",editable:!0,required:!0,items:[{id:0,title:"1 общежитие"},{id:1,title:"2 общежитие"},{id:2,title:"3 общежитие"},{id:3,title:"4 общежитие"},{id:4,title:"5 общежитие"},{id:5,title:"6 общежитие"},{id:6,title:"7 общежитие"},{id:7,title:"8 общежитие"},{id:8,title:"9 общежитие"},{id:9,title:"10 общежитие"}]}]}},P=()=>{var x;const[e,d]=t.useState(null),[i,u]=t.useState(n.kvdCert),[r,c]=t.useState(n.fluorographyCert),[l,v]=t.useState(n.vichRwCert),[m,D]=t.useState(n.graftCert),{data:{dataUserApplication:p}}=U.useApplications(),{data:{user:f}}=w.useUser(),[F,S]=t.useState(!1),[A,j]=t.useState(!1),[b,E]=t.useState(null),[a,C]=t.useState(null),[g,h]=t.useState(null),y=F??!1,R=!!e&&!!a&&!!b&&!!g;if((f==null?void 0:f.educationForm)!=="Очная")return s.jsx(T,{text:"Сервис доступен только для обучающихся очной формы"});if(t.useEffect(()=>{p&&(d(z(p)),E(k()),C(q()),h(B()))},[p]),!R)return null;const N=[[{dataForm:e,setDataForm:d}],[{dataForm:a,setDataForm:C}],[{dataForm:i,setDataForm:u}],[{dataForm:r,setDataForm:c}],[{dataForm:l,setDataForm:v}],[{dataForm:m,setDataForm:D}],[{dataForm:g,setDataForm:h}]];return s.jsx(G,{isDone:y,children:s.jsxs(L,{children:[s.jsx(W,{size:4,align:"left",children:"Предоставление права проживания (очная форма)"}),s.jsx(_,{stagesConfig:N}),s.jsx(H,{text:"Отправить",action:()=>M(O.USG_GETHOSTEL_O,[e,a,b,g,i,r,l,m],j,S),isLoading:A,completed:F,setCompleted:S,repeatable:!1,buttonSuccessText:"Отправлено",isDone:y,isActive:o(e)&&o(r)&&o(l)&&o(m)&&o(i)&&!!((x=a==null?void 0:a.documents)!=null&&x.files.length),popUpFailureMessage:"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})};export{P as default};
