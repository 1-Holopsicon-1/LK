import{r as i,j as n,T as g,c0 as x}from"./vendor-35c3991b.js";import{a6 as f,aC as j,aD as E,aE as P,a0 as m,aF as L,a1 as T,aG as h,aH as M,X as S,P as U,a9 as k,aI as C}from"./index-46a096a9.js";const O=({title:a,blocks:t,isStaff:s})=>{const[e,o]=i.useState(null);return n.jsxs(f,{children:[n.jsx(j,{placeholder:`Поиск по ${a}`,whereToSearch:t,searchEngine:E,setResult:o,validationCheck:!0}),n.jsx(P,{blocks:e??t,isStaff:s}),(e==null?void 0:e.length)===0&&n.jsx(m,{text:"Ничего не найдено"})]})},_=(a,t)=>a.reduce((s,e)=>{const{id:o,title:c,content:u,visible:l}=e;return(l==="staff"&&t||l==="student"&&!t||l==="all")&&s.push({id:o,title:c,content:n.jsx(O,{blocks:u,isStaff:t,title:c})}),s},[]),I=()=>{var p;const{allRoutes:a}=L.useMenu(),{replace:t}=g(),s=(p=x(C))==null?void 0:p.params,{data:e}=T.useUser(),o=i.useMemo(()=>{var r;return((r=e==null?void 0:e.user)==null?void 0:r.user_status)==="staff"},[e]),c=i.useMemo(()=>_(Object.values(h),o),[h,o]),u=i.useMemo(()=>s!=null&&s.infoType?c.findIndex(({id:r})=>r===s.infoType)??0:0,[]),l=i.useCallback(r=>{var d;r&&t(`${((d=a==null?void 0:a["helpful-information"])==null?void 0:d.path)??M}/${r}`)},[a]);return n.jsx(S,{padding:"10px",children:n.jsx(U,{children:n.jsx(k,{pages:c,currentPage:u,onChangePage:l,appearance:!1})})})};export{I as default};
