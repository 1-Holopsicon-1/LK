import{s as f,j as e,af as v,c as S,n as p,r as u,a5 as A,cM as D}from"./vendor-08ab745b.js";import{ai as M,an as k,u as h,bv as j,G as d,M as $,S as I,H as P,X as F,l as g,q as x,L as o,bw as C,p as y,bx as T,h as N,W as B,P as L,ay as _,by as H,bz as c,bA as m}from"./index-0892b83f.js";const R=f.div.withConfig({componentId:"sc-18w06yl-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;row-gap:10px;& > span{line-height:1.7rem;}@media (min-width:1001px){max-width:400px;}"]),z=()=>{const{data:{user:r}}=M.useUser();return e.jsx(R,{children:r?.user_status==="stud"?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Для изменения данных Вам необходимо обратиться в отделение центра по работе со студентами (многофункциональный центр)"}),e.jsx(k,{onClick:()=>null,href:"https://mospolytech.ru/obuchauschimsya/mnogofunkcionalnyy-centr/",text:"Контакты центра по работе со студентами",width:"100%",align:"center"})]}):e.jsxs(e.Fragment,{children:["Для изменения данных Вам необходимо обратиться в отдел кадров по телефону",e.jsx("br",{}),e.jsx("b",{children:e.jsx("a",{href:"tel:+7(495) 223-05-23,1130",children:"+7 (495) 223-05-23 доб.1130"})}),"или написать письмо на",e.jsx("br",{}),e.jsx("a",{href:"mailto:ok@mospolytech.ru",children:e.jsx("b",{children:"ok@mospolytech.ru"})})]})})},G=f.div.withConfig({componentId:"sc-icbwkn-0"})([".info-text{margin:16px 0;line-height:1.7rem;}b{font-weight:600;}"]),w=({children:r,handleSubmit:i,data:t,done:s,completed:n,loading:a})=>{const{open:l}=h(),E=j.changeCompleted;return t?e.jsxs(G,{children:[e.jsxs(d,{gap:"8px",children:[t?.file&&e.jsx(k,{href:t.file,onClick:()=>null,text:"Скачать согласие",width:"100%",minHeight:"38px",height:"38px",icon:e.jsx(v,{})}),e.jsx($,{type:"success",icon:e.jsx(S,{}),title:"Успешно подписано",visible:t.status||s,align:"center"})]}),e.jsx("div",{className:"info-text",children:r}),!t.status&&!s&&e.jsx(I,{text:!t.status&&!s?"Подписать":"Подписано",action:i,isLoading:a,completed:n,isDone:s||t.status,setCompleted:E,isActive:!t.status&&!s,popUpFailureMessage:"Согласие уже подписано",popUpSuccessMessage:"Согласие успешно подписано"}),(t.status||s)&&e.jsxs(e.Fragment,{children:[e.jsx(P,{margin:"16px 0",width:"100%"}),e.jsxs(F,{fontSize:"0.9rem",lineHeight:"1.4rem",children:["Дата подписания: ",g(t.date||new Date),","," ",t.time||`${new Date().getHours()}:${new Date().getMinutes()}`,e.jsx("br",{}),t.fio]})]}),!t.status&&!s&&e.jsx(d,{jc:"center",children:e.jsx(x,{onClick:()=>l(e.jsx(z,{}),"Ошибка в данных"),text:"Заметили ошибку в личных данных?",background:"transparent",textColor:o.grey.main})})]}):null},U=({next:r,guid:i,defaultEmail:t})=>{const{close:s}=h(),[n]=p([C.sendCodes]),[a,l]=u.useState(t);return e.jsxs(e.Fragment,{children:[e.jsx(y,{type:"email",placeholder:"E-mail заказчика",value:a,setValue:l}),e.jsxs(d,{jc:"space-between",p:"8px 0 0 0",children:[e.jsx(x,{text:"Отмена",onClick:()=>{s()},textColor:o.red.main,background:"transparent",hoverBackground:o.red.transparent3}),e.jsx(x,{text:"Подтвердить",onClick:()=>{n({clientEmail:a,clientGuid:i}),r()},textColor:o.blue.main,background:"transparent",hoverBackground:o.blue.transparent3})]})]})},O=({next:r,guid:i})=>{const{close:t}=h(),[s]=p([C.signAgreement]),[n,a]=u.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(y,{placeholder:"Код",value:n,setValue:a}),e.jsxs(d,{jc:"space-between",p:"8px 0 0 0",children:[e.jsx(x,{text:"Отмена",onClick:()=>{t()},textColor:o.red.main,background:"transparent",hoverBackground:o.red.transparent3}),e.jsx(x,{text:"Подтвердить",onClick:()=>{s({clientGuid:i,clientPass:n}),r()},textColor:o.blue.main,background:"transparent",hoverBackground:o.blue.transparent3})]})]})},V=({guid:r,email:i})=>{const[t,s]=u.useState(0),{close:n}=h(),{isMobile:a,isTablet:l}=T();return e.jsxs(d,{w:a||l?"100%":"600px",d:"column",children:[e.jsx(N,{align:"left",size:3,width:"530px",children:W[t]}),e.jsxs(d,{d:"column",gap:"24px",children:[t===0&&e.jsx(U,{guid:r,defaultEmail:i,next:()=>{s(1)}}),t===1&&e.jsx(O,{guid:r,next:()=>{n(),s(0)}})]})]})},W=["Введите e-mail заказчика","Введите код, полученный на почту"],K=()=>{const r=A(),[i,t,s]=p([c.$electronicInteractionStore,c.$error,c.$loading]),{type:n}=D(),a=()=>j.getElectronicInteraction();return e.jsx(B,{load:a,loading:s,error:t,data:i,loadEveryVisit:!0,children:e.jsx(L,{children:i?.clients?.length&&i.clients.length>0?e.jsx(_,{currentPage:n==="third-party"?1:0,onChangePage:l=>r.push(H+`/${l}`),pages:[{id:"personal",title:"Персональное соглашение",content:e.jsx(b,{})},{id:"third-party",title:"Соглашение для третьей стороны",content:e.jsx(q,{})}]}):e.jsx(b,{})})})},b=()=>{const[r,i,t,s]=p([c.$done,c.$completed,c.$workerLoading,c.$electronicInteractionStore]);return s?e.jsx(w,{done:r,data:s,completed:i,loading:t,handleSubmit:()=>{j.postElectronicInteraction()},children:e.jsxs("div",{className:"info-text",children:["Я, ",e.jsx("b",{children:s.fio}),",",e.jsxs("p",{children:[e.jsx("b",{children:"Паспорт: "}),s.passSer," ",s.passNum,", выдан ",g(s.passDate)," ",s.passDiv,e.jsx("br",{}),e.jsx("b",{children:"Дата рождения: "}),s.bdate,e.jsx("br",{}),e.jsx("b",{children:"Номер мобильного телефона: "}),s.phone,e.jsx("br",{}),e.jsx("b",{children:"Адрес электронной почты: "}),s.email]}),e.jsxs("p",{children:["настоящим безоговорочно без каких-либо изъятий или ограничений на условиях присоединения принимаю условия"," ",e.jsx("a",{target:"_blank",href:"https://e.mospolytech.ru/old/storage/files/EAccept.pdf",rel:"noreferrer",children:"СОГЛАШЕНИЯ"})," ","об электронном взаимодействии, опубликованного на официальном сайте Университета, и выражаю согласие на подписание электронных документов в личном кабинете."]})]})}):null},q=()=>{const{open:r}=h(),[i,t,s]=p([c.$electronicInteractionStore,m.signAgreement.$succeeded,m.signAgreement.$pending]);return i?e.jsx(e.Fragment,{children:i.clients?.map(n=>e.jsx(w,{completed:t,done:t,loading:s,data:n,handleSubmit:()=>{r(e.jsx(V,{guid:n.guid,email:n.email}))},children:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"info-text",children:["Я, ",e.jsx("b",{children:n.fio}),",",e.jsxs("p",{children:[e.jsx("b",{children:"Паспорт: "}),n.passSer," ",n.passNum,", выдан ",g(n.passDate)," ",n.passDiv,e.jsx("br",{}),e.jsx("b",{children:"Дата рождения: "}),n.bdate,e.jsx("br",{}),e.jsx("b",{children:"Номер мобильного телефона: "}),n.phone,e.jsx("br",{}),e.jsx("b",{children:"Адрес электронной почты: "}),n.email]}),e.jsxs("p",{children:["настоящим безоговорочно без каких-либо изъятий или ограничений на условиях присоединения принимаю условия"," ",e.jsx("a",{target:"_blank",href:"https://e.mospolytech.ru/old/storage/files/EAccept.pdf",rel:"noreferrer",children:"СОГЛАШЕНИЯ"})," ","об электронном взаимодействии, опубликованного на официальном сайте Университета, и выражаю согласие на подписание электронных документов в личном кабинете."]})]})})},n.guid))}):null};export{K as default};
