var d=(e,t,s)=>new Promise((f,p)=>{var i=l=>{try{r(s.next(l))}catch(b){p(b)}},n=l=>{try{r(s.throw(l))}catch(b){p(b)}},r=l=>l.done?f(l.value):Promise.resolve(l.value).then(i,n);r((s=s.apply(e,t)).next())});import{d as N,p as k,e as R,h as q,x as z,i as H,s as m,r as $,j as a}from"./vendor-6764d205.js";import{au as v,dV as J,s as Q,a5 as X,P as Z,g as y,T as w,B as E}from"./index-5d5ce0cf.js";const F=[{id:"sber",name:"–ü–ê–û –°–±–µ—Ä–±–∞–Ω–∫"},{id:"alfa",name:"–ê–û –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫"}],x={isReady:e=>{if(!e)return!1;const t=e.file;if(!t||typeof t!="string")return!1;const s=t.trim();return s===""?!1:s.startsWith("http")||s.startsWith("/")||s.includes(".php")||s.includes(".")},isProcessing:e=>!!(e&&!x.isReady(e)),hasRequest:e=>!!e,getBankName:e=>{const t=F.find(s=>s.id===e);return(t==null?void 0:t.name)||e},getBankIcon:e=>({sber:"üü¢",alfa:"üî¥",vtb:"üîµ"})[e]||"üè¶"},T="/api",L={getCardRequest:()=>d(void 0,null,function*(){try{const e=yield N.get(`${T}/?getUsedBank&token=${v()}`);let t=null;return e.data&&typeof e.data=="object"&&(Array.isArray(e.data)&&e.data.length>0?t=e.data[0]:e.data.success&&e.data.data?t=e.data.data:e.data.file!==void 0||e.data.additionalBank!==void 0||e.data.createdAt!==void 0?t=e.data:(e.data===null||Object.keys(e.data).length===0||Array.isArray(e.data)&&e.data.length===0)&&(t=null)),t}catch(e){return console.error("Error fetching card request:",e),null}}),submitCardRequest:e=>d(void 0,null,function*(){try{const t=new FormData;t.set("accept",e.accept.toString()),e.additionalBank&&t.set("additionalBank",e.additionalBank),t.set("token",v());const s=yield N.post(`${T}/?setUsedBank&token=${v()}`,t,{headers:{"Content-Type":"multipart/form-data"}});return s.data&&typeof s.data=="object"?s.data.success!==void 0?s.data:{success:!0,data:s.data,message:"–ó–∞—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–Ω–æ"}:{success:!0,data:s.data,message:"–ó–∞—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–Ω–æ"}}catch(t){throw console.error("Error submitting card request:",t),new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–ª–µ–Ω–∏—è")}}),downloadDocument:()=>d(void 0,null,function*(){try{const e=yield L.getCardRequest();if(!(e!=null&&e.file))throw new Error("–§–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω");const t=document.createElement("a");t.href=e.file,t.download="used-bank-request.pdf",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){throw console.error("Error downloading document:",e),new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞")}})};class ee{static getCardRequest(){return d(this,null,function*(){return yield new Promise(t=>setTimeout(t,500)),this.storage})}static submitCardRequest(t){return d(this,null,function*(){if(yield new Promise(s=>setTimeout(s,1e3)),!t.accept)throw new Error("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è");return this.storage={additionalBank:t.additionalBank,createdAt:new Date().toISOString()},setTimeout(()=>{this.storage&&(this.storage.file="https://example.com/documents/card-request-document.pdf")},5e3),{success:!0,data:this.storage,message:"–ó–∞—è–≤–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–Ω–æ"}})}static downloadDocument(){return d(this,null,function*(){var t;if(yield new Promise(n=>setTimeout(n,500)),!((t=this.storage)!==null&&t!==void 0&&t.file))throw new Error("–î–æ–∫—É–º–µ–Ω—Ç –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è");const s=`%PDF-1.4
1 0 obj
<<
/Type /Catalog
/Pages 2 0 R
>>
endobj

2 0 obj
<<
/Type /Pages
/Kids [3 0 R]
/Count 1
>>
endobj

3 0 obj
<<
/Type /Page
/Parent 2 0 R
/MediaBox [0 0 612 792]
/Contents 4 0 R
>>
endobj

4 0 obj
<<
/Length 44
>>
stream
BT
/F1 12 Tf
100 700 Td
(Card Request Document) Tj
ET
endstream
endobj

xref
0 5
0000000000 65535 f
0000000015 00000 n
0000000068 00000 n
0000000125 00000 n
0000000214 00000 n
trailer
<<
/Size 5
/Root 1 0 R
>>
startxref
308
%%EOF`,f=new Blob([s],{type:"application/pdf"}),p=window.URL.createObjectURL(f),i=document.createElement("a");i.href=p,i.download="used-bank-request.pdf",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(p)})}static reset(){this.storage=null}static setDocumentReady(t="https://example.com/documents/card-request-document.pdf"){this.storage&&(this.storage.file=t)}}J(ee,"storage",null);const B=L,C=k({name:"cardRequestSubmitted",sid:"-rbem0m"}),D=k({name:"documentDownloadRequested",sid:"f8fluo"}),A=k({name:"cardRequestReset",sid:"-10y3yg"}),c=R(()=>d(void 0,null,function*(){return yield B.getCardRequest()}),{name:"getCardRequestFx",sid:"ei32fg"}),u=R(e=>d(void 0,null,function*(){const t=yield B.submitCardRequest(e);if(!t.success)throw new Error(t.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–ª–µ–Ω–∏—è");return t.data}),{name:"submitCardRequestFx",sid:"-79p237"}),g=R(()=>d(void 0,null,function*(){yield B.downloadDocument()}),{name:"downloadDocumentFx",sid:"-896399"}),P=q(null,{name:"$cardRequest",sid:"-68ouxg"}).on(c.doneData,(e,t)=>t).on(u.doneData,(e,t)=>t).reset(A),I=q(!1,{name:"$isLoading",sid:"motyxs"}).on([c,u,g],()=>!0).on([c.done,c.fail,u.done,u.fail,g.done,g.fail],()=>!1),O=q(null,{name:"$error",sid:"-p7eezr"}).on([c.fail,u.fail,g.fail],(e,t)=>t.error.message||"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞").on([c,u,g],()=>null);z({and:[{clock:C,target:u}],or:{sid:"e6l21i"}});z({and:[{clock:D,target:g}],or:{sid:"e8s8ey"}});const te=()=>H({cardRequest:P,isLoading:I,error:O,submitRequest:C,downloadDocument:D,getRequest:c,resetRequest:A}),ae={events:{cardRequestSubmitted:C,documentDownloadRequested:D,cardRequestReset:A},effects:{getCardRequestFx:c,submitCardRequestFx:u,downloadDocumentFx:g},stores:{$cardRequest:P,$isLoading:I,$error:O},selectors:{useCardRequest:te}},h=x.getBankIcon,j=x.getBankName,ne=m.div.withConfig({componentId:"sc-xn7bjn-0"})(["display:flex;flex-direction:column;gap:24px;max-width:800px;margin:0 auto;padding:20px;@media (max-width:768px){padding:16px;gap:16px;}"]),se=m.div.withConfig({componentId:"sc-xn7bjn-1"})(["padding:24px;border-radius:var(--brLight);border:0% solid var(--theme-mild-opposite);box-shadow:0 0 2px rgba(0,0,0,0.3);@media (max-width:768px){padding:16px;}"]),oe=m.div.withConfig({componentId:"sc-xn7bjn-2"})(["border-radius:var(--brLight);padding:20px;margin:16px 0;color:var(--text);line-height:1.8;font-size:15px;.user-info{margin-bottom:20px;}.request-text{margin-bottom:16px;}.additional-request{margin:16px 0;padding:12px;background:var(--theme-2);border-radius:var(--brLight);border-left:1px solid var(--reallyBlue);}.consent-text{margin-top:20px;font-style:italic;}"]),re=m.div.withConfig({componentId:"sc-xn7bjn-3"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin:16px 0;@media (max-width:768px){grid-template-columns:repeat(2,1fr);gap:12px;}"]),ie=m.div.withConfig({componentId:"sc-xn7bjn-4"})(["margin:24px 0;padding:20px;background:var(--block-content);border-radius:var(--brLight);background:rgba(186,192,255,0.09);"]),de=m.div.withConfig({componentId:"sc-xn7bjn-5"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 12px;border-radius:var(--brLight);border:0 solid ",";background:shadow;background:",";color:",";cursor:pointer;transition:all 0.2s ease;text-align:center;min-height:120px;&:hover{border-color:var(--reallyBlue);background:",";transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1);}input[type='checkbox']{display:none;}.bank-icon{font-size:2.5rem;margin-bottom:12px;display:flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:12px;background:",";}.bank-name{font-weight:500;font-size:0.95rem;line-height:1.2;}@media (max-width:768px){padding:16px 8px;min-height:100px;.bank-icon{font-size:2rem;width:50px;height:50px;margin-bottom:8px;}.bank-name{font-size:0.85rem;}}"],({selected:e})=>e?"var(--reallyBlue)":"var(--theme-mild-opposite)",({selected:e})=>e?"var(--reallyBlue)":"var(--block-content)",({selected:e})=>e?"white":"var(--text)",({selected:e})=>e?"var(--reallyBlue)":"var(--block-content)",({selected:e})=>e?"rgba(255, 255, 255, 0.2)":"var(--theme-mild)"),le=m.div.withConfig({componentId:"sc-xn7bjn-6"})(["margin-top:24px;padding:24px;background:var(--block-content);border-radius:var(--brLight);border:1px solid var(--theme-mild-opposite);.status-content{display:flex;align-items:center;gap:12px;margin-bottom:16px;}.status-icon{font-size:24px;}.status-text{font-size:16px;font-weight:500;}@media (max-width:768px){padding:16px;.status-content{flex-direction:column;align-items:flex-start;gap:8px;}}"]),ce=m.div.withConfig({componentId:"sc-xn7bjn-7"})(["display:flex;gap:12px;justify-content:flex-start;flex-wrap:wrap;width:100%;@media (max-width:768px){flex-direction:column;}"]),ue=()=>{const{cardRequest:e,isLoading:t,error:s,submitRequest:f,downloadDocument:p,getRequest:i}=ae.selectors.useCardRequest(),{data:{user:n}}=Q.useUser(),[r,l]=$.useState(""),S=(()=>{const o=new Date,V=new Date(o.getFullYear(),9,1);return o<V})(),U=["l.m.lukyanov@mospolytech.ru","a.s.zhuplev@mospolytech.ru","mfnbrx@gmail.com","t.t.testov@mospolytech.ru"];if(n!=null&&n.email&&!U.includes(n.email))return a.jsx(X,{text:"–î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–ª–∏ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤–∞—Å"});$.useEffect(()=>{i()},[]);const _=o=>{l(o===r?"":o)},G=()=>{f({accept:!0,additionalBank:r}),setTimeout(()=>{i()},1e3)},M=()=>{p()},W=()=>x.hasRequest(e)?x.isReady(e)?a.jsxs("div",{className:"status-content",children:[a.jsx("span",{className:"status-icon",style:{color:"var(--green)",fontSize:"24px"},children:"‚úÖ"}),a.jsx("span",{className:"status-text",children:"–î–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é"})]}):a.jsxs("div",{className:"status-content",children:[a.jsx("span",{className:"status-icon",style:{color:"var(--orange)",fontSize:"24px"},children:"‚è±Ô∏è"}),a.jsx("span",{className:"status-text",children:"–ó–∞—è–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è"})]}):null,K=()=>"–ë–∞–Ω–∫ –í–¢–ë (–ü–ê–û)",Y=()=>!!(e!=null&&e.additionalBank&&e.additionalBank!==""&&e.additionalBank.trim()!=="");return a.jsx(Z,{children:a.jsxs(ne,{children:[s&&a.jsx(y,{type:"failure",title:"–û—à–∏–±–∫–∞",children:s}),x.hasRequest(e)&&(e.file||e.createdAt)&&a.jsxs(le,{children:[a.jsx(w,{size:4,bottomGap:"16px",children:"–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–ª–µ–Ω–∏—è"}),W(),a.jsxs("div",{style:{marginBottom:"16px",color:"var(--text-secondary)"},children:[a.jsxs("p",{style:{marginBottom:"8px"},children:["–û—Å–Ω–æ–≤–Ω–æ–π –±–∞–Ω–∫: ",a.jsx("span",{style:{fontSize:"1.2em"},children:h("vtb")})," ",a.jsx("strong",{children:K()})]}),Y()&&a.jsxs("p",{style:{marginBottom:"0"},children:["–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–Ω–∫:"," ",a.jsx("span",{style:{fontSize:"1.2em"},children:h(e.additionalBank)})," ",a.jsx("strong",{children:j(e.additionalBank)})]})]}),x.isReady(e)&&a.jsx(E,{onClick:M,text:"üì• –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç",background:"var(--DarkGreen)",textColor:"white",loading:t,width:"100%"})]}),S&&a.jsxs(se,{children:[a.jsx(w,{size:4,bottomGap:"16px",children:e?"–ü–æ–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ":"–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–ª–µ–Ω–∏—è"}),a.jsxs(oe,{children:[a.jsxs("div",{className:"user-info",children:["–Ø,"," ",n!=null&&n.surname&&n!==null&&n!==void 0&&n.name&&n!==null&&n!==void 0&&n.patronymic?`${n.surname} ${n.name} ${n.patronymic}`:"[–§–ò–û]",",",a.jsx("br",{}),"–ü–∞—Å–ø–æ—Ä—Ç: ",n!=null&&n.passSer&&n!==null&&n!==void 0&&n.passNum?`${n.passSer} ${n.passNum}`:"—Å–∫—Ä—ã—Ç–æ",a.jsx("br",{}),"–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:"," ","—Å–∫—Ä—ã—Ç–æ",a.jsx("br",{}),"–ù–æ–º–µ—Ä –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞: ",(n==null?void 0:n.phone)||"[—Ç–µ–ª–µ—Ñ–æ–Ω]",a.jsx("br",{}),"–ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã: ",(n==null?void 0:n.email)||"[email]"]}),a.jsxs("div",{className:"request-text",children:["–î–ª—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏—Ç–∞—é—â–∏—Ö—Å—è –º–Ω–µ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (—Å—Ç–∏–ø–µ–Ω–¥–∏–π, –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –¥—Ä—É–≥–∏—Ö –≤—ã–ø–ª–∞—Ç) –ø—Ä–æ—à—É –í–∞—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –ù–°–ü–ö ¬´–ú–ò–†¬ª –≤ —Ä–∞–º–∫–∞—Ö –∑–∞—Ä–ø–ª–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å –±–∞–Ω–∫–æ–º ",h("vtb")," –ë–∞–Ω–∫ –í–¢–ë (–ü–ê–û)"]}),r&&a.jsxs("div",{className:"additional-request",children:["–¢–∞–∫–∂–µ –ø—Ä–æ—à—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã –ù–°–ü–ö ¬´–ú–ò–†¬ª –±–∞–Ω–∫–∞ ",h(r)," ",j(r)]}),a.jsxs("div",{className:"consent-text",children:["–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ –º–Ω–æ—é –ø—Ä–∏ –ø—Ä–∏–µ–º–µ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –ü–æ–ª–∏—Ç–µ—Ö —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏—Ö –ø–µ—Ä–µ–¥–∞—á—É –≤ –±–∞–Ω–∫ –ë–∞–Ω–∫ –í–¢–ë (–ü–ê–û)",r?` –∏ ${h(r)} ${j(r)}`:""," ","–≤ —Ü–µ–ª—è—Ö –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç—ã."]})]}),a.jsxs(ie,{children:[a.jsx(w,{size:5,bottomGap:"12px",children:"–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–Ω–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):"}),a.jsx(re,{children:F.filter(o=>o.id!=="vtb").map(o=>a.jsxs(de,{selected:r===o.id,onClick:()=>_(o.id),children:[a.jsx("div",{className:"bank-icon",children:h(o.id)}),a.jsx("div",{className:"bank-name",children:o.name})]},o.id))})]}),a.jsx(ce,{children:a.jsx(E,{onClick:G,text:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–ª–µ–Ω–∏–µ",background:"var(--reallyBlue)",textColor:"white",loading:t,isActive:!0,notActiveClickMessage:""})}),a.jsx("br",{}),e&&a.jsx(y,{type:"info",title:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",children:"–ü–æ–¥–∞—á–∞ –Ω–æ–≤–æ–≥–æ –∑–∞—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ."})]}),!S&&!e&&a.jsx(y,{type:"failure",title:"–§–æ—Ä–º–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞",children:"–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–ª–µ–Ω–∏–π –Ω–∞ –≤—ã–ø—É—Å–∫ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–æ 1 –æ–∫—Ç—è–±—Ä—è)."})]})})},ge=()=>a.jsx(ue,{});export{ge as default};
