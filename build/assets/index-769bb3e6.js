import{j as i,s as j,r as o,F as S}from"./vendor-e9654bfa.js";import{v as k,c2 as N,a as w,c3 as z,O as A,E as g,W as E,c4 as D,F as I,I as R,M as q,S as M,w as O,c5 as U}from"./index-c2d11f9e.js";const F=[{id:0,title:"Один в комнате"},{id:1,title:"Двое в комнате"}],f=[{id:1,title:"Двое в комнате"},{id:2,title:"Трое в комнате"}],W=[{id:0,title:"ул. Михалковская, д. 7, корп. 3"},{id:1,title:"ул. Бориса Галушкина, д. 9"}],$=(t,e)=>{var n,u,c,_,l,s;const{fio:a,phone:r,email:d}=t,p=(u=(n=e==null?void 0:e.data[3])==null?void 0:n.value)==null?void 0:u.id;return{title:"Заявка на комнату повышенной комфортности",data:[{title:"ФИО",value:a,fieldName:"fio",width:"100%",editable:!1},{title:"Телефон",value:((c=e==null?void 0:e.data[1])==null?void 0:c.value)??r,fieldName:"phone",type:"tel",width:"100%",editable:!0,required:!0,mask:!0},{title:"Email",value:((_=e==null?void 0:e.data[2])==null?void 0:_.value)??d,fieldName:"email",type:"email",width:"100%",editable:!0,required:!0},{title:"Адрес общежития",value:((l=e==null?void 0:e.data[3])==null?void 0:l.value)??null,fieldName:"address",type:"select",items:W,width:"100%",editable:!0,required:!0},{title:"Приоритетный тип размещения",value:null,fieldName:"allocation",type:"select",items:p===1?f:F,width:"100%",editable:!0,required:!0},{title:"Альтернативный тип размещения",value:null,fieldName:"alternative-allocation",type:"select",items:p===1?f:F,width:"100%",editable:!0,required:!0},{title:"Дополнительная информация",value:((s=e==null?void 0:e.data[6])==null?void 0:s.value)??"",fieldName:"info",type:"textarea",editable:!0,placeholder:"Желание проживать с другом и т.д."}],alert:i.jsx(i.Fragment,{children:"Подача заявок открыта с 12:00 6 сентября до 12:00 7 сентября!"}),hint:"Перед отправкой заявки обязательно проверьте указанную в форме контактную информацию (мобильный телефон и адрес электронной почты) и при необходимости внесите изменения.",optionalCheckbox:{title:"С приказами об изменении размеров платы за дополнительные услуги № 0597-ОД от 08.06.2021 и № 0032-АХД от 09.03.2022 ознакомлен(а)",value:!1,fieldName:"",editable:!0},links:[{title:"Приказ № 0032-АХД от 09.03.2022 (ул. Михалковская, д. 7, корп. 3)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0032-AHD_ot_09_03_2022_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_us.pdf",type:"document"},{title:"Приказ № 0597-ОД от 08.06.2021 (ул. Малая Семеновская, д. 12)",link:"https://e.mospolytech.ru/old/storage/files/Prikaz_po_osnovnoj_deyatelnosti_No_0597-OD_ot_08_06_2021_Ob_utverzhdenii_razmerov_platy_za_dopolnitelnye_usl.pdf",type:"document"}]}},C=(t,e,a)=>{e(!0);const r=k(t);try{N(r),e(!1),a(!0)}catch(d){e(!1),w.evokePopUpMessage({message:`Не удалось отправить форму. Ошибка: ${d}`,type:"failure",time:3e4})}},P=j.div`
    display: flex;
    align-items: ${({isDone:t})=>t?"center":"flex-start"};
    justify-content: center;
    width: 100%;
    height: ${({isDone:t})=>t&&"100%"};
    padding: 10px;
    color: var(--text);

    @media (max-width: 1000px) {
        padding: 0;
    }
`,H=()=>{var h,x,m;const[t,e]=o.useState(null),{data:a,error:r}=z.useSuperiorRoom(),[d,p]=o.useState(0),[n,u]=o.useState(!1),[c,_]=o.useState(!1),l=(n||!(a!=null&&a.is_avaliable))??!1,{data:{user:s}}=A.useUser();if((s==null?void 0:s.educationForm)!=="Очная")return i.jsx(g,{text:"Данный раздел недоступен для вашей формы обучения"});const v=U();return v?i.jsx(g,{text:v}):(o.useEffect(()=>{a&&e($(a,t))},[a,d]),o.useEffect(()=>{var y,b;t&&p((b=(y=t==null?void 0:t.data[3])==null?void 0:y.value)==null?void 0:b.id)},[(h=t==null?void 0:t.data[3])==null?void 0:h.value]),i.jsx(E,{load:()=>D.getSuperiorRoomFx(),loading:!a,error:r,data:a,children:i.jsx(P,{isDone:l,children:!!t&&!!e&&i.jsxs(I,{children:[i.jsx(R,{...t,collapsed:l,setData:e}),i.jsxs(q,{title:"Информация по заявке",type:"info",icon:i.jsx(S,{}),visible:l,children:["Ваша заявка направлена на рассмотрение жилищной комиссии. Итоги рассмотрения будут направлены Вам в срок до 21 августа 2023 года на указанную в заявке почту:"," ",((x=t.data)==null?void 0:x[2]).value]}),i.jsx(M,{text:a!=null&&a.is_avaliable?"Отправить":"Отправлено",action:()=>C(t,_,u),isLoading:c,completed:n,setCompleted:u,repeatable:!1,buttonSuccessText:"Отправлено",isDone:l,isActive:O(t)&&(((m=t.optionalCheckbox)==null?void 0:m.value)??!0),popUpFailureMessage:l?(a==null?void 0:a.error_text)??"Форма отправлена":"Для отправки формы необходимо, чтобы все поля были заполнены",popUpSuccessMessage:"Данные формы успешно отправлены"})]})})}))};export{H as default};
